<<<<<<< HEAD
{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./src/iDisqus.js","webpack://[name]/(webpack)/buildin/module.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_RESULT__","global","document","localStorage","scripts","lasturl","length","src","isEdge","substring","lastIndexOf","navigator","userAgent","indexOf","isIE","ActiveXObject","getAjax","url","success","error","xhr","XMLHttpRequest","open","encodeURI","onreadystatechange","readyState","status","responseText","onerror","withCredentials","send","postAjax","data","params","keys","filter","k","map","encodeURIComponent","join","setRequestHeader","ElementProto","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","selector","elements","this","ownerDocument","querySelectorAll","index","Boolean","closest","element","nodeType","parentNode","on","eventName","handler","addEventListener","e","target","Element","User","dom","arguments","opts","init","autologin","_","getItem","email","avatar","type","logged_in","boxarr","getElementsByClassName","forEach","item","querySelector","classList","add","remove","dataset","setItem","api","resp","JSON","parse","code","submit","response","login","timer","popup","setInterval","closed","clearInterval","user","logout","removeItem","iDisqus","getElementById","slice","site","location","origin","optsUrl","replace","pathname","search","identifier","link","title","slug","desc","content","timeout","toggle","autoCreate","auto","relatedType","emojiPath","emoji_path","emojiList","emoji_list","unicode","emoji_preview","emojiPreview","eac","stat","current","loaded","loading","editing","offsetTop","thread","next","message","mediaHtml","media","post","count","users","imageSize","disqusLoaded","disqus_config","page","callbacks","onReady","push","style","display","disabled","checked","handle","onNewComment","comment","a","postData","id","setTimeout","console","info","timeAgo","templates","prefix","suffix","seconds","minute","minutes","hour","hours","day","days","week","weeks","month","months","year","years","template","Math","abs","round","time","Date","getTime","$this","getAttribute","innerHTML","box","outerHTML","loadMore","threadCreate","show","upload","verify","jump","mention","keySelect","field","focus","input","parentShow","$iDisqus","disqus","getlist","tips","log","createElement","forum","timestamp","now","onload","head","body","appendChild","ontimeout","abort","addListener","els","evt","func","el","counts","qty","commentArr","disqusUrl","href","itemLink","posts","disqusCount","loadRelated","settings","organicDiscoveryEnabled","relatedLoaded","popHtml","topPost","raw_message","createdAt","loadReactions","threadReactionsEnabled","documentElement","scrollTop","total","cursor","badge","moderatorBadgeText","loadmore","load","parent","unshift","hasPrev","hasNext","iframe","width","clientWidth","height","contentWindow","getElementsByTagName","script","scrollTo","test","hash","scrollBy","getBoundingClientRect","top","threadInit","alert","parentPostDom","username","parentPost","insert","isPost","html","isMod","isDeleted","insertAdjacentHTML","postEdit","currentTarget","clearTimeout","edit","wrapper","contains","form","urls","match","image","imageHtml","thumbnailUrl","textarea","selStart","selectionStart","mentionIndex","mentionText","mentionDom","showUsers","re","RegExp","keyCode","coord","getCaretCoord","list","left","setSelectionRange","carPos","selectionEnd","div","span","copyStyle","getComputedStyle","prop","position","textContent","substr","coords","parseFloat","lineHeight","offsetLeft","scrollLeft","removeChild","preventDefault","previousSibling","nextSibling","getLocation","history","replaceState","undefined","parentHtml","appendText","cancel","className","commentBox","$avatar","$name","$email","isEmail","errorTips","gravatar","text","file","progress","alertmsg","files","size","FormData","append","$item","filename","xhrUpload","imageUrl","Image","ceil","imageItem","imageArr","Text","Dom","idisqus","errorDom","errorHtml","parentId","currentId","elName","elEmail","elUrl","alertClear","preMessage","emojiShort","toJSON","click","mentions","stringify","verifyCode","reEdit","threadForm","reload","destroy","webpackPolyfill","deprecate","paths","children"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,UAAAH,GACA,iBAAAC,QACAA,QAAA,QAAAD,IAEAD,EAAA,QAAAC,IARA,CASCK,OAAA,WACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAT,YAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA0DA,OArDAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAtB,GACA,oBAAAuB,eAAAC,aACAN,OAAAC,eAAAnB,EAAAuB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAnB,EAAA,cAAiDyB,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAhC,GACA,IAAAe,EAAAf,KAAA2B,WACA,WAA2B,OAAA3B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,kCClFA,IAAAC;;;;;;;;;;GAUAlC,EAAA,GACA,SAAAmC,GACA,aAEA,IAAA3B,EAAA4B,SACAjC,EAAAkC,aACAC,EAAA9B,EAAA8B,QACAC,EAAAD,IAAAE,OAAA,GAAAC,IAEAC,GADAH,EAAAI,UAAA,EAAAJ,EAAAK,YAAA,MACAC,UAAAC,UAAAC,QAAA,YACAC,IAAAlD,OAAAmD,eAAA,kBAAAnD,OAQA,SAAAoD,EAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAA,IAAAC,eAUA,OATAD,EAAAE,KAAA,MAAAC,UAAAN,IACAG,EAAAI,mBAAA,WACA,GAAAJ,EAAAK,YAAA,KAAAL,EAAAM,QACAR,EAAAE,EAAAO,eAGAP,EAAAQ,QAAAT,EACAC,EAAAS,iBAAA,EACAT,EAAAU,OACAV,EAGA,SAAAW,EAAAd,EAAAe,EAAAd,EAAAC,GACA,IAAAc,EAAA,iBAAAD,IAAAtD,OAAAwD,KAAAF,GAAAG,OAAA,SAAAC,GACA,aAAAJ,EAAAI,KACSC,IAAA,SAAAD,GACT,OAAAE,mBAAAF,GAAA,IAAAE,mBAAAN,EAAAI,MACSG,KAAA,KAETnB,EAAA,IAAAC,eAWA,OAVAD,EAAAE,KAAA,OAAAL,GACAG,EAAAI,mBAAA,WACA,GAAAJ,EAAAK,YAAA,KAAAL,EAAAM,QACAR,EAAAE,EAAAO,eAGAP,EAAAQ,QAAAT,EACAC,EAAAS,iBAAA,EACAT,EAAAoB,iBAAA,oDACApB,EAAAU,KAAAG,GACAb,GAUA,SAAAqB,GAEA,mBAAAA,EAAAC,UACAD,EAAAC,QAAAD,EAAAE,mBAAAF,EAAAG,oBAAAH,EAAAI,uBAAA,SAAAC,GAKA,IAJA,IACAC,GADAC,KACA9C,UADA8C,KACAC,eAAAC,iBAAAJ,GACAK,EAAA,EAEAJ,EAAAI,IAAAJ,EAAAI,KAJAH,QAKAG,EAGA,OAAAC,QAAAL,EAAAI,MAIA,mBAAAV,EAAAY,UACAZ,EAAAY,QAAA,SAAAP,GAGA,IAFA,IAAAQ,EAAAN,KAEAM,GAAA,IAAAA,EAAAC,UAAA,CACA,GAAAD,EAAAZ,QAAAI,GACA,OAAAQ,EAGAA,IAAAE,WAGA,cAKAf,EAAAgB,GAAA,SAAAC,EAAAZ,EAAAa,GACAX,KAAAY,iBAAAF,EAAA,SAAAG,GACA,QAAAC,EAAAD,EAAAC,OAA2CA,MAAAd,KAA0Bc,IAAAN,WACrE,GAAAM,EAAApB,QAAAI,GAAA,CACAa,EAAAxF,KAAA,KAAA0F,EAAAC,GACA,SAGa,IAzCb,CA4CKlG,OAAAmG,QAAAnE,WAGL,IAAAoE,EAAA,WACAhB,KAAAiB,IAAAC,UAAA,GACAlB,KAAAmB,KAAAD,UAAA,GACAlB,KAAAoB,OACApB,KAAAqB,aAGAL,EAAApE,WAEAwE,KAAA,WACA,IAAAE,EAAAtB,KAEAsB,EAAA/F,KAAAN,EAAAsG,QAAA,QACAD,EAAAE,MAAAvG,EAAAsG,QAAA,SACAD,EAAArD,IAAAhD,EAAAsG,QAAA,OACAD,EAAAG,OAAAxG,EAAAsG,QAAA,UACAD,EAAAI,KAAAzG,EAAAsG,QAAA,QACAD,EAAAK,UAAA1G,EAAAsG,QAAA,aAEA,IAAAK,EAAAN,EAAAL,IAAAY,uBAAA,eACA,QAAAP,EAAAK,aACAG,QAAA3G,KAAAyG,EAAA,SAAAG,GACA,KAAAT,EAAAI,MACAK,EAAAC,cAAA,yBAAAC,UAAAC,IAAA,aAEAH,EAAAC,cAAA,sBAAA/F,MAAAqF,EAAA/F,KACAwG,EAAAC,cAAA,uBAAA/F,MAAAqF,EAAAE,MACAO,EAAAC,cAAA,qBAAA/F,MAAAqF,EAAArD,IACA8D,EAAAC,cAAA,yBAAAzE,IAAA+D,EAAAG,aAGAK,QAAA3G,KAAAyG,EAAA,SAAAG,GACAA,EAAAC,cAAA,yBAAAC,UAAAE,OAAA,aACAJ,EAAAC,cAAA,sBAAA/F,MAAA,GACA8F,EAAAC,cAAA,uBAAA/F,MAAA,GACA8F,EAAAC,cAAA,qBAAA/F,MAAA,GACA8F,EAAAC,cAAA,yBAAAzE,IAAA+D,EAAAL,IAAAe,cAAA,yBAAAI,QAAAX,SAEAxG,EAAAoH,QAAA,uBAKAhB,UAAA,WACA,IAAAC,EAAAtB,KACAhC,EAAAsD,EAAAH,KAAAmB,IAAA,qBAAAC,GACA,IAAAvD,EAAAwD,KAAAC,MAAAF,GACA,GAAAvD,EAAA0D,KACApB,EAAAqB,OAAA3D,EAAA4D,UAEA,KAAAtB,EAAAI,OACAzG,EAAAoH,QAAA,qBACAf,EAAAF,SAGa,eAKbyB,MAAA,WAEA,IAEAC,EAFAxB,EAAAtB,KACA+C,EAAAnI,OAAA0D,KAAAgD,EAAAH,KAAAmB,IAAA,oDAOAQ,EAAAE,YALA,WACAD,KAAAE,SACAC,cAAAJ,GACAxB,EAAA6B,KAAA9B,cAEA,MAKA+B,OAAA,WACA,IAAA9B,EAAAtB,KACAjB,EAAAuC,EAAAH,KAAAmB,IAAA,iBAAoD,SAAAC,GACpDtH,EAAAoH,QAAA,qBACApH,EAAAoI,WAAA,QACApI,EAAAoI,WAAA,SACApI,EAAAoI,WAAA,UACApI,EAAAoI,WAAA,QACApI,EAAAoI,WAAA,OACA/B,EAAA6B,KAAA/B,UAKAuB,OAAA,SAAAQ,GACAlI,EAAAoH,QAAA,QAAAc,EAAA3B,OACAvG,EAAAoH,QAAA,OAAAc,EAAAzB,MACAzG,EAAAoH,QAAA,OAAAc,EAAA5H,MACAN,EAAAoH,QAAA,MAAAc,EAAAlF,KACAhD,EAAAoH,QAAA,SAAAc,EAAA1B,QACAxG,EAAAoH,QAAA,oBACArC,KAAAoB,SAIA,IAAAkC,EAAA,WACA,IAAAhC,EAAAtB,KAOA,GAJAsB,EAAAH,KAAA,iBAAAD,UAAA,GAAAA,UAAA,GAAAA,UAAA,GACAI,EAAAL,IAAA3F,EAAAiI,eAAA,iBAAArC,UAAA,GAAAA,UAAA,cACAI,EAAAH,KAAAmB,IAAA,KAAAhB,EAAAH,KAAAmB,IAAAkB,OAAA,GAAAlC,EAAAH,KAAAmB,IAAAkB,MAAA,MAAAlC,EAAAH,KAAAmB,IACAhB,EAAAH,KAAAsC,KAAAnC,EAAAH,KAAAsC,MAAAC,SAAAC,OACArC,EAAAH,KAAAlD,IAAA,CACA,IAAA2F,EAAAtC,EAAAH,KAAAlD,IAAA4F,QAAAvC,EAAAH,KAAAsC,KAAA,IACAnC,EAAAH,KAAAlD,IAAA,KAAA2F,EAAAJ,MAAA,SAAAI,SAEAtC,EAAAH,KAAAlD,IADST,GAAAM,EACTS,UAAAmF,SAAAI,UAAAvF,UAAAmF,SAAAK,QAEAL,SAAAI,SAAAJ,SAAAK,OAEAzC,EAAAH,KAAA6C,WAAA1C,EAAAH,KAAA6C,YAAA1C,EAAAH,KAAAlD,IACAqD,EAAAH,KAAA8C,KAAA3C,EAAAH,KAAAsC,KAAAnC,EAAAH,KAAAlD,IACAqD,EAAAH,KAAA+C,MAAA5C,EAAAH,KAAA+C,OAAA5I,EAAA4I,MACA5C,EAAAH,KAAAgD,KAAA7C,EAAAH,KAAAgD,KAAA7C,EAAAH,KAAAgD,KAAAN,QAAA,0BACAvC,EAAAH,KAAAiD,KAAA9C,EAAAH,KAAAiD,OAAA9I,EAAA0G,cAAA,wBAAA1G,EAAA0G,cAAA,wBAAAqC,QAAA,IACA/C,EAAAH,KAAAhF,KAAAmF,EAAAH,KAAAhF,MAAA,EACAmF,EAAAH,KAAAmD,QAAAhD,EAAAH,KAAAmD,SAAA,IACAhD,EAAAH,KAAAoD,OAAAjD,EAAAH,KAAAoD,OAAAjJ,EAAAiI,eAAAjC,EAAAH,KAAAoD,QAAA,KACAjD,EAAAH,KAAAqD,aAAAlD,EAAAH,KAAAqD,cAAAlD,EAAAH,KAAAsD,KACAnD,EAAAH,KAAAuD,YAAApD,EAAAH,KAAAuD,aAAA,UAGApD,EAAAH,KAAAwD,UAAArD,EAAAH,KAAAwD,WAAArD,EAAAH,KAAAyD,YAAA,4DACAtD,EAAAuD,UAAAvD,EAAAH,KAAA0D,WAAAvD,EAAAH,KAAA2D,cACApC,KAAA,QACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,OACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,MACAwB,MAAA,OACAa,QAAA,UAEArC,KAAA,+BACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,UACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,SACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,UACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,WACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,OACAwB,MAAA,MACAa,QAAA,UAEArC,KAAA,aACAwB,MAAA,IACAa,QAAA,UAEArC,KAAA,QACAwB,MAAA,IACAa,QAAA,UAEArC,KAAA,QACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,WACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,eACAwB,MAAA,MACAa,QAAA,UAEArC,KAAA,UACAwB,MAAA,KACAa,QAAA,UAEArC,KAAA,IACAwB,MAAA,KACAa,QAAA,UAGAzD,EAAAH,KAAA6D,eAAA1D,EAAAH,KAAA8D,eACAjH,EAAAsD,EAAAH,KAAAmB,IAAA,oBAAAC,GACAjB,EAAA4D,IAAA1C,KAAAC,MAAAF,IACa,cAKbjB,EAAA6D,MACAC,QAAA,UACAC,QAAA,EACAC,SAAA,EACAC,SAAA,EACAC,UAAA,EACAC,OAAA,KACAC,KAAA,KACAC,QAAA,KACAC,UAAA,KACAC,SACAC,QACAxL,QACAyL,MAAA,EACAC,SACAC,aACAC,cAAA,GAIAtL,OAAAuL,cAAA,WACAnG,KAAAoG,KAAApC,WAAA1C,EAAAH,KAAA6C,WACAhE,KAAAoG,KAAAlC,MAAA5C,EAAAH,KAAA+C,MACAlE,KAAAoG,KAAAnI,IAAAqD,EAAAH,KAAA8C,KACAjE,KAAAqG,UAAAC,QAAAC,KAAA,WACAjF,EAAA6D,KAAAC,QAAA,SACA9D,EAAA6D,KAAAe,cAAA,EACA5E,EAAAL,IAAAe,cAAA,YAAAwE,MAAAC,QAAA,OACAnF,EAAAL,IAAAe,cAAA,kBAAAwE,MAAAC,QAAA,QACA,GAAAnF,EAAAH,KAAAhF,MAAAmF,EAAAH,KAAAoD,SACAjD,EAAAH,KAAAoD,OAAAmC,SAAA,GACApF,EAAAH,KAAAoD,OAAAoC,SAAA,EACArF,EAAAH,KAAAoD,OAAA3D,iBAAA,SAAAU,EAAAsF,OAAArC,QAAA,MAIAvE,KAAAqG,UAAAQ,cAAA,SAAAC,EAAAC,GACA,IAAAC,GACAC,GAAAH,EAAAG,IAGAC,WAAA,WACAnI,EAAAuC,EAAAH,KAAAmB,IAAA,iBAAA0E,EAAA,SAAAzE,GACA4E,QAAAC,KAAA,cAEiB,QAKjB9F,EAAAH,KAAAC,MACAE,EAAAF,QAMAkC,EAAA1G,UAAAyK,QAAA,WAEA,IAAA/F,EAAAtB,KACAsH,GACAC,OAAA,GACAC,OAAA,IACAC,QAAA,KACAC,OAAA,MACAC,QAAA,OACAC,KAAA,MACAC,MAAA,OACAC,IAAA,KACAC,KAAA,MACAC,KAAA,KACAC,MAAA,MACAC,MAAA,MACAC,OAAA,OACAC,KAAA,KACAC,MAAA,OAEAC,EAAA,SAAApM,EAAAO,GACA,OAAA6K,EAAApL,IAAAoL,EAAApL,GAAA2H,QAAA,MAAA0E,KAAAC,IAAAD,KAAAE,MAAAhM,MAGAqG,EAAA,SAAA4F,GACA,GAAAA,EAAA,CAIAA,GADAA,GADAA,GADAA,IAAA7E,QAAA,aACAA,QAAA,SAAAA,QAAA,UACAA,QAAA,SAAAA,QAAA,aACAA,QAAA,iCACA6E,EAAA,IAAAC,KAAA,IAAAD,MAEA,IACAjB,EAAA,OADA,IAAAkB,MACAC,UAAAF,IAAA,EACAf,EAAAF,EAAA,GACAI,EAAAF,EAAA,GACAI,EAAAF,EAAA,GAEAM,EAAAJ,EAAA,GACAM,EAAAN,EAAA,IAEA,OAAAT,EAAAC,QAAAE,EAAA,IAAAa,EAAA,UAAAb,MAAA,IAAAa,EAAA,aAAAX,EAAA,IAAAW,EAAA,UAAAX,MAAA,IAAAW,EAAA,WAAAT,EAAA,IAAAS,EAAA,QAAAT,MAAA,IAAAS,EAAA,UAAAP,EAAA,IAAAO,EAAA,OAAAP,MAAA,IAAAO,EAAA,YAAAP,EAAA,KAAAO,EAAA,SAAAH,IAAAE,EAAA,KAAAC,EAAA,WAAAA,EAAA,QAAAD,IAAAf,EAAAE,SAGAzH,EAAAuB,EAAAL,IAAAf,iBAAA,kBACA,QAAAlF,KAAA+E,EAAA,CACA,IAAA8I,EAAA9I,EAAA/E,GACA,iBAAA6N,IACAA,EAAA3E,MAAA,IAAAyE,KAAAE,EAAAC,aAAA,aACAD,EAAAE,UAAAjG,EAAA+F,EAAAC,aAAA,cAKA5B,WAAA5F,EAAA+F,QAAA7K,KAAA8E,GAAA,MAKAgC,EAAA1G,UAAAwE,KAAA,WACA,IAAAE,EAAAtB,KACA,GAAAsB,EAAAL,IAAA,CAKA,IAAA4D,EAAA,GACAvD,EAAAuD,UAAA/C,QAAA,SAAAC,GACA8C,GAAA,oCAAA9C,EAAAmC,MAAA,iBAAAnC,EAAAW,KAAA,4CAAApB,EAAAH,KAAAwD,UAAA5C,EAAAgD,QAAA,kBAEAzD,EAAAL,IAAA8H,krGA6BgElE,m5HA+BtC,GAAAvD,EAAAH,KAAAhF,KAAA,u5CAW1BmF,EAAA6B,KAAA,IAAAnC,EAAAM,EAAAL,IAAAK,EAAAH,MACAG,EAAA0H,IAAA1H,EAAAL,IAAAe,cAAA,gBAAAiH,UAAApF,QAAA,kEAAAA,QAAA,uDAAAA,QAAA,aACAvC,EAAAsF,QACAxD,OAAA9B,EAAA6B,KAAAC,OAAA5G,KAAA8E,GACAuB,MAAAvB,EAAA6B,KAAAN,MAAArG,KAAA8E,GACA4H,SAAA5H,EAAA4H,SAAA1M,KAAA8E,GACAwE,KAAAxE,EAAAwE,KAAAtJ,KAAA8E,GACA6H,aAAA7H,EAAA6H,aAAA3M,KAAA8E,GACAa,OAAAb,EAAAa,OAAA3F,KAAA8E,GACA8H,KAAA9H,EAAA8H,KAAA5M,KAAA8E,GACAiD,OAAAjD,EAAAiD,OAAA/H,KAAA8E,GACA+H,OAAA/H,EAAA+H,OAAA7M,KAAA8E,GACAgI,OAAAhI,EAAAgI,OAAA9M,KAAA8E,GACAiI,KAAAjI,EAAAiI,KAAA/M,KAAA8E,GACAkI,QAAAlI,EAAAkI,QAAAhN,KAAA8E,GACAmI,UAAAnI,EAAAmI,UAAAjN,KAAA8E,GACAoI,MAAApI,EAAAoI,MAAAlN,KAAA8E,GACAqI,MAAArI,EAAAqI,MACAC,MAAAtI,EAAAsI,MAAApN,KAAA8E,GACAuI,WAAAvI,EAAAuI,WAAArN,KAAA8E,IAGA,IAAAwI,EAAAxI,EAAAL,IAAAe,cAAA,YAqBA,OApBA8H,EAAArJ,GAAA,gCAAAa,EAAAsF,OAAA+C,OACAG,EAAArJ,GAAA,iCAAAa,EAAAsF,OAAA+C,OACAG,EAAArJ,GAAA,iCAAAa,EAAAsF,OAAAgD,OACAE,EAAArJ,GAAA,iCAAAa,EAAAsF,OAAA4C,SACAM,EAAArJ,GAAA,mCAAAa,EAAAsF,OAAA6C,WACAK,EAAArJ,GAAA,4BAAAa,EAAAsF,OAAA0C,QACAQ,EAAArJ,GAAA,6BAAAa,EAAAsF,OAAA0C,QACAQ,EAAArJ,GAAA,+BAAAa,EAAAsF,OAAAd,MACAgE,EAAArJ,GAAA,8BAAAa,EAAAsF,OAAA/D,OACAiH,EAAArJ,GAAA,gCAAAa,EAAAsF,OAAAyC,QACAS,EAAArJ,GAAA,yBAAAa,EAAAsF,OAAA8C,OACAI,EAAArJ,GAAA,gBAAAa,EAAAsF,OAAAxD,QACA0G,EAAArJ,GAAA,8BAAAa,EAAAsF,OAAAwC,MACAU,EAAArJ,GAAA,+BAAAa,EAAAsF,OAAAwC,MACAU,EAAArJ,GAAA,+BAAAa,EAAAsF,OAAA2C,MACAO,EAAArJ,GAAA,8BAAAa,EAAAsF,OAAA2C,MACAO,EAAArJ,GAAA,kCAAAa,EAAAsF,OAAAiD,YACAC,EAAArJ,GAAA,4BAAAa,EAAAsF,OAAAsC,UACAY,EAAArJ,GAAA,yBAAAa,EAAAsF,OAAAuC,cAEA7H,EAAAH,KAAAhF,MACA,OACAmF,EAAAyI,SACA,MACA,OACAzI,EAAA0I,UACA,MACA,OACA1I,EAAA0I,UACA1I,EAAAyI,SACA,MACA,QACAzI,EAAAyI,YAMAzG,EAAA1G,UAAA2H,OAAA,WACA,IAAAjD,EAAAtB,KACA,UAAAsB,EAAA6D,KAAAC,SACA9D,EAAA6D,KAAAC,QAAA,UACA9D,EAAAL,IAAAe,cAAA,YAAAwE,MAAAC,QAAA,QACAnF,EAAAL,IAAAe,cAAA,kBAAAwE,MAAAC,QAAA,QAEAnF,EAAAyI,UAKAzG,EAAA1G,UAAAmN,OAAA,WACA,IAAAzI,EAAAtB,KACAsB,EAAAL,IAAAe,cAAA,sBAAAI,QAAA6H,KACA,GAAA3I,EAAAH,KAAAsC,MAAAC,SAAAC,OAKA,OAJAwD,QAAA+C,IAAA,4BACA,GAAA5I,EAAAH,KAAAhF,MACAmF,EAAA0I,WAIA,GAAA1I,EAAA6D,KAAAe,aAwCA5E,EAAA6D,KAAAC,QAAA,SACA9D,EAAAL,IAAAe,cAAA,YAAAwE,MAAAC,QAAA,OACAnF,EAAAL,IAAAe,cAAA,kBAAAwE,MAAAC,QAAA,YA1CA,CACA,gBAEA,IAAA1J,EAAAzB,EAAA6O,cAAA,UACApN,EAAAQ,IAAA,KAAA+D,EAAAH,KAAAiJ,MAAA,uBACArN,EAAAqF,QAAAiI,UAAA1B,KAAA2B,MACAvN,EAAAwN,OAAA,WACAjJ,EAAA6D,KAAAe,cAAA,EACA,wBAEAnJ,EAAA6B,QAAA,WACA,GAAA0C,EAAAH,KAAAhF,OACA,iBACAmF,EAAA0I,YAIA,IAAA5L,EAAA,IAAAC,eACAD,EAAAE,KAAA,uCAAAqK,KAAA2B,OAAA,GACAlM,EAAAkG,QAAAhD,EAAAH,KAAAmD,QACAlG,EAAAI,mBAAA,WACA,GAAAJ,EAAAK,YAAA,KAAAL,EAAAM,SACApD,EAAAkP,MAAAlP,EAAAmP,MAAAC,YAAA3N,IAGAqB,EAAAuM,UAAA,WACAvM,EAAAwM,QACA,GAAAtJ,EAAAH,KAAAhF,OACA,iBACAmF,EAAA0I,YAGA5L,EAAAQ,QAAA,WACA,GAAA0C,EAAAH,KAAAhF,OACA,iBACAmF,EAAA0I,YAGA5L,EAAAU,SASAwE,EAAA1G,UAAAiO,YAAA,SAAAC,EAAAC,EAAAC,GACA,IACAC,EADAjL,KACAiB,IAAAY,uBAAAiJ,MACAhJ,QAAA3G,KAAA8P,EAAA,SAAAlJ,GACAA,EAAAnB,iBAAAmK,EAAAC,GAAA,MAKA1H,EAAA1G,UAAAmJ,MAAA,WACA,IACAmF,EAAA5P,EAAA4E,iBAAA,qBACAiL,EAAAD,EAAA5N,OACA,GAAA6N,EAAA,GAEA,IADA,IAAAC,KACApQ,EAAA,EAA2BA,EAAAmQ,EAASnQ,IACpCoQ,EAAApQ,GAAAkQ,EAAAlQ,GAAAoH,QAAAiJ,UAAAxH,QANA7D,KAMAmB,KAAAsC,KAAA,IAEAzF,EARAgC,KASAmB,KAAAmB,IAAA,oBAAA8I,EAAA7L,KAAA,KACA,SAAAgD,GACAC,KAAAC,MAAAF,GACAK,SACAd,QAAA,SAAAC,GACA,IAAAkC,EAAA/G,SAAAiN,cAAA,KACAlG,EAAAqH,KAAAvJ,EAAAkC,KACA,IAAAsH,EAAAtH,EAAAqH,KAAAzH,QAAAI,EAAAN,OAAA,IACAsH,EAAA3P,EAAA0G,cAAA,sBAAAuJ,EAAA,MACAN,IACAA,EAAAlC,UAAAhH,EAAAyJ,MACAP,EAAA7I,QAAAqJ,YAAA1J,EAAAyJ,UAGiB,WACjBrE,QAAA+C,IAAA,eAOA5G,EAAA1G,UAAA8O,YAAA,WACA,IAAApK,EAAAtB,KACA,GAAAsB,EAAA8I,MAAAuB,SAAAC,yBAAAtK,EAAA6D,KAAA0G,eAGA7N,EACAsD,EAAAH,KAAAmB,IAAA,QAAAhB,EAAAH,KAAAuD,YAAA,eAAApD,EAAA6D,KAAAM,OAAAwB,GACA,SAAA1E,GACA,IAAAvD,EAAAwD,KAAAC,MAAAF,GACA,MAAAvD,EAAA0D,KAAA,CACApB,EAAA6D,KAAA0G,eAAA,EACA,IACAC,EAAA,GADA9M,EAAA4D,SAEAd,QAAA,SAAAC,GACAA,EAAAgK,QAAAC,YAAAjK,EAAAgK,QAAAC,YAAAnI,QAAA,uBACA9B,EAAAgK,QAAAC,YAAA1O,QAAA,KACAyE,EAAAgK,QAAAC,YAAAjK,EAAAgK,QAAAC,YAAAvO,UAAA,aAEAqO,kIAEqE/J,EAAAkC,gBAAqBlC,EAAAmC,gFACpBnC,EAAAmC,mFACDnC,EAAAyJ,2IACezJ,EAAAkK,4KAGflK,EAAAkC,iBAAsBlC,EAAAgK,QAAA9E,cAA2BlF,EAAAgK,QAAAC,wNAG9DjK,EAAAgK,QAAAtK,oNAGsBM,EAAAgK,QAAAxQ,gJAEGwG,EAAAgK,QAAAC,4LAMjFF,iFAA6GxK,EAAA8I,MAAA7O,qFAA6FuQ,eAC1MxK,EAAAL,IAAAe,cAAA,oBAAA+G,UAAA+C,EACAxK,EAAA+F,YAEa,WACbF,QAAA+C,IAAA,cAMA5G,EAAA1G,UAAAsP,cAAA,WACAlM,KACAoK,MAAAuB,SAAAQ,wBAOA7I,EAAA1G,UAAAoN,QAAA,WACA,IAAA1I,EAAAtB,KACAsB,EAAA6D,KAAAG,SAAA,EACAhE,EAAAL,IAAAe,cAAA,YAAAwE,MAAAC,QAAA,QACAnF,EAAAL,IAAAe,cAAA,kBAAAwE,MAAAC,QAAA,OACAzI,EACAsD,EAAAH,KAAAmB,IAAA,0BAAAhB,EAAAH,KAAA6C,WAAA,SAAA1C,EAAAH,KAAAlD,KAAAqD,EAAA6D,KAAAO,KAAA,WAAApE,EAAA6D,KAAAO,KAAA,IACA,SAAAnD,GACA,IAAAvD,EAAAwD,KAAAC,MAAAF,GACA,OAAAvD,EAAA0D,KAAA,CACApB,EAAA6D,KAAAK,UAAAlK,EAAA8Q,gBAAAC,WAAA/Q,EAAAmP,KAAA4B,UACA/K,EAAA6D,KAAAM,OAAAzG,EAAAyG,OACAnE,EAAA6D,KAAAmH,MAAAtN,EAAAuN,OAAAD,MACAhL,EAAA8I,MAAApL,EAAAoL,MACA9I,EAAAH,KAAAM,OAAAH,EAAA8I,MAAA3I,OACAH,EAAAL,IAAAe,cAAA,yBAAAI,QAAAX,OAAAH,EAAA8I,MAAA3I,OACA,SAAAH,EAAA6B,KAAAxB,YACAL,EAAAL,IAAAe,cAAA,yBAAAzE,IAAA+D,EAAA8I,MAAA3I,QAEAH,EAAAH,KAAAqL,MAAAlL,EAAA8I,MAAAqC,mBACAnL,EAAAL,IAAAe,cAAA,YAAAC,UAAAE,OAAA,WACAb,EAAAL,IAAAe,cAAA,iBAAAsJ,KAAAtM,EAAAiF,KACA3C,EAAAL,IAAAe,cAAA,kBAAA+G,UAAAzH,EAAA6D,KAAAmH,MAAA,OACA,IAAAI,EAAApL,EAAAL,IAAAe,cAAA,qBACAwJ,EAAAxM,EAAA4D,SAAA5D,EAAA4D,YA0BA,GAzBAtB,EAAA6D,KAAA7K,QACAkR,EAAA1J,QAAA,SAAAC,GACAT,EAAAqL,KAAA5K,GACAA,EAAA6K,QACAtL,EAAA6D,KAAA7K,KAAAuS,QAAA9K,EAAAkF,MAIAjI,EAAAuN,OAAAO,SACAxL,EAAA6D,KAAA7K,KAAAwH,QAAA,SAAAC,GACAT,EAAAL,IAAAe,cAAA,iBAAA0I,YAAApJ,EAAAL,IAAAe,cAAA,YAAAD,MAGA/C,EAAAuN,OAAAQ,SACAzL,EAAA6D,KAAAO,KAAA1G,EAAAuN,OAAA7G,KACAgH,EAAAzK,UAAAE,OAAA,aAEAb,EAAA6D,KAAAO,KAAA,KACAgH,EAAAzK,UAAAC,IAAA,SAGAZ,EAAAoK,cACApK,EAAA4K,gBACA5K,EAAA+F,UAEA,GAAAmE,EAAAlO,OACA,OAGA,IAAA0P,EAAA1L,EAAAL,IAAAf,iBAAA,6BAUA,MATA4B,QAAA3G,KAAA6R,EAAA,SAAAjL,GACAA,EAAAyE,MAAAyG,MAAAlL,EAAAmL,YAAA,KACAnL,EAAAyE,MAAA2G,OAAA,EAAApL,EAAAmL,YAAA,QACAhG,WAAA,WACAC,QAAA+C,IAAAnI,EAAAqL,eACArL,EAAAxE,IAAAwE,EAAAxE,KACyB,OAEzB+D,EAAAL,IAAAf,iBAAA,qCACA5C,OAAA,GACA,IAAAkN,EAAAtN,SAAAmQ,qBAAA,WACAC,EAAApQ,SAAAiN,cAAA,UACAmD,EAAA5L,KAAA,kBACA4L,EAAA/P,IAAA,oCACAiN,EAAAE,YAAA4C,GAKA,GAFA1S,OAAA2S,SAAA,EAAAjM,EAAA6D,KAAAK,WAEA,sBAAAgI,KAAA9J,SAAA+J,QAAAzO,EAAAuN,OAAAO,UAAAxL,EAAA6D,KAAAe,eAAA5E,EAAA6D,KAAAE,OAAA,CACA,IAAA4F,EAAA3J,EAAAL,IAAAe,cAAA,YAAA0B,SAAA+J,MACAxC,GACArQ,OAAA8S,SAAA,EAAAzC,EAAA0C,wBAAAC,KAGAtM,EAAA6D,KAAAG,SAAA,EACAhE,EAAA6D,KAAAE,QAAA,OACiB,IAAArG,EAAA0D,MACjBpB,EAAAuM,cAEa,WACbC,MAAA,uBAMAxK,EAAA1G,UAAA+P,KAAA,SAAA7G,GAEA,IAAAxE,EAAAtB,KAEAsB,EAAA6D,KAAAW,OAAAmB,IAAAnB,EAEA,IAAAiI,EAAAzM,EAAAL,IAAAe,cAAA,0BAAA8D,EAAA8G,OAAA,MAEAzJ,GACA6K,SAAAlI,EAAAkI,SACAzS,KAAAuK,EAAAvK,KACAkG,OAAAqE,EAAArE,QAEAqE,EAAAkI,WAAuF,GAAvF1M,EAAA6D,KAAAa,MAAA3G,IAAA,SAAA8D,GAA+D,OAAAA,EAAA6K,WAAwBnQ,QAAAiI,EAAAkI,WACvF1M,EAAA6D,KAAAa,MAAAO,KAAApD,GAGA,IAAA8K,EAAAnI,EAAA8G,QACArR,mDAAgEuK,EAAA8G,kBAAuBmB,EAAA9G,8TAA4U8G,EAAA3L,QAAA7G,WACna0F,IAAA8M,EAAA/L,cAAA,0BACAkM,OAAA,eAEA3S,KAAA,GACA0F,IAAAK,EAAAL,IAAAe,cAAA,iBACAkM,OAAA,WAAApI,EAAAmB,IAAAnB,EAAAqI,OAAA,0BAIAC,uCAAwDtI,EAAAmB,kBAAyBnB,EAAAvK,qBAA4BuK,EAAAmB,wGAErDnB,EAAAmB,iBAAwBnB,EAAArE,uIAEDqE,EAAAvK,8CAAqDuK,EAAA7H,KAAA,mBAAiC6H,EAAAvK,WAAkBuK,EAAAuI,0CAAmD/M,EAAAH,KAAAqL,eAAa,KAAiByB,EAAA1S,6FAA0GuK,EAAAmG,uEACtUnG,EAAAH,2DACDG,EAAAqI,OAAA,oPAAuM,yJAwBlP,GAlBArI,EAAAwI,YACAF,uCAAwDtI,EAAAmB,mBAA0BnB,EAAAmB,kBAAyBnB,EAAAvK,kHAE/CuK,EAAAmB,iBAAwBnB,EAAArE,yKAQpFH,EAAAL,IAAAe,cAAA,0BAAA8D,EAAAmB,GAAA,MACA3F,EAAAL,IAAAe,cAAA,0BAAA8D,EAAAmB,GAAA,MAAAgC,UAAAmF,EAEAH,EAAAhN,IAAAsN,mBAAAN,EAAAC,OAAAE,GAIAtI,EAAAqI,SAAA7M,EAAA6D,KAAAI,QAAA,CACA,IAAAsD,EAAAvH,EAAAL,IAAAe,cAAA,0BAAA8D,EAAAmB,GAAA,MAEAuH,EAAAtH,WAAA,WAEA2B,EAAA7G,cAAA,0BACA6G,EAAA7G,cAAA,wBAAAiH,UAAA,KAEa,KAGbJ,EAAA7G,cAAA,wBAAApB,iBAAA,iBAAAC,GACA,IAAAmG,GACAC,GAAAnB,EAAAmB,GACAjD,WAAA1C,EAAAH,KAAA6C,YAEAnD,EAAA4N,cACA1F,UAAA,MACAhK,EAAAuC,EAAAH,KAAAmB,IAAA,qBAAA0E,EAAA,SAAAzE,GACA,IAAAvD,EAAAwD,KAAAC,MAAAF,GACA,IAAAvD,EAAA0D,KACA,GAAA1D,EAAA4D,SAAA0L,UACAzF,EAAAI,UAAA,IAEA6E,MAAA9O,EAAA4D,SAAA+C,SACAkD,EAAA7G,cAAA,wBAAAiH,UAAA,IAEqB,IAAAjK,EAAA0D,OACrBoL,MAAA9O,EAAA4D,UACAiG,EAAA7G,cAAA,wBAAAiH,UAAA,KAEiB,WACjB6E,MAAA,gBAEAY,aAAAF,KACa,GAGb3F,EAAA7G,cAAA,sBAAApB,iBAAA,mBACAU,EAAA6D,KAAAI,QAAAO,EACAxE,EAAAqN,KAAA7I,KACa,KAKbxC,EAAA1G,UAAAsM,SAAA,SAAArI,EAAAC,GACA,IAAAQ,EAAAtB,KACAsB,EAAA6D,KAAAK,UAAAlK,EAAA8Q,gBAAAC,WAAA/Q,EAAAmP,KAAA4B,UACA/K,EAAA6D,KAAAG,UACAxE,EAAAmB,UAAAC,IAAA,WACAZ,EAAA0I,YAKA1G,EAAA1G,UAAA+M,MAAA,SAAA9I,EAAAC,GACA,IAAA8N,EAAA9N,EAAAT,QAAA,yBACAuO,EAAA3M,UAAAC,IAAA,WACA0M,EAAA3M,UAAA4M,SAAA,SACAD,EAAA3M,UAAAE,OAAA,SAEAyM,EAAA3M,UAAAC,IAAA,UAKAoB,EAAA1G,UAAAgN,MAAA,SAAA/I,EAAAC,GACA,IAAAQ,EAAAtB,KACA8O,EAAAhO,EAAAT,QAAA,iBACAyO,EAAA9M,cAAA,uBACA+G,UAAA,GACA,IAAA6F,EAAAE,EAAA9M,cAAA,yBAEA+M,EADAjO,EAAA7E,MAAA4H,QAAA,yBACAmL,MAAA,4PACAF,EAAA9M,cAAA,uBAAA+G,UAAA,GACAgG,EACAA,EAAAjN,QAAA,SAAAC,EAAA/G,GACA+G,IAAA8B,QAAA,uBACA,IAAAoL,EAAA3N,EAAA6D,KAAAU,MAAA9D,GACA,GAAAkN,EAAA,CACA,IAAAC,oDAAsFD,EAAAE,8DAAoEF,EAAAE,sBAG1J,OAFAL,EAAA9M,cAAA,uBAAAuM,mBAAA,YAAAW,QACAN,EAAA3M,UAAAC,IAAA,YAGAnD,EAAAuC,EAAAH,KAAAmB,IAAA,cAAsDrE,IAAA8D,GAAU,SAAAQ,GAChE,IAAAvD,EAAAwD,KAAAC,MAAAF,GACA,MAAAvD,EAAA0D,KAAA,CAEA,IAAAwM,qDADAD,EAAAjQ,EAAA4D,UAC0FuM,8DAAoEF,EAAAE,sBAC9JL,EAAA9M,cAAA,uBAAAuM,mBAAA,YAAAW,GACA5N,EAAA6D,KAAAU,MAAA9D,GAAAkN,EACAL,EAAA3M,UAAAC,IAAA,cAEiB,gBAIjB0M,EAAA3M,UAAAE,OAAA,aAMAmB,EAAA1G,UAAA4M,QAAA,SAAA3I,EAAAC,GACA,IAAAQ,EAAAtB,KACAoP,EAAAtO,EACAuO,EAAAD,EAAAE,eACAC,EAAAH,EAAAnT,MAAAuH,MAAA,EAAA6L,GAAA3R,YAAA,KACA8R,EAAAJ,EAAAnT,MAAAuH,MAAA+L,EAAAF,GACAI,EAAAnO,EAAAL,IAAAe,cAAA,iBACA0N,EAAApO,EAAA6D,KAAAa,MAAA7G,OAAA,SAAAgE,GACA,IAAAwM,EAAA,IAAAC,OAAAJ,EAAAhM,MAAA,QACA,OAAAL,EAAA6K,SAAAjK,OAAA4L,IAAA,IAEA,MAAAH,EAAAzL,OAAA,eAAA2L,EAAApS,OAAA,GACA,OAAAuD,EAAAgP,SAAA,IAAAhP,EAAAgP,QACA,OAEA,IAAAC,EAAAxO,EAAAyO,cAAAX,GACAY,EAAA,GAAA5B,EAAA,GAEAsB,EAAA5N,QAAA,SAAAC,EAAA/G,GACAgV,kCAAuD,GAAAhV,EAAA,gCAA6C+G,EAAAiM,mDAA0DjM,EAAAN,8CAAqDM,EAAAiM,gDAAuDjM,EAAAxG,oBAE1QkU,GACAA,EAAA1G,UAAA,iCAAAiH,EAAA,QACAP,EAAAjJ,MAAAyJ,KAAAH,EAAAG,KAAA,KACAR,EAAAjJ,MAAAoH,IAAAkC,EAAAlC,IAAA,OAEAQ,2CAAgE0B,EAAAG,cAAsBH,EAAAlC,wCAAgDoC,eACtI1O,EAAAL,IAAAe,cAAA,YAAAuM,mBAAA,YAAAH,IAIA9M,EAAAuJ,YAAA,2CACAvJ,EAAAL,IAAAe,cAAA,6BAAAC,UAAAE,OAAA,UACAnC,KAAAiC,UAAAC,IAAA,YAIAZ,EAAAuJ,YAAA,uCACA,IAAAmD,EAAA,IAAAhO,KAAAoC,QAAA4L,SAAA,IACAoB,EAAAnT,MAAAmT,EAAAnT,MAAAuH,MAAA,EAAA+L,GAAAvB,EAAAoB,EAAAnT,MAAAuH,MAAA6L,GACAI,EAAAxG,UAAA,GACAmG,EAAAzF,QACAyF,EAAAc,kBAAAX,EAAAvB,EAAA1Q,OAAAiS,EAAAvB,EAAA1Q,eAESmS,IACTA,EAAAxG,UAAA,KAKA3F,EAAA1G,UAAAmT,cAAA,SAAAX,GACA,IACAe,EAAAf,EAAAgB,aACAC,EAAA/U,EAAA6O,cAAA,OACAmG,EAAAhV,EAAA6O,cAAA,QACAoG,EAAAC,iBAAApB,MACAtN,QAAA3G,KAAAoV,EAAA,SAAAE,GACAJ,EAAA7J,MAAAiK,GAAAF,EAAAE,KAEAJ,EAAA7J,MAAAkK,SAAA,WARA1Q,KASAiB,IAAAyJ,YAAA2F,GACAA,EAAAM,YAAAvB,EAAAnT,MAAA2U,OAAA,EAAAT,GACAG,EAAAK,YAAAvB,EAAAnT,MAAA2U,OAAAT,IAAA,IACAE,EAAA3F,YAAA4F,GACA,IAAAO,GACAjD,IAAAwB,EAAA5J,UAAA4J,EAAA/C,UAAAiE,EAAA9K,UAAAsL,WAAAP,EAAAQ,YACAd,KAAAb,EAAA4B,WAAA5B,EAAA6B,WAAAX,EAAAU,YAGA,OAlBAhR,KAiBAiB,IAAAiQ,YAAAb,GACAQ,GAIAvN,EAAA1G,UAAA6M,UAAA,SAAA5I,EAAAC,GACA,IAAAQ,EAAAtB,KACAoP,EAAAtO,EACAuO,EAAAD,EAAAE,eACAC,EAAAH,EAAAnT,MAAAuH,MAAA,EAAA6L,GAAA3R,YAAA,KACA0R,EAAAnT,MAAAuH,MAAA+L,EAAAF,GAEA,GADA/N,EAAAL,IAAAe,cAAA,iBACA,CAGA,IAAAoD,EAAA9D,EAAAL,IAAAe,cAAA,6BACA,OAAAnB,EAAAgP,SACA,QAEA,IAAA7B,EAAA,IAAA5I,EAAAhD,QAAA4L,SAAA,IACAoB,EAAAnT,MAAAmT,EAAAnT,MAAAuH,MAAA,EAAA+L,GAAAvB,EAAAoB,EAAAnT,MAAAuH,MAAA6L,GACAD,EAAAc,kBAAAX,EAAAvB,EAAA1Q,OAAAiS,EAAAvB,EAAA1Q,QACAgE,EAAAL,IAAAe,cAAA,iBAAAiH,UAAA,GACApI,EAAAsQ,iBACA,MACA,QAEA/L,EAAAgM,kBACAhM,EAAAgM,gBAAAnP,UAAAC,IAAA,UACAkD,EAAAnD,UAAAE,OAAA,WAEAtB,EAAAsQ,iBACA,MACA,QAEA/L,EAAAiM,cACAjM,EAAAiM,YAAApP,UAAAC,IAAA,UACAkD,EAAAnD,UAAAE,OAAA,WAEAtB,EAAAsQ,oBAQA7N,EAAA1G,UAAA2M,KAAA,SAAA1I,EAAAC,GACA,IACA2M,EA3kCA,SAAAnC,GACA,IAAArH,EAAA3I,EAAA6O,cAAA,KAEA,OADAlG,EAAAqH,OACArH,EAwkCAqN,CAAAxQ,EAAAwK,MAAAmC,KACAxC,EAFAjL,KAEAiB,IAAAe,cAAA,YAAAyL,GACA8D,QAAAC,kBAAAC,SAAAhE,GACA7S,OAAA8S,SAAA,EAAAzC,EAAA0C,wBAAAC,KACA/M,EAAAsQ,kBAIA7N,EAAA1G,UAAAiN,WAAA,SAAAhJ,EAAAC,GAEA,IAAAA,EAAAkB,cAAA,yBAGA,IAAA8E,EAJA9G,KAIAmF,KAAAW,KAAAhF,EAAAsB,QAAAwK,QACA,IAAA9F,EAAAwH,UAAA,CAGA,IAAA3I,EAAAmB,EAAAnB,QAAA9B,QAAA,eACA6N,mGAA0H5K,EAAArF,iFAAyFqF,EAAAvL,uDAA+DoK,MAAcA,sBAChS7E,EAAAyN,mBAAA,YAAAmD,MAIApO,EAAA1G,UAAA8M,MAAA,SAAA7I,EAAAC,GACA,IACAiB,EAAAjB,EAEAsO,EADArN,EAAA1B,QAAA,iBACA2B,cAAA,0BAHAhC,KAIA2R,WAAAvC,EAAArN,EAAAK,QAAAM,OAIAY,EAAA1G,UAAAwM,KAAA,SAAAvI,EAAAC,GACA,IAAAQ,EAAAtB,KAEA6I,EAAA/H,EACAiB,EAAA8G,EAAAxI,QAAA,iBAGA2I,EAAA1H,EAAAL,IAAAe,cAAA,qDACA,GAAAgH,EAAA,CACA,IACA4I,EADA5I,EAAA3I,QAAA,iBACA2B,cAAA,wBACA4P,EAAA3I,UAAA2I,EAAA3I,UAAApF,QAAA,kBACAmF,EAAAC,UAAA,GAIA,yBAAAJ,EAAAgJ,UAAA,CACAhJ,EAAAI,UAAAJ,EAAAI,UAAApF,QAAA,kBACA,IAAAiO,EAAAxQ,EAAA0H,IAAAnF,QAAA,8BAAA9B,EAAAK,QAAA6E,IAAApD,QAAA,gCAAA9B,EAAAK,QAAA6E,IACAlF,EAAAC,cAAA,0BAAAuM,mBAAA,cAAAuD,GACAxQ,EAAA6B,KAAA/B,OAEAW,EAAAC,cAAA,0BAAA2H,UAMArG,EAAA1G,UAAA0M,OAAA,SAAAzI,EAAAC,GACA,IAAAQ,EAAAtB,KACA6I,EAAA/H,EACAkI,EAAAH,EAAAxI,QAAA,gBACA0R,EAAA/I,EAAAhH,cAAA,yBACAgQ,EAAAhJ,EAAAhH,cAAA,sBACAiQ,EAAAjJ,EAAAhH,cAAA,uBACAgH,EAAAhH,cAAA,uBACA,IAAAiQ,EAAAhW,OAGA+B,EACAsD,EAAAH,KAAAmB,IAAA,0BAAA2P,EAAAhW,MAAA,SAAA+V,EAAA/V,MACA,SAAAsG,GACA,IAAAvD,EAAAwD,KAAAC,MAAAF,GACAvD,EAAAkT,SAAArJ,GAAAoJ,GACA3Q,EAAA6Q,UAAA,eAAAF,GAEA,IAAAD,EAAA/V,QACA8V,EAAAxU,IAAAyB,EAAAoT,WAEa,eAMb9O,EAAA1G,UAAA+U,WAAA,SAAAvC,EAAAiD,GACA,IACAhD,EAAAD,EAAAE,eACA+C,EAAA,GAAAhD,EAAAgD,EAAA,QAAAA,EAAA,IACAjD,EAAAnT,MAAAmT,EAAAnT,MAAAuH,MAAA,EAAA6L,GAAAgD,EAAAjD,EAAAnT,MAAAuH,MAAA6L,GACAD,EAAAzF,QACAyF,EAAAc,kBAAAb,EAAAgD,EAAA/U,OAAA+R,EAAAgD,EAAA/U,SAIAgG,EAAA1G,UAAAyM,OAAA,SAAAxI,EAAAC,GACA,IAAAQ,EAAAtB,KACAsS,EAAAxR,EACAgO,EAAAwD,EAAAjS,QAAA,iBACAkS,EAAAzD,EAAA9M,cAAA,2BACAqD,EAAAyJ,EAAA9M,cAAA,yBACA4M,EAAAE,EAAA9M,cAAA,yBACAwQ,EAAA1D,EAAA9M,cAAA,uBAEA,GADAwQ,EAAAzJ,UAAA,GACA,IAAAuJ,EAAAG,MAAAnV,OAAA,CAKA,IAAAoV,EAAAJ,EAAAG,MAAA,GAAAC,KAEA,GAAAA,EAAA,IAKA,OAJAF,EAAAzJ,UAAA,oBACA7B,WAAA,WACAsL,EAAAzJ,UAAA,IACa,KAIb,OAAAzH,EAAA6D,KAAAc,UAAApI,QAAA6U,GAOA,OAJAF,EAAAzJ,UAAA,mBACA7B,WAAA,WACAsL,EAAAzJ,UAAA,IACa,KALbwJ,EAAA/L,MAAAyG,MAAA,OAUA2B,EAAA3M,UAAAC,IAAA,YAGA,IAAAlD,EAAA,IAAA2T,SACA3T,EAAA4T,OAAA,OAAAN,EAAAG,MAAA,IACA,IAEAI,EAFAC,EAAAR,EAAAG,MAAA,GAAAlX,KAIAwX,EAAA,IAAA1U,eACA0U,EAAAlU,iBAAA,EACAkU,EAAAvU,mBAAA,WACA,MAAAuU,EAAAtU,YAAA,KAAAsU,EAAArU,OAAA,CACA,IAAAM,EAAAwD,KAAAC,MAAAsQ,EAAApU,cACA,MAAAK,EAAA0D,KAAA,CACApB,EAAA6D,KAAAc,UAAAM,KAAAmM,GACA,IAAAM,EAAAhU,EAAA4D,SAAAkQ,GAAA7U,IACAmR,EAAAN,EAAA9M,cAAA,0BACAV,EAAAqQ,WAAAvC,EAAA4D,GAEA,IAAA/D,EAAA,IAAAgE,MACAhE,EAAA1R,IAAAyV,EACA/D,EAAA1E,OAAA,WACAsI,EAAA9J,UAAA,0CAAAiK,EAAA,KACAH,EAAAzQ,QAAA4Q,WACAH,EAAA5Q,UAAAE,OAAA,iBAGAqQ,EAAAzJ,UAAA,UACA8J,EAAA9J,UAAA,GACA+F,EAAAjN,uBAAA,sBAAAvE,QACAsR,EAAA3M,UAAAE,OAAA,YAEA+E,WAAA,WACAsL,EAAAzJ,UAAA,IACqB,OAIrBgK,EAAA1J,OAAAzI,iBAAA,oBAAAC,GACAwE,EAAAmB,MAAAyG,MAAA1E,KAAA2K,KAAArS,EAAAwE,OAAAxE,EAAAyL,MAAA,WACS,GACTyG,EAAA1J,OAAAzI,iBAAA,gBAAAC,GACAwE,EAAAmB,MAAAyG,MAAA,EACAsF,EAAA/L,MAAAyG,MAAA,EACA,IAAAkG,6DAAuFT,s1DAmBvF5D,EAAA9M,cAAA,uBAAAuM,mBAAA,YAAA4E,GACAN,EAAA/D,EAAA9M,cAAA,qBAAA0Q,EAAA,QACS,GACTK,EAAAzU,KAAA,OAAAgD,EAAAH,KAAAmB,IAAA,kBACAyQ,EAAAjU,KAAAE,KAIAsE,EAAA1G,UAAAuF,OAAA,SAAAtB,GACA,IAAAS,EAAAtB,KACA6S,EAAAhS,EAAA4N,cAAApO,QAAA,uBACAuO,EAAA/N,EAAA4N,cAAApO,QAAA,yBACAwS,EAAA5J,UAAA,GACA3H,EAAA6D,KAAAc,aACA,IAAAmN,EAAAxE,EAAA/M,uBAAA,yBACAC,QAAA3G,KAAAiY,EAAA,SAAArR,EAAA/G,GACAsG,EAAA6D,KAAAc,UAAAjL,GAAA+G,EAAAK,QAAA6D,YAEA,GAAA3E,EAAA6D,KAAAc,UAAA3I,QACAsR,EAAA3M,UAAAE,OAAA,YAEAyM,EAAA5M,cAAA,wBAAA/F,MAAA,IAIAqH,EAAA1G,UAAAuV,UAAA,SAAAkB,EAAAC,GACA,IAAAhS,EAAAtB,KACA,QAAAsB,EAAA6B,KAAAxB,WACAL,EAAAsF,OAAAxD,SAEA,IAAAmQ,EAAAjS,EAAAL,IAAAe,cAAA,YACAwR,EAAAlS,EAAAL,IAAAe,cAAA,uBACAwR,IACAA,EAAAvK,UAAA,IAEA,IAEAwK,EAAA,8CAFAH,EAAA9N,UAEA,WADA8N,EAAAtC,WAC8E,QAAgBqC,EAAA,SAC9FE,EAAAhF,mBAAA,YAAAkF,GACAvM,WAAA,WACA,IAAAsM,EAAAlS,EAAAL,IAAAe,cAAA,uBACAwR,IACAA,EAAAvK,UAAA,KAES,MAIT3F,EAAA1G,UAAAkJ,KAAA,SAAAjF,EAAAC,GACA,IAAAQ,EAAAtB,KACA+B,EAAAjB,EAAAT,QAAA,kCAAAS,EAAAT,QAAA,kBAAAS,EAAAT,QAAA,gBACAsF,EAAA5D,EAAAC,cAAA,0BAAA/F,MACAyX,EAAA3R,EAAAK,QAAA6E,GAAAlF,EAAAK,QAAA6E,GAAA,GACAlF,EAAAF,uBAAA,sBAGA,IAAAE,EAAAK,QAAAuR,UAAA,CACA,IAAAC,EAAA7R,EAAAC,cAAA,sBACA6R,EAAA9R,EAAAC,cAAA,uBACA8R,EAAA/R,EAAAC,cAAA,qBACAmB,GACA5H,KAAAqY,EAAA3X,MACAuF,MAAAqS,EAAA5X,MACAgC,IAAA6V,EAAA7X,MAAA4H,QAAA,UACApC,OAAAM,EAAAC,cAAA,yBAAAzE,IACAmE,KAAA,GAEA8Q,EAAAzQ,EAAAC,cAAA,uBACA+R,EAAA,WACA7M,WAAA,WACAsL,EAAAzJ,UAAA,IACiB,MAGjB,QAAAzH,EAAA6B,KAAAzB,KAAA,CACA,YAAA8L,KAAArK,EAAA5H,MAEA,YADA+F,EAAA6Q,UAAA,UAAAyB,GAGA,YAAApG,KAAArK,EAAA3B,OAEA,YADAF,EAAA6Q,UAAA,UAAA0B,GAGA,+CAA2DrG,KAAArK,EAAA3B,OAE3D,YADAF,EAAA6Q,UAAA,WAAA0B,GAGA,sGAAuDrG,KAAArK,EAAAlF,KAEvD,YADAqD,EAAA6Q,UAAA,WAAA2B,GAKA,GAFAxS,EAAA6B,KAAAR,OAAAQ,IAEA7B,EAAA6B,KAAA5H,OAAA+F,EAAA6B,KAAA3B,MACA,OAQA,GAJAF,EAAA6D,KAAAQ,SAAArE,EAAA6D,KAAAS,YACAtE,EAAA0H,IAAA1H,EAAAL,IAAAe,cAAA,gBAAAiH,UAAApF,QAAA,kEAAAA,QAAA,uDAAAA,QAAA,cAGA,SAAA2J,KAAA7H,GAGA,OAFA6M,EAAAzJ,UAAA,kBACAhH,EAAAC,cAAA,0BAAA2H,QAIA,IAAAqK,EAAArO,EAEArE,EAAAH,KAAA6D,cACAgP,IAAAnQ,QAAA,wBAAAmL,GACA,IAAAiF,EAAAjF,EAAAnL,QAAA,SAEA,OADAvC,EAAA4D,IAAA+O,gFAAwIA,YAAqB3S,EAAAH,KAAAwD,UAAArD,EAAA4D,IAAA+O,WAAoCjF,IAIjM1N,EAAAuD,UAAA/C,QAAA,SAAAC,GACAiS,IAAAnQ,YAAwD9B,EAAAW,6DAAmEpB,EAAAH,KAAAwD,UAAA5C,EAAAgD,qBAI3H,IAAAe,GACA7H,IAAAqD,EAAA6B,KAAAlF,IAAAqD,EAAA6B,KAAAlF,IAAA,GACAoQ,OAAA,EACAL,SAAA,KACAzS,KAAA+F,EAAA6B,KAAA5H,KACAkG,OAAAH,EAAA6B,KAAA1B,OACAwF,GAAA,UACA2F,OAAA8G,EACAzH,WAAA,IAAAtD,MAAAuL,SACAvO,QAAA,MAAAqO,EAAA,QAGA1S,EAAAqL,KAAA7G,GAEAxE,EAAA+F,UAGA/F,EAAA6D,KAAAQ,UACArE,EAAA6D,KAAAS,UAAA7D,EAAAC,cAAA,uBAAA+G,UAEA2K,EACA3R,EAAAC,cAAA,wBAAAmS,SAEApS,EAAAC,cAAA,0BAAA/F,MAAA,GACA8F,EAAAC,cAAA,uBAAA+G,UAAA,GACAhH,EAAAC,cAAA,yBAAAC,UAAAE,OAAA,uBAKA,IAAAiS,EAAAzO,EAAAqJ,MAAA,SACA,GAAAoF,IACAA,IAAAjV,OAAA,SAAAqK,GACA,OAAAlI,EAAA6D,KAAAa,MAAA3G,IAAA,SAAA8D,GAAwD,OAAAA,EAAA6K,WAAwBnQ,QAAA2L,EAAAhG,MAAA,UAEhFlG,OAAA,GACA,IAAAqS,EAAA,IAAAC,OAAA,IAAAwE,EAAA7U,KAAA,cACAoG,IAAA9B,QAAA8L,EAAA,aAMA,GAAA5N,EAAAK,QAAAuR,UAAA,CACA,IAAA3M,GACAC,GAAAlF,EAAAK,QAAAuR,UACAhO,WAEA5G,EAAAuC,EAAAH,KAAAmB,IAAA,qBAAA0E,EAAA,SAAAzE,GACA,IAAAvD,EAAAwD,KAAAC,MAAAF,GACA,OAAAvD,EAAA0D,KAAA,CACApB,EAAA6D,KAAAQ,QAAA,KACArE,EAAA6D,KAAAS,UAAA,KACA,IAAAE,EAAA9G,EAAA4D,SACAtB,EAAAqL,KAAA7G,GACAxE,EAAA+F,UACA/F,EAAA6D,KAAAI,SAAA,OAGAjE,EAAAqL,KAAArL,EAAA6D,KAAAI,SACAjE,EAAA+F,UACA/F,EAAA6D,KAAAI,SAAA,GAEa,WAEbjE,EAAAqL,KAAArL,EAAA6D,KAAAI,SACAjE,EAAA+F,UACA/F,EAAA6D,KAAAI,SAAA,QAES,CACTyB,GACAvB,OAAAnE,EAAA6D,KAAAM,OAAAwB,GACA2F,OAAA8G,EACA/N,UACApK,KAAA+F,EAAA6B,KAAA5H,KACAiG,MAAAF,EAAA6B,KAAA3B,MACAvD,IAAAqD,EAAA6B,KAAAlF,IACA+F,WAAA1C,EAAAH,KAAA6C,YAEAjF,EAAAuC,EAAAH,KAAAmB,IAAA,mBAAA0E,EAAA,SAAAzE,GACA,IAAAvD,EAAAwD,KAAAC,MAAAF,GACA,OAAAvD,EAAA0D,KAAA,CACApB,EAAAL,IAAAe,cAAA,oCAAAiH,UAAA,GACA3H,EAAA6D,KAAAmH,OAAA,EACAhL,EAAA6D,KAAAM,OAAAzG,EAAAyG,OACAnE,EAAAL,IAAAe,cAAA,kBAAA+G,UAAAzH,EAAA6D,KAAAmH,MAAA,OACA,IAAAxG,EAAA9G,EAAA4D,SACAkD,EAAAqI,QAAA,EACA7M,EAAAqL,KAAA7G,GACAxE,EAAA+F,UACA,IAAAL,GACAlB,KAAAtD,KAAA6R,UAAAvO,GACAL,OAAAjD,KAAA6R,UAAA/S,EAAA6D,KAAAM,QACAmH,OAAApK,KAAA6R,UAAA/S,EAAA6D,KAAAW,KAAA4N,IACAhR,KAAA1D,EAAAsV,YAEAtV,EAAAsV,YAEAvV,EAAAuC,EAAAH,KAAAmB,IAAA,iBAAA0E,EAAA,SAAAzE,GACA4E,QAAAC,KAAA,kBAGiB,IAAApI,EAAA0D,MACjB8P,EAAAzJ,UAAA/J,EAAA4D,SACAtB,EAAAL,IAAAe,cAAA,oCAAAiH,UAAA,GACA3H,EAAAiT,OAAAxS,GAEA/C,EAAA4D,SAAA/E,QAAA,cACAyD,EAAAsF,OAAAxD,WAGAoP,EAAAzJ,UAAA,mBAAA/J,EAAA0D,KACAqR,IAEAzS,EAAAL,IAAAe,cAAA,oCAAAiH,UAAA,GACA3H,EAAAiT,OAAAxS,KAGa,WACbyQ,EAAAzJ,UAAA,cACAgL,IAEAzS,EAAAL,IAAAe,cAAA,oCAAAiH,UAAA,GACA3H,EAAAiT,OAAAxS,OAMAuB,EAAA1G,UAAA2X,OAAA,SAAAxS,GACA,IAAAT,EAAAtB,KAEA+B,EAAAK,QAAA6E,GACAlF,EAAAC,cAAA,uBAAAmS,QAEApS,EAAAC,cAAA,yBAAAC,UAAAC,IAAA,WAIAZ,EAAA6D,KAAAQ,UACA5D,EAAAC,cAAA,0BAAA/F,MAAAqF,EAAA6D,KAAAQ,SAEArE,EAAA6D,KAAAS,YACA7D,EAAAC,cAAA,yBAAAC,UAAAC,IAAA,YACAH,EAAAC,cAAA,uBAAA+G,UAAAzH,EAAA6D,KAAAS,YAKAtC,EAAA1G,UAAA+R,KAAA,SAAA7I,GACA,IAAAxE,EAAAtB,KACA8R,EAAAxQ,EAAA0H,IAAAnF,QAAA,yCAAAiC,EAAAmB,IAAApD,QAAA,8BAAAiC,EAAAmB,IAAApD,QAAA,gCAAAiC,EAAAmB,IACA3F,EAAAL,IAAAe,cAAA,0BAAA8D,EAAAmB,GAAA,yBACAgC,UAAA6I,EACAxQ,EAAA6B,KAAA/B,OACA,IAAAW,EAAAT,EAAAL,IAAAe,cAAA,gBAAA8D,EAAAmB,IACAlF,EAAAK,QAAAuR,UAAA7N,EAAAmB,GACAlF,EAAAC,cAAA,0BAAA2H,QAGA5H,EAAAC,cAAA,yBAAAuM,mBAAA,0EACAxM,EAAAC,cAAA,wBAAApB,iBAAA,mBACAU,EAAA6D,KAAAI,SAAA,EACAjE,EAAAqL,KAAA7G,GACAxE,EAAA+F,YACS,GAGT/F,EAAA6D,KAAAQ,UACA5D,EAAAC,cAAA,0BAAA/F,MAAAqF,EAAA6D,KAAAQ,SAEArE,EAAA6D,KAAAS,YACA7D,EAAAC,cAAA,yBAAAC,UAAAC,IAAA,YACAH,EAAAC,cAAA,uBAAA+G,UAAAzH,EAAA6D,KAAAS,YAMAtC,EAAA1G,UAAAiR,WAAA,WACA,IAAAvM,EAAAtB,KAEA,GAAAsB,EAAAH,KAAAqD,WAAA,CACAlD,EAAAL,IAAAe,cAAA,sBAAAI,QAAA6H,KAAA,gBACA,IAAAjD,GACA/I,IAAAqD,EAAAH,KAAA8C,KACAD,WAAA1C,EAAAH,KAAA6C,WACAE,MAAA5C,EAAAH,KAAA+C,MACAC,KAAA7C,EAAAH,KAAAgD,KACAwB,QAAArE,EAAAH,KAAAiD,MAEA9C,EAAA6H,aAAAnC,OATA,CAYA1F,EAAAL,IAAAe,cAAA,YAAAC,UAAAE,OAAA,WACA,IAAAqS,sVAG2JlT,EAAAH,KAAA8C,0MACqB3C,EAAAH,KAAA6C,iMACf1C,EAAAH,KAAA+C,yLACH5C,EAAAH,KAAAgD,uLACQ7C,EAAAH,KAAAiD,0GAEtK9C,EAAAL,IAAAe,cAAA,YAAA+G,UAAAyL,IAIAlR,EAAA1G,UAAAuM,aAAA,SAAAtI,EAAAC,GACA,IAAAQ,EAAAtB,KACA,GAAAc,EACA,IAAAkG,GACA/I,IAAAqD,EAAAL,IAAAe,cAAA,eAAA/F,MACA+H,WAAA1C,EAAAL,IAAAe,cAAA,sBAAA/F,MACAiI,MAAA5C,EAAAL,IAAAe,cAAA,iBAAA/F,MACAkI,KAAA7C,EAAAL,IAAAe,cAAA,gBAAA/F,MAAA4H,QAAA,uBACA8B,QAAArE,EAAAL,IAAAe,cAAA,mBAAA/F,YAGA+K,EAAA9F,UAAA,GAEAnC,EAAAuC,EAAAH,KAAAmB,IAAA,oBAAA0E,EAAA,SAAAzE,GACA,IAAAvD,EAAAwD,KAAAC,MAAAF,GACA,OAAAvD,EAAA0D,KAGa,WAAA1D,EAAA0D,KACb1D,EAAA4D,SAAA/E,QAAA,6CACAiQ,MAAA9O,EAAA4D,SAAAiB,QAAA,2DAGA7E,EAAA4D,SAAA/E,QAAA,uBACAiQ,MAAA,iBAGA9O,EAAA4D,SAAA/E,QAAA,wBACAiQ,MAAA,uBAGAA,MAAA9O,EAAA4D,eAGAkL,MAAA9O,EAAA4D,UAlBAkL,MAAA,6BACA5G,WAAA,WAAsCxD,SAAA+Q,UAAmB,MAoBhD,WACT3G,MAAA,0BAKAxK,EAAA1G,UAAA8X,QAAA,WACA,IAAApT,EAAAtB,KACAsB,EAAAL,IAAA8H,UAAA,UACAzH,EAAA0H,WACA1H,EAAAL,WACAK,EAAAuD,iBACAvD,EAAA6B,YACA7B,EAAAsF,cACAtF,EAAAH,YACAG,EAAA6D,MAIA,iBAAA1K,MAAA,iBAAAD,KACAC,EAAAD,QAAA8I,OAKSmO,KAFTzU,EAAA,WACA,OAAAsG,GACSnI,KAAAX,EAAAM,EAAAN,EAAAC,QAAAD,QAAAwC,GAlqDT,CAuqDCpC,4CClrDDH,EAAAD,QAAA,SAAAC,GAoBA,OAnBAA,EAAAka,kBACAla,EAAAma,UAAA,aACAna,EAAAoa,SAEApa,EAAAqa,WAAAra,EAAAqa,aACApZ,OAAAC,eAAAlB,EAAA,UACAmB,YAAA,EACAC,IAAA,WACA,OAAApB,EAAAQ,KAGAS,OAAAC,eAAAlB,EAAA,MACAmB,YAAA,EACAC,IAAA,WACA,OAAApB,EAAAO,KAGAP,EAAAka,gBAAA,GAEAla","file":"iDisqus.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"iDisqus\"] = factory();\n\telse\n\t\troot[\"iDisqus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*!\r\n * \r\n * @author fooleap\r\n * @email fooleap@gmail.com\r\n * @create 2017-06-17 20:48:25\r\n * @update 2018-09-20 13:38:07\r\n * @version 0.2.21\r\n * Copyright 2017-2018 fooleap\r\n * Released under the MIT license\r\n */\r\nrequire('./iDisqus.scss');\r\n(function (global) {\r\n    'use strict';\r\n\r\n    var d = document,\r\n        l = localStorage,\r\n        scripts = d.scripts,\r\n        lasturl = scripts[scripts.length - 1].src,\r\n        filepath = lasturl.substring(0, lasturl.lastIndexOf('/')),\r\n        isEdge = navigator.userAgent.indexOf(\"Edge\") > -1,\r\n        isIE = !!window.ActiveXObject || \"ActiveXObject\" in window;\r\n\r\n    function getLocation(href) {\r\n        var link = d.createElement('a');\r\n        link.href = href;\r\n        return link;\r\n    }\r\n\r\n    function getAjax(url, success, error) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open ('GET', encodeURI(url));\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText);\r\n            }\r\n        }\r\n        xhr.onerror = error;\r\n        xhr.withCredentials = true;\r\n        xhr.send();\r\n        return xhr;\r\n    }\r\n    \r\n    function postAjax(url, data, success, error) {\r\n        var params = typeof data == 'string' ? data : Object.keys(data).filter(function(k){\r\n            return data[k] != null;\r\n        }).map(function(k){ \r\n            return encodeURIComponent(k) + '=' + encodeURIComponent(data[k])\r\n        }).join('&');\r\n\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('POST', url);\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText); \r\n            }\r\n        };\r\n        xhr.onerror = error; \r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n        xhr.send(params);\r\n        return xhr;\r\n    }\r\n    \r\n    function generateGUID() {\r\n        var time = Number(new Date().getTime().toString().substring(3));\r\n        var guid = Math.abs(time + Math.floor(Math.random() * 1e5) - 48*1e6+Math.floor(Math.random()*1e6)).toString(32);\r\n        guid +=  Math.floor(Math.random() * 1e9).toString(32);\r\n        return guid;\r\n    }\r\n\r\n    (function (ElementProto) {\r\n        // matches & closest polyfill https://github.com/jonathantneal/closest\r\n        if (typeof ElementProto.matches !== 'function') {\r\n            ElementProto.matches = ElementProto.msMatchesSelector || ElementProto.mozMatchesSelector || ElementProto.webkitMatchesSelector || function matches(selector) {\r\n                var element = this;\r\n                var elements = (element.document || element.ownerDocument).querySelectorAll(selector);\r\n                var index = 0;\r\n\r\n                while (elements[index] && elements[index] !== element) {\r\n                    ++index;\r\n                }\r\n\r\n                return Boolean(elements[index]);\r\n            };\r\n        }\r\n\r\n        if (typeof ElementProto.closest !== 'function') {\r\n            ElementProto.closest = function closest(selector) {\r\n                var element = this;\r\n\r\n                while (element && element.nodeType === 1) {\r\n                    if (element.matches(selector)) {\r\n                        return element;\r\n                    }\r\n\r\n                    element = element.parentNode;\r\n                }\r\n\r\n                return null;\r\n            };\r\n        }\r\n\r\n        // 事件委托\r\n        ElementProto.on = function on(eventName, selector, handler) {\r\n            this.addEventListener(eventName, function(e) {\r\n                for (var target = e.target; target && target != this; target = target.parentNode) {\r\n                    if (target.matches(selector)) {\r\n                        handler.call(null, e, target);\r\n                        break;\r\n                    }\r\n                }\r\n            }, true);\r\n        };\r\n\r\n    })(window.Element.prototype);\r\n\r\n    // 访客信息\r\n    var User = function () {\r\n        this.dom = arguments[0];\r\n        this.opts = arguments[1];\r\n        this.init();\r\n        this.autologin();\r\n    }\r\n\r\n    User.prototype = {\r\n        // 初始化访客信息\r\n        init: function(){\r\n            var _ = this;\r\n            // 读取访客信息\r\n            _.name = l.getItem('name');\r\n            _.email = l.getItem('email');\r\n            _.url = l.getItem('url');\r\n            _.avatar = l.getItem('avatar');\r\n            _.type = l.getItem('type');\r\n            _.logged_in = l.getItem('logged_in');\r\n\r\n            var boxarr = _.dom.getElementsByClassName('comment-box');\r\n            if( _.logged_in == 'true' ) {\r\n                [].forEach.call(boxarr,function(item){\r\n                    if(_.type == '1'){\r\n                        item.querySelector('.comment-form-wrapper').classList.add('logged-in');\r\n                    }\r\n                    item.querySelector('.comment-form-name').value = _.name;\r\n                    item.querySelector('.comment-form-email').value = _.email;\r\n                    item.querySelector('.comment-form-url').value = _.url;\r\n                    item.querySelector('.comment-avatar-image').src = _.avatar;\r\n                });\r\n            } else {\r\n                [].forEach.call(boxarr,function(item){\r\n                    item.querySelector('.comment-form-wrapper').classList.remove('logged-in');\r\n                    item.querySelector('.comment-form-name').value = '';\r\n                    item.querySelector('.comment-form-email').value = '';\r\n                    item.querySelector('.comment-form-url').value = '';\r\n                    item.querySelector('.comment-avatar-image').src = _.dom.querySelector('.comment-avatar-image').dataset.avatar;\r\n                });\r\n                l.setItem('logged_in', 'false');\r\n            }\r\n        },\r\n\r\n        // 自动登录\r\n        autologin: function(){\r\n            var _ = this;\r\n            getAjax( _.opts.api +'/user.php', function(resp){\r\n                var data = JSON.parse(resp);\r\n                if( data.code == 0 ){\r\n                    _.submit(data.response);\r\n                } else {\r\n                    if( _.type == '1' ){\r\n                        l.setItem('logged_in', 'false');\r\n                        _.init();\r\n                    }\r\n                }\r\n            }, function(){\r\n            })\r\n        },\r\n\r\n        // 登录\r\n        login: function(){\r\n\r\n            var _ = this;\r\n            var popup = window.open(_.opts.api+'/login.php', 'Disqus Oauth', 'width=470,height=508');\r\n            var timer;\r\n            function isLogged(){\r\n                if (!popup || !popup.closed) return;\r\n                clearInterval(timer);\r\n                _.user.autologin();\r\n            }\r\n            timer = setInterval(isLogged, 100);\r\n\r\n        },\r\n\r\n        // 退出登录\r\n        logout: function(){\r\n            var _ = this;\r\n            postAjax( _.opts.api + '/logout.php', {}, function(resp){\r\n                l.setItem('logged_in', 'false');\r\n                l.removeItem('type');\r\n                l.removeItem('email');\r\n                l.removeItem('avatar');\r\n                l.removeItem('name');\r\n                l.removeItem('url');\r\n                _.user.init();\r\n            })\r\n        },\r\n\r\n        // 提交访客信息\r\n        submit: function(user){\r\n            l.setItem('email', user.email);\r\n            l.setItem('type', user.type);\r\n            l.setItem('name', user.name);\r\n            l.setItem('url', user.url);\r\n            l.setItem('avatar', user.avatar);\r\n            l.setItem('logged_in', 'true');\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    var iDisqus = function () {\r\n        var _ = this;\r\n\r\n        // 配置\r\n        _.opts = typeof(arguments[1]) == 'object' ? arguments[1] : arguments[0];\r\n        _.dom =  d.getElementById(typeof(arguments[0]) == 'string' ? arguments[0] : 'comment');\r\n        _.opts.api = _.opts.api.slice(-1) == '/' ? _.opts.api.slice(0,-1) : _.opts.api;\r\n        _.opts.site = _.opts.site || location.origin;\r\n        if(!!_.opts.url){\r\n            var optsUrl = _.opts.url.replace(_.opts.site, '');\r\n            _.opts.url = optsUrl.slice(0, 1) != '/' ? '/' + optsUrl : optsUrl;\r\n        } else if(isEdge || isIE) {\r\n            _.opts.url = encodeURI(location.pathname) + encodeURI(location.search);\r\n        } else {\r\n            _.opts.url = location.pathname + location.search;\r\n        }\r\n        _.opts.identifier = _.opts.identifier || _.opts.url;\r\n        _.opts.link = _.opts.site + _.opts.url; \r\n        _.opts.title = _.opts.title || d.title;\r\n        _.opts.slug = !!_.opts.slug ? _.opts.slug.replace(/[^A-Za-z0-9_-]+/g,'') : '';\r\n        _.opts.desc =  _.opts.desc || (!!d.querySelector('[name=\"description\"]') ? d.querySelector('[name=\"description\"]').content : '');\r\n        _.opts.mode = _.opts.mode || 1;\r\n        _.opts.timeout = _.opts.timeout || 3000;\r\n        _.opts.toggle = !!_.opts.toggle ? d.getElementById(_.opts.toggle) : null;\r\n        _.opts.autoCreate = !!_.opts.autoCreate || !!_.opts.auto;\r\n        _.opts.relatedType = _.opts.relatedType || 'Related'\r\n\r\n        // emoji 表情\r\n        _.opts.emojiPath = _.opts.emojiPath || _.opts.emoji_path || 'https://assets-cdn.github.com/images/icons/emoji/unicode/';\r\n        _.emojiList = _.opts.emojiList || _.opts.emoji_list || [{\r\n            code:'smile',\r\n            title:'笑脸',\r\n            unicode:'1f604'\r\n        },{\r\n            code:'mask',\r\n            title:'生病',\r\n            unicode:'1f637'\r\n        },{\r\n            code:'joy',\r\n            title:'破涕为笑',\r\n            unicode:'1f602'\r\n        },{\r\n            code:'stuck_out_tongue_closed_eyes',\r\n            title:'吐舌',\r\n            unicode:'1f61d'\r\n        },{\r\n            code:'flushed',\r\n            title:'脸红',\r\n            unicode:'1f633'\r\n        },{\r\n            code:'scream',\r\n            title:'恐惧',\r\n            unicode:'1f631'\r\n        },{\r\n            code:'pensive',\r\n            title:'失望',\r\n            unicode:'1f614'\r\n        },{\r\n            code:'unamused',\r\n            title:'无语',\r\n            unicode:'1f612'\r\n        },{\r\n            code:'grin',\r\n            title:'露齿笑',\r\n            unicode:'1f601'\r\n        },{\r\n            code:'heart_eyes',\r\n            title:'色',\r\n            unicode:'1f60d'\r\n        },{\r\n            code:'sweat',\r\n            title:'汗',\r\n            unicode:'1f613'\r\n        },{\r\n            code:'smirk',\r\n            title:'得意',\r\n            unicode:'1f60f'\r\n        },{\r\n            code:'relieved',\r\n            title:'满意',\r\n            unicode:'1f60c'\r\n        },{\r\n            code:'rolling_eyes',\r\n            title:'翻白眼',\r\n            unicode:'1f644'\r\n        },{\r\n            code:'ok_hand',\r\n            title:'OK',\r\n            unicode:'1f44c'\r\n        },{\r\n            code:'v',\r\n            title:'胜利',\r\n            unicode:'270c'\r\n        }];\r\n        \r\n        if(!!_.opts.emoji_preview || !!_.opts.emojiPreview ){\r\n            getAjax(_.opts.api +'/eac.php', function(resp){\r\n                _.eac = JSON.parse(resp);\r\n            }, function(){\r\n            })\r\n        }\r\n\r\n        // 默认状态\r\n        _.stat = {\r\n            current: 'idisqus', // 当前显示评论框\r\n            loaded: false,      // 评论框已加载\r\n            loading: false,     // 评论加载中\r\n            editing: false,     // 评论编辑中\r\n            offsetTop: 0,       // 高度位置\r\n            thread: null,       // 本页 thread id\r\n            next: null,         // 下条评论\r\n            message: null,      // 新评论\r\n            mediaHtml: null,    // 新上传图片\r\n            media: {},          // 媒体信息\r\n            post: {},        // 评论数据\r\n            root: [],           // 根评论\r\n            count: 0,           // 评论数\r\n            users: [],          // Disqus 会员\r\n            imageSize: [],      // 已上传图片大小\r\n            disqusLoaded: false // Disqus 已加载\r\n        };\r\n\r\n        // Disqus 评论框设置\r\n        window.disqus_config = function () {\r\n            this.page.identifier = _.opts.identifier;\r\n            this.page.title = _.opts.title;\r\n            this.page.url = _.opts.link;\r\n            this.callbacks.onReady.push(function() {\r\n                _.stat.current = 'disqus';\r\n                _.stat.disqusLoaded = true;\r\n                _.dom.querySelector('#idisqus').style.display = 'none';\r\n                _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n                if( _.opts.mode == 3 && !!_.opts.toggle) {\r\n                    _.opts.toggle.disabled = '';\r\n                    _.opts.toggle.checked = true;\r\n                    _.opts.toggle.addEventListener('change', _.handle.toggle, false);\r\n                }\r\n            });\r\n            // 原生评论框发邮件\r\n            this.callbacks.onNewComment = [function(comment, a) { \r\n                var postData = {\r\n                    id: comment.id\r\n                }\r\n                // 异步发送邮件\r\n                setTimeout(function(){\r\n                    postAjax( _.opts.api + '/sendemail.php', postData, function(resp){\r\n                        console.info('邮件发送成功！');\r\n                    })\r\n                }, 2000);\r\n            }];\r\n        }\r\n\r\n        // 自动初始化\r\n        if( !!_.opts.init ){\r\n            _.init();\r\n            //console.log(_);\r\n        }\r\n    }\r\n\r\n    // TimeAgo https://coderwall.com/p/uub3pw/javascript-timeago-func-e-g-8-hours-ago\r\n    iDisqus.prototype.timeAgo = function() {\r\n\r\n        var _ = this;\r\n        var templates = {\r\n            prefix: \"\",\r\n            suffix: \"前\",\r\n            seconds: \"几秒\",\r\n            minute: \"1分钟\",\r\n            minutes: \"%d分钟\",\r\n            hour: \"1小时\",\r\n            hours: \"%d小时\",\r\n            day: \"1天\",\r\n            days: \"%d天\",\r\n            week: \"1周\",\r\n            weeks: \"%d周\",\r\n            month: \"1个月\",\r\n            months: \"%d个月\",\r\n            year: \"1年\",\r\n            years: \"%d年\"\r\n        };\r\n        var template = function (t, n) {\r\n            return templates[t] && templates[t].replace(/%d/i, Math.abs(Math.round(n)));\r\n        };\r\n\r\n        var timer = function (time) {\r\n            if (!time) return;\r\n            time = time.replace(/\\.\\d+/, \"\"); // remove milliseconds\r\n            time = time.replace(/-/, \"/\").replace(/-/, \"/\");\r\n            time = time.replace(/T/, \" \").replace(/Z/, \" UTC\");\r\n            time = time.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\r\n            time = new Date(time * 1000 || time);\r\n\r\n            var now = new Date();\r\n            var seconds = ((now.getTime() - time) * .001) >> 0;\r\n            var minutes = seconds / 60;\r\n            var hours = minutes / 60;\r\n            var days = hours / 24;\r\n            var weeks = days / 7;\r\n            var months = days / 30;\r\n            var years = days / 365;\r\n\r\n            return templates.prefix + ( seconds < 45 && template('seconds', seconds) || seconds < 90 && template('minute', 1) || minutes < 45 && template('minutes', minutes) || minutes < 90 && template('hour', 1) || hours < 24 && template('hours', hours) || hours < 42 && template('day', 1) || days < 30 && template('days', days) || days < 45 && template('month', 1) || days < 365 && template('months', months) || years < 1.5 && template('year', 1) || template('years', years)) + templates.suffix;\r\n        };\r\n\r\n        var elements = _.dom.querySelectorAll('time[datetime]');\r\n        for (var i in elements) {\r\n            var $this = elements[i];\r\n            if (typeof $this === 'object') {\r\n                $this.title = new Date($this.getAttribute('datetime'));\r\n                $this.innerHTML = timer($this.getAttribute('datetime'));\r\n            }\r\n        }\r\n\r\n        // update time every minute\r\n        setTimeout(_.timeAgo.bind(_), 60000);\r\n\r\n    }\r\n\r\n    // 初始化评论框\r\n    iDisqus.prototype.init = function(){\r\n        var _ = this;\r\n        if(!_.dom){\r\n            //console.log('该页面没有评论框！');\r\n            return\r\n        }\r\n        // 表情\r\n        var emojiList = '';\r\n        _.emojiList.forEach(function(item){\r\n            emojiList += '<li class=\"emojione-item\" title=\"'+ item.title+'\" data-code=\":'+item.code+':\"><img class=\"emojione-item-image\" src=\"'+_.opts.emojiPath + item.unicode+'.png\" /></li>';\r\n        })\r\n        _.dom.innerHTML = `<div class=\"comment loading\" id=\"idisqus\">\r\n            <div class=\"comment-reactions\"></div>\r\n            <div class=\"loading-container\" data-tips=\"正在加载评论……\"><svg class=\"loading-bg\" width=\"72\" height=\"72\" viewBox=\"0 0 720 720\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path class=\"ring\" fill=\"none\" stroke=\"#9d9ea1\" d=\"M 0 -260 A 260 260 0 1 1 -80 -260\" transform=\"translate(400,400)\" stroke-width=\"50\" /><polygon transform=\"translate(305,20)\" points=\"50,0 0,100 18,145 50,82 92,145 100,100\" style=\"fill:#9d9ea1\"/></svg></div>\r\n            <div class=\"comment-header\"><span class=\"comment-header-item\" id=\"comment-count\">评论</span><a target=\"_blank\" class=\"comment-header-item\" id=\"comment-link\">Disqus 讨论区</a></div>\r\n            <div class=\"comment-box\">\r\n                <div class=\"comment-avatar avatar\"><img class=\"comment-avatar-image\" src=\"//a.disquscdn.com/images/noavatar92.png\" data-avatar=\"//a.disquscdn.com/images/noavatar92.png\"></div>\r\n                <div class=\"comment-form\">\r\n                    <div class=\"comment-form-wrapper\">\r\n                        <textarea class=\"comment-form-textarea\" placeholder=\"加入讨论……\"></textarea>\r\n                        <div class=\"comment-form-alert\"></div>\r\n                        <div class=\"comment-image\">\r\n                            <ul class=\"comment-image-list\"></ul>\r\n                            <div class=\"comment-image-progress\"><div class=\"comment-image-loaded\"></div></div>\r\n                        </div>\r\n        \r\n                        <div class=\"comment-actions\">\r\n        \r\n                            <div class=\"comment-actions-group\">\r\n                                <input id=\"emoji-input\" class=\"comment-actions-input\" type=\"checkbox\">\r\n                                <label class=\"comment-actions-label emojione\" for=\"emoji-input\">\r\n                                    <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <g>\r\n                                            <title>选择表情</title>\r\n                                            <path d=\"M512 1024c-282.713043 0-512-229.286957-512-512s229.286957-512 512-512c282.713043 0 512 229.286957 512 512S792.486957 1024 512 1024zM512 44.521739c-258.226087 0-467.478261 209.252174-467.478261 467.478261 0 258.226087 209.252174 467.478261 467.478261 467.478261s467.478261-209.252174 467.478261-467.478261C979.478261 253.773913 768 44.521739 512 44.521739z\"></path>\r\n                                            <path d=\"M801.391304 554.295652c0 160.278261-129.113043 289.391304-289.391304 289.391304s-289.391304-129.113043-289.391304-289.391304L801.391304 554.295652z\"></path>\r\n                                            <path d=\"M674.504348 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\r\n                                            <path d=\"M347.269565 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\r\n                                        </g>\r\n                                    </svg>\r\n                                    <ul class=\"emojione-list\">${ emojiList }</ul>\r\n                                </label>\r\n                                <input id=\"upload-input\" class=\"comment-actions-input comment-image-input\" type=\"file\" accept=\"image/*\" name=\"file\">\r\n                                <label class=\"comment-actions-label\" for=\"upload-input\">\r\n                                    <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <g>\r\n                                            <title>上传图片</title>\r\n                                            <path d=\"M15.515152 15.515152 15.515152 15.515152 15.515152 15.515152Z\"></path>\r\n                                            <path d=\"M15.515152 139.636364l0 806.787879 992.969697 0 0-806.787879-992.969697 0zM946.424242 884.363636l-868.848485 0 0-682.666667 868.848485 0 0 682.666667zM698.181818 356.848485c0-51.417212 41.673697-93.090909 93.090909-93.090909s93.090909 41.673697 93.090909 93.090909c0 51.417212-41.673697 93.090909-93.090909 93.090909s-93.090909-41.673697-93.090909-93.090909zM884.363636 822.30303l-744.727273 0 186.181818-496.484848 248.242424 310.30303 124.121212-93.090909z\"></path>\r\n                                        </g>\r\n                                    </svg>\r\n                                </label>\r\n                            </div>\r\n        \r\n                            <div class=\"comment-actions-form\">\r\n                                <label class=\"comment-actions-label exit\" title=\"退出登录\">\r\n                                    <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"48\" height=\"48\">\r\n                                        <path d=\"M348.870666 210.685443l378.570081 0c32.8205 0 58.683541 26.561959 58.683541 58.683541 0 162.043606 0 324.804551 0 486.848157 0 32.81129-26.561959 58.674331-58.683541 58.674331L348.870666 814.891472c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276c0-10.477632 8.372691-18.841114 18.850323-18.841114l343.645664 0c10.477632 0 18.850323-8.372691 18.850323-18.850323L711.366653 304.983109c0-10.477632-8.372691-18.841114-18.850323-18.841114L348.870666 286.141996c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276C329.98248 219.095997 338.393034 210.685443 348.870666 210.685443z\"></path>\r\n                                        <path d=\"M128.152728 526.436804l112.450095 112.450095c6.985088 6.985088 19.567661 6.985088 26.552749 0l26.561959-26.561959c6.985088-6.985088 6.985088-19.567661 0-26.552749l-34.925441-34.925441L494.168889 550.84675c10.477632 0 18.850323-8.372691 18.850323-18.850323l0-37.719066c0-10.477632-8.372691-18.850323-18.850323-18.850323L258.754229 475.427036l34.925441-34.925441c6.985088-6.985088 6.985088-19.567661 0-26.552749l-26.561959-26.524097c-6.985088-6.985088-19.567661-6.985088-26.552749 0L128.152728 499.875868C120.431883 506.859933 120.431883 519.451716 128.152728 526.436804z\"></path>\r\n                                    </svg>\r\n                                </label>\r\n                                <button class=\"comment-form-submit\">\r\n                                    <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <path d=\"M565.747623 792.837176l260.819261 112.921839 126.910435-845.424882L66.087673 581.973678l232.843092 109.933785 562.612725-511.653099-451.697589 563.616588-5.996574 239.832274L565.747623 792.837176z\" fill=\"#ffffff\"></path>\r\n                                    </svg>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n        \r\n                    </div>\r\n                    <div class=\"comment-form-user\">\r\n                        ${( _.opts.mode != 1 ? '<div class=\"comment-form-auth\"><button class=\"comment-form-login\" title=\"使用 Disqus 帐号登录\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 200 200\"><path fill=\"#2E9FFF\" d=\"M102.535 167.5c-16.518 0-31.621-6.036-43.298-16.021L30.5 155.405l11.102-27.401A67.658 67.658 0 0 1 35.564 100c0-37.277 29.984-67.5 66.971-67.5 36.984 0 66.965 30.223 66.965 67.5 0 37.284-29.98 67.5-66.965 67.5zm36.567-67.693v-.188c0-19.478-13.736-33.367-37.42-33.367h-25.58v67.5h25.201c23.868.001 37.799-14.468 37.799-33.945zm-37.138 17.361h-7.482V82.841h7.482c10.989 0 18.283 6.265 18.283 17.07v.188c0 10.896-7.294 17.069-18.283 17.069z\"/></svg></button></div><span> 或 </span>' : '' )}\r\n                            <form class=\"comment-form-guest\"><input class=\"comment-form-input comment-form-name\" type=\"text\" name=\"name\" placeholder=\"名字（必填）\" autocomplete=\"name\" /><input class=\"comment-form-input comment-form-email\" type=\"email\" name=\"email\" placeholder=\"邮箱（必填）\" autocomplete=\"email\" /><input class=\"comment-form-input comment-form-url\" type=\"url\" name=\"url\" placeholder=\"网址（可选）\" autocomplete=\"url\" /></form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ul id=\"comments\" class=\"comment-list\"></ul>\r\n            <a href=\"javascript:;\" class=\"comment-loadmore\">加载更多</a>\r\n            <div class=\"comment-related\"></div>\r\n        </div>\r\n        <div class=\"comment\" id=\"disqus_thread\"></div>`;\r\n\r\n        _.user = new User(_.dom,_.opts);\r\n        _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论……/,'');\r\n        _.handle = {\r\n            logout: _.user.logout.bind(_),\r\n            login: _.user.login.bind(_),\r\n            loadMore: _.loadMore.bind(_),\r\n            post: _.post.bind(_),\r\n            threadCreate: _.threadCreate.bind(_),\r\n            remove: _.remove.bind(_),\r\n            show: _.show.bind(_),\r\n            toggle: _.toggle.bind(_),\r\n            upload: _.upload.bind(_),\r\n            verify: _.verify.bind(_),\r\n            jump: _.jump.bind(_),\r\n            mention: _.mention.bind(_),\r\n            keySelect: _.keySelect.bind(_),\r\n            field: _.field.bind(_),\r\n            focus: _.focus,\r\n            input: _.input.bind(_),\r\n            parentShow: _.parentShow.bind(_)\r\n        };\r\n\r\n        var $iDisqus = _.dom.querySelector('#idisqus');\r\n        $iDisqus.on('blur','.comment-form-textarea', _.handle.focus);\r\n        $iDisqus.on('focus','.comment-form-textarea', _.handle.focus);\r\n        $iDisqus.on('input','.comment-form-textarea', _.handle.input);\r\n        $iDisqus.on('keyup','.comment-form-textarea', _.handle.mention);\r\n        $iDisqus.on('keydown', '.comment-form-textarea', _.handle.keySelect);\r\n        $iDisqus.on('blur', '.comment-form-name', _.handle.verify);\r\n        $iDisqus.on('blur', '.comment-form-email',  _.handle.verify);\r\n        $iDisqus.on('click', '.comment-form-submit',  _.handle.post);\r\n        $iDisqus.on('click', '.comment-form-login',  _.handle.login);\r\n        $iDisqus.on('change', '.comment-image-input',  _.handle.upload);\r\n        $iDisqus.on('click', '.emojione-item',  _.handle.field);\r\n        $iDisqus.on('click', '.exit', _.handle.logout);\r\n        $iDisqus.on('click', '.comment-item-reply', _.handle.show);\r\n        $iDisqus.on('click', '.comment-item-cancel',  _.handle.show);\r\n        $iDisqus.on('click','.comment-item-avatar', _.handle.jump);\r\n        $iDisqus.on('click','.comment-item-pname', _.handle.jump);\r\n        $iDisqus.on('mouseover','.comment-item-pname', _.handle.parentShow);\r\n        $iDisqus.on('click', '.comment-loadmore', _.handle.loadMore);\r\n        $iDisqus.on('click', '#thread-submit', _.handle.threadCreate);\r\n\r\n        switch(_.opts.mode){\r\n            case 1:\r\n                _.disqus();\r\n                break;\r\n            case 2: \r\n                _.getlist();\r\n                break;\r\n            case 3: \r\n                _.getlist();\r\n                _.disqus();\r\n                break;\r\n            default:\r\n                _.disqus();\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 切换评论框\r\n    iDisqus.prototype.toggle = function(){\r\n        var _ = this;\r\n        if( _.stat.current == 'disqus' ){\r\n            _.stat.current = 'idisqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'block';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        } else {\r\n            _.disqus();\r\n        }\r\n    }\r\n\r\n    // 加载 Disqus 评论\r\n    iDisqus.prototype.disqus = function(){\r\n        var _ = this;\r\n        var _tips = _.dom.querySelector('.loading-container').dataset.tips;\r\n        if(_.opts.site != location.origin){\r\n            console.log('本地环境不加载 Disqus 评论框！');\r\n            if( _.opts.mode == 1 ){\r\n                _.getlist();\r\n            }\r\n            return;\r\n        }\r\n        if(!_.stat.disqusLoaded ){\r\n            _tips = '尝试连接 Disqus……';\r\n\r\n            var s = d.createElement('script');\r\n            s.src = '//'+_.opts.forum+'.disqus.com/embed.js';\r\n            s.dataset.timestamp = Date.now();\r\n            s.onload = function(){\r\n                _.stat.disqusLoaded = true;\r\n                _tips = '连接成功，加载 Disqus 评论框……'\r\n            } \r\n            s.onerror = function(){\r\n                if( _.opts.mode == 1){\r\n                    _tips = '连接失败，加载简易评论框……';\r\n                    _.getlist();\r\n                }\r\n            }\r\n\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('GET', '//disqus.com/next/config.json?' + Date.now(), true);\r\n            xhr.timeout = _.opts.timeout;\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4 && xhr.status == 200) {\r\n                    (d.head || d.body).appendChild(s);\r\n                }\r\n            }\r\n            xhr.ontimeout = function () {\r\n                xhr.abort();\r\n                if( _.opts.mode == 1){\r\n                    _tips = '连接超时，加载简易评论框……';\r\n                    _.getlist();\r\n                }\r\n            }\r\n            xhr.onerror = function() {\r\n                if( _.opts.mode == 1){\r\n                    _tips = '连接失败，加载简易评论框……';\r\n                    _.getlist();\r\n                }\r\n            }\r\n            xhr.send();\r\n        } else {\r\n            _.stat.current = 'disqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'none';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n        }\r\n    }\r\n\r\n    // 添加事件监听\r\n    iDisqus.prototype.addListener = function (els, evt, func){\r\n        var _ = this;\r\n        var el = _.dom.getElementsByClassName(els);\r\n        [].forEach.call(el, function(item){\r\n            item.addEventListener(evt, func, false);\r\n        });\r\n    }\r\n\r\n    // 评论计数\r\n    iDisqus.prototype.count = function (){\r\n        var _ = this;\r\n        var counts = d.querySelectorAll('[data-disqus-url]');\r\n        var qty = counts.length;\r\n        if(qty > 0){\r\n            var commentArr = [];\r\n            for( var i = 0; i < qty; i++){\r\n                commentArr[i] = counts[i].dataset.disqusUrl.replace(_.opts.site, '');\r\n            }\r\n            getAjax(\r\n                _.opts.api + '/count.php?links=' + commentArr.join(','), \r\n                function(resp) {\r\n                    var data  = JSON.parse(resp);\r\n                    var posts = data.response;\r\n                    posts.forEach(function(item){\r\n                        var link = document.createElement('a');\r\n                        link.href = item.link;\r\n                        var itemLink = link.href.replace(link.origin, '');\r\n                        var el = d.querySelector('[data-disqus-url$=\"'+itemLink+'\"]')\r\n                        if(!!el ){\r\n                            el.innerHTML = item.posts;\r\n                            el.dataset.disqusCount = item.posts;\r\n                        }\r\n                    });\r\n                }, function(){\r\n                    console.log('获取数据失败！')\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    // 加载热门话题\r\n    iDisqus.prototype.loadRelated = function(){\r\n        var _ = this;\r\n        if( _.forum.settings.organicDiscoveryEnabled == false || _.stat.relatedLoaded){\r\n            return;\r\n        }\r\n        getAjax(\r\n            _.opts.api + '/list'+ _.opts.relatedType +'.php' + '?thread=' + _.stat.thread.id, \r\n            function(resp) {\r\n                var data = JSON.parse(resp);\r\n                if(data.code == 0){\r\n                    _.stat.relatedLoaded = true;\r\n                    var threads = data.response;\r\n                    var popHtml = '';\r\n                    threads.forEach(function(item){\r\n                        item.topPost.raw_message = item.topPost.raw_message.replace(/(\\@\\w+):disqus/, '$1');\r\n                        if (item.topPost.raw_message.length >= 30) {\r\n                            item.topPost.raw_message = item.topPost.raw_message.substring(0, 28) + '...';                             \r\n                        }\r\n                        popHtml += `\r\n                            <li class=\"related-item\">\r\n                                <a class=\"related-item-link\" href=\"${item.link}\" title=\"${item.title}\">\r\n                                    <div class=\"related-item-title\">${item.title}</div>\r\n                                    <div class=\"related-item-desc\">${item.posts}条评论<span class=\"related-item-bullet\"> • </span>\r\n                                        <time class=\"related-item-time\" datetime=\"${item.createdAt}\"></time>\r\n                                    </div>\r\n                                </a>\r\n                                <a class=\"related-item-link\" href=\"${item.link}?#comment-${item.topPost.id}\" title=\"${item.topPost.raw_message}\">\r\n                                    <div class=\"related-item-post\">\r\n                                        <div class=\"related-item-avatar\">\r\n                                            <img src=\"${item.topPost.avatar}\" />\r\n                                        </div>\r\n                                        <div class=\"related-item-main\">\r\n                                            <span class=\"related-item-name\">${item.topPost.name}</span>\r\n                                             — \r\n                                            <span class=\"related-item-message\">${item.topPost.raw_message}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </a>\r\n                            </li>`;\r\n                    });\r\n                    popHtml = `<div class=\"comment-related-title\">在<span class=\"comment-related-forumname\">${_.forum.name}</span>上还有</div><div class=\"comment-related-content\"><ul class=\"related-list\">${popHtml}</ul></div>`;\r\n                    _.dom.querySelector('.comment-related').innerHTML = popHtml;\r\n                    _.timeAgo();\r\n                }\r\n            },function(){\r\n                console.log('获取数据失败！')\r\n            }\r\n        );\r\n    };\r\n\r\n    // 加载反应\r\n    iDisqus.prototype.loadReactions = function(){\r\n        var _ = this;\r\n        if(_.forum.settings.threadReactionsEnabled == false){\r\n            return;\r\n        }\r\n\r\n    };\r\n\r\n    // 获取评论列表\r\n    iDisqus.prototype.getlist = function(){\r\n        var _ = this;\r\n        _.stat.loading = true;\r\n        _.dom.querySelector('#idisqus').style.display = 'block';\r\n        _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        getAjax(\r\n            _.opts.api + '/getcomments.php?ident=' + _.opts.identifier + '&link=' + _.opts.url + (!!_.stat.next ? '&cursor=' + _.stat.next : ''),\r\n            function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n                    _.stat.thread = data.thread;\r\n                    _.stat.total = data.cursor.total;\r\n                    _.forum = data.forum;\r\n                    _.opts.avatar = _.forum.avatar;\r\n                    _.dom.querySelector('.comment-avatar-image').dataset.avatar = _.forum.avatar;\r\n                    if( _.user.logged_in == 'false' ){\r\n                        _.dom.querySelector('.comment-avatar-image').src = _.forum.avatar;\r\n                    }\r\n                    _.opts.badge =  _.forum.moderatorBadgeText;\r\n                    _.dom.querySelector('#idisqus').classList.remove('loading');\r\n                    _.dom.querySelector('#comment-link').href = data.link;\r\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.total + ' 条评论';\r\n                    var loadmore = _.dom.querySelector('.comment-loadmore');\r\n                    var posts = !!data.response ? data.response : [];\r\n                    _.stat.root = [];\r\n                    posts.forEach(function(item){\r\n                        _.load(item);\r\n                        if(!item.parent){\r\n                            _.stat.root.unshift(item.id);\r\n                        }\r\n                    });\r\n\r\n                    if ( data.cursor.hasPrev ){\r\n                        _.stat.root.forEach(function(item){\r\n                            _.dom.querySelector('.comment-list').appendChild(_.dom.querySelector('#comment-' + item));\r\n                        })\r\n                    } \r\n                    if ( data.cursor.hasNext ){\r\n                        _.stat.next = data.cursor.next;\r\n                        loadmore.classList.remove('loading');\r\n                    } else {\r\n                        _.stat.next = null;\r\n                        loadmore.classList.add('hide');\r\n                    }\r\n\r\n                    _.loadRelated();\r\n                    _.loadReactions();\r\n                    _.timeAgo();\r\n                    \r\n                    if (posts.length == 0) {\r\n                        return;\r\n                    }\r\n\r\n                    var iframe =_.dom.querySelectorAll('.comment-item-body iframe');\r\n                    [].forEach.call(iframe, function(item){\r\n                        item.style.width = item.clientWidth + 'px';\r\n                        item.style.height = item.clientWidth * 9 / 16 + 'px';\r\n                        setTimeout(function(){\r\n                            console.log(item.contentWindow);\r\n                            item.src = item.src;\r\n                        },1000)\r\n                    })\r\n                    var tweet =_.dom.querySelectorAll('.comment-item-body .twitter-tweet');\r\n                    if( tweet.length > 0 ){\r\n                        var head= document.getElementsByTagName('head')[0]; \r\n                        var script= document.createElement('script'); \r\n                        script.type= 'text/javascript'; \r\n                        script.src= '//platform.twitter.com/widgets.js'; \r\n                        head.appendChild(script);\r\n                    }\r\n\r\n                    window.scrollTo(0, _.stat.offsetTop);\r\n\r\n                    if (/^#disqus|^#comment-/.test(location.hash) && !data.cursor.hasPrev && !_.stat.disqusLoaded && !_.stat.loaded) {\r\n                        var el = _.dom.querySelector('#idisqus ' + location.hash)\r\n                        if( !!el ){\r\n                            window.scrollBy(0, el.getBoundingClientRect().top);\r\n                        }\r\n                    }\r\n                    _.stat.loading = false;\r\n                    _.stat.loaded = true;\r\n                } else if ( data.code === 2 ){\r\n                    _.threadInit();\r\n                }\r\n            },function(){\r\n                alert('获取数据失败，请检查服务器设置。')\r\n            }\r\n        );\r\n    }\r\n\r\n    // 读取评论\r\n    iDisqus.prototype.load = function(post){\r\n\r\n        var _ = this;\r\n\r\n        _.stat.post[post.id] = post;\r\n\r\n        var parentPostDom = _.dom.querySelector('.comment-item[data-id=\"'+post.parent+'\"]');\r\n\r\n        var user = {\r\n            username: post.username,\r\n            name: post.name,\r\n            avatar: post.avatar\r\n        }\r\n        if(!!post.username && _.stat.users.map(function(user) { return user.username; }).indexOf(post.username) == -1){\r\n            _.stat.users.push(user);\r\n        }\r\n        \r\n        var parentPost = !!post.parent ? {\r\n            name: `<a class=\"comment-item-pname\" data-parent=\"${post.parent}\" href=\"#${parentPostDom.id}\"><svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\"><path d=\"M1.664 902.144s97.92-557.888 596.352-557.888V129.728L1024 515.84l-425.984 360.448V628.8c-270.464 0-455.232 23.872-596.352 273.28\"></path></svg>${parentPostDom.dataset.name}</a>`,\r\n            dom: parentPostDom.querySelector('.comment-item-children'),\r\n            insert: 'afterbegin'\r\n        } : {\r\n            name: '',\r\n            dom: _.dom.querySelector('.comment-list'),\r\n            insert: post.id == 'preview' || !!post.isPost ? 'afterbegin' : 'beforeend'\r\n        };\r\n\r\n\r\n        var html = `<li class=\"comment-item\" data-id=\"${ post.id }\" data-name=\"${ post.name }\" id=\"comment-${ post.id }\">\r\n        <div class=\"comment-item-body\">\r\n        <a class=\"comment-item-avatar\" href=\"#comment-${ post.id }\"><img src=\"${ post.avatar }\"></a>\r\n        <div class=\"comment-item-main\">\r\n        <div class=\"comment-item-header\"><a class=\"comment-item-name\" title=\"${ post.name }\" rel=\"nofollow\" target=\"_blank\" href=\"${(post.url || 'javascript:;')}\">${ post.name }</a>${( post.isMod ? `<span class=\"comment-item-badge\">${_.opts.badge}</span>` : ``)}${ parentPost.name }<span class=\"comment-item-bullet\"> • </span><time class=\"comment-item-time\" datetime=\"${ post.createdAt }\"></time></div>\r\n        <div class=\"comment-item-content\">${ post.message }</div>\r\n        <div class=\"comment-item-footer\">${!!post.isPost ? `<span class=\"comment-item-manage\"><a class=\"comment-item-edit\" href=\"javascript:;\">编辑</a><span class=\"comment-item-bullet\"> • </span><a class=\"comment-item-delete\" href=\"javascript:;\">删除</a><span class=\"comment-item-bullet\"> • </span></span>` : ``}<a class=\"comment-item-reply\" href=\"javascript:;\">回复</a></div>\r\n        </div></div>\r\n        <ul class=\"comment-item-children\"></ul>\r\n        </li>`;\r\n\r\n        // 已删除评论\r\n        if(!!post.isDeleted){\r\n            html = `<li class=\"comment-item\" data-id=\"${ post.id }\" id=\"comment-${ post.id }\" data-name=\"${ post.name }\">\r\n            <div class=\"comment-item-body\">\r\n            <a class=\"comment-item-avatar\" href=\"#comment-${ post.id }\"><img src=\"${ post.avatar }\"></a>\r\n            <div class=\"comment-item-main\" data-message=\"此评论已被删除。\"></div></div>\r\n            <ul class=\"comment-item-children\"></ul>\r\n            </li>`;\r\n        }\r\n\r\n\r\n        // 更新 or 创建\r\n        if(!!_.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]')){\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]').outerHTML = html;\r\n        } else {\r\n            parentPost.dom.insertAdjacentHTML(parentPost.insert, html);\r\n        }\r\n\r\n        // 发布留言，可编辑删除\r\n        if(!!post.isPost && !_.stat.editing){\r\n            var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]');\r\n\r\n            var postEdit = setTimeout(function(){\r\n                // 十分钟后\r\n                if(!!$this.querySelector('.comment-item-manage')){\r\n                    $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                }\r\n            }, 6*1e5);\r\n\r\n            // 删除\r\n            $this.querySelector('.comment-item-delete').addEventListener('click',function(e){\r\n                var postData = {\r\n                    id: post.id,\r\n                    identifier: _.opts.identifier\r\n                }\r\n                var delDom = e.currentTarget;\r\n                delDom.innerHTML = '删除中';\r\n                postAjax( _.opts.api + '/removecomment.php', postData, function(resp){\r\n                    var data = JSON.parse(resp);\r\n                    if (data.code === 0) {\r\n                        if(data.response.isDeleted == true){\r\n                            $this.outerHTML = '';\r\n                        } else {\r\n                            alert(data.response.message);\r\n                            $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                        }\r\n                    } else if (data.code === 2) {\r\n                        alert(data.response);\r\n                        $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                    }\r\n                }, function(){\r\n                    alert('删除出错，请稍后重试');\r\n                })\r\n                clearTimeout(postEdit);\r\n            }, false)\r\n\r\n            // 编辑\r\n            $this.querySelector('.comment-item-edit').addEventListener('click',function(){\r\n                _.stat.editing = post;\r\n                _.edit(post);\r\n            }, false)\r\n        }\r\n    }\r\n\r\n    // 读取更多\r\n    iDisqus.prototype.loadMore = function(e, target){\r\n        var _ = this;\r\n        _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n        if( !_.stat.loading ){\r\n            target.classList.add('loading');\r\n            _.getlist();\r\n        }\r\n    }\r\n\r\n    // 评论框焦点\r\n    iDisqus.prototype.focus = function(e, target){\r\n        var wrapper = target.closest('.comment-form-wrapper');\r\n        wrapper.classList.add('editing');\r\n        if (wrapper.classList.contains('focus')){\r\n            wrapper.classList.remove('focus');\r\n        } else{\r\n            wrapper.classList.add('focus');\r\n        }\r\n    }\r\n\r\n    // 输入事件\r\n    iDisqus.prototype.input = function(e, target){\r\n        var _ = this;\r\n        var form = target.closest('.comment-form');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n        var wrapper = form.querySelector('.comment-form-wrapper');\r\n        var filterText = target.value.replace(/<code>.*?<\\/code>/g,'');\r\n        var urls = filterText.match(/(^|\\s|\\r|\\n)*(http:\\/\\/|https:\\/\\/)(\\w|-|\\.)*(disqus|sinaimg|giphy|imgur|instagram|twimg|twitter|youtube|youtu\\.be)((\\w|=|\\?|\\.|\\/|&|\\%|-)*)(jpg|png|gif|gallery\\/\\w+|p\\/[a-zA-Z0-9]{11}.*|status\\/\\d{19}|v=[a-zA-Z0-9]{11}|\\/[a-zA-Z0-9]{11})(\\s|$|\\n)/g);\r\n        form.querySelector('.comment-image-list').innerHTML = '';\r\n        if(!!urls){\r\n            urls.forEach(function(item, i){\r\n                item = item.replace('/\\n|\\r\\n|^\\s|\\s$/g','');\r\n                var image = _.stat.media[item];\r\n                if(!!image){\r\n                    var imageHtml = `<li class=\"comment-image-item\" data-image-url=\"${image.thumbnailUrl}\"><img class=\"comment-image-object\" src=\"https:${image.thumbnailUrl}\"></li>`;\r\n                    form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageHtml);\r\n                    wrapper.classList.add('expanded');\r\n                    return;\r\n                }\r\n                postAjax( _.opts.api + '/media.php', {url: item}, function(resp){\r\n                    var data = JSON.parse(resp);\r\n                    if(data.code == 0){\r\n                        image = data.response;\r\n                        var imageHtml = `<li class=\"comment-image-item\" data-image-url=\"${image.thumbnailUrl}\"><img class=\"comment-image-object\" src=\"https:${image.thumbnailUrl}\"></li>`;\r\n                        form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageHtml);\r\n                        _.stat.media[item] = image;\r\n                        wrapper.classList.add('expanded');\r\n                    }\r\n                }, function(){\r\n                })\r\n            })\r\n        } else {\r\n            wrapper.classList.remove('expanded');\r\n        }\r\n\r\n    }\r\n\r\n    // 提醒用户 @ mention \r\n    iDisqus.prototype.mention = function(e, target){\r\n        var _ = this;\r\n        var textarea = target;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        var showUsers = _.stat.users.filter(function(user){\r\n            var re = new RegExp(mentionText.slice(1), 'i');\r\n            return user.username.search(re) > -1;\r\n        });\r\n        if(mentionText.search(/^@\\w+$|^@$/) == 0 && showUsers.length > 0){\r\n            if( e.keyCode == 38 || e.keyCode == 40){\r\n                return;\r\n            }\r\n            var coord = _.getCaretCoord(textarea);\r\n            var list='', html = '';\r\n\r\n            showUsers.forEach(function(item, i){\r\n                list += `<li class=\"mention-user-item${(i == 0 ? ' active' : '')}\" data-username=\"${ item.username }\"><img class=\"mention-user-avatar\" src=\"${ item.avatar }\"><div class=\"mention-user-username\">${ item.username }</div><div class=\"mention-user-name\">${ item.name }</div></li>`;\r\n            })\r\n            if(!!mentionDom){\r\n                mentionDom.innerHTML = '<ul class=\"mention-user-list\">'+list+'</ul>';\r\n                mentionDom.style.left = coord.left + 'px';\r\n                mentionDom.style.top = coord.top + 'px';\r\n            } else {\r\n                html = `<div class=\"mention-user\" style=\"left:${ coord.left }px;top:${ coord.top }px\"><ul class=\"mention-user-list\">${list}</ul></div>`;\r\n                _.dom.querySelector('#idisqus').insertAdjacentHTML('beforeend', html);\r\n            }\r\n\r\n            // 鼠标悬浮\r\n            _.addListener('mention-user-item', 'mouseover', function(){\r\n                _.dom.querySelector('.mention-user-item.active').classList.remove('active');\r\n                this.classList.add('active');\r\n            })\r\n\r\n            // 鼠标点击\r\n            _.addListener('mention-user-item', 'click', function(){\r\n                var username = '@' + this.dataset.username + ' ';\r\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                mentionDom.outerHTML = '';\r\n                textarea.focus();\r\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n            })\r\n        } else if(!!mentionDom){\r\n            mentionDom.outerHTML = '';\r\n        }\r\n    }\r\n\r\n    // 获取光标坐标 https://medium.com/@_jh3y/how-to-where-s-the-caret-getting-the-xy-position-of-the-caret-a24ba372990a\r\n    iDisqus.prototype.getCaretCoord = function(textarea){\r\n        var _ = this;\r\n        var carPos = textarea.selectionEnd,\r\n            div = d.createElement('div'),\r\n            span = d.createElement('span'),\r\n            copyStyle = getComputedStyle(textarea);\r\n        [].forEach.call(copyStyle, function(prop){\r\n            div.style[prop] = copyStyle[prop];\r\n        });\r\n        div.style.position = 'absolute';\r\n        _.dom.appendChild(div);\r\n        div.textContent = textarea.value.substr(0, carPos);\r\n        span.textContent = textarea.value.substr(carPos) || '.';\r\n        div.appendChild(span);\r\n        var coords = {\r\n            'top': textarea.offsetTop - textarea.scrollTop + span.offsetTop + parseFloat(copyStyle.lineHeight),\r\n            'left': textarea.offsetLeft - textarea.scrollLeft + span.offsetLeft\r\n        };\r\n        _.dom.removeChild(div);\r\n        return coords;\r\n    }\r\n\r\n    // 键盘选择用户\r\n    iDisqus.prototype.keySelect = function(e,target){\r\n        var _ = this;\r\n        var textarea = target;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        if( !mentionDom ){\r\n            return;\r\n        }\r\n        var current = _.dom.querySelector('.mention-user-item.active')\r\n        switch(e.keyCode){\r\n            case 13:\r\n                //回车\r\n                var username = '@' + current.dataset.username + ' ';\r\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n                _.dom.querySelector('.mention-user').outerHTML = '';\r\n                e.preventDefault();\r\n                break;\r\n            case 38:\r\n                //上\r\n                if(!!current.previousSibling){\r\n                    current.previousSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            case 40:\r\n                //下\r\n                if(!!current.nextSibling){\r\n                    current.nextSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 跳到评论\r\n    iDisqus.prototype.jump = function(e, target){\r\n        var _ = this;\r\n        var hash = getLocation(target.href).hash;\r\n        var el = _.dom.querySelector('#idisqus ' + hash);\r\n        history.replaceState(undefined, undefined, hash);\r\n        window.scrollBy(0, el.getBoundingClientRect().top);\r\n        e.preventDefault();\r\n    }\r\n\r\n    // 显示父评论\r\n    iDisqus.prototype.parentShow = function(e, target){\r\n        var _ = this;\r\n        if(!!target.querySelector('.comment-item-parent')){\r\n            return;\r\n        }\r\n        var comment = _.stat.post[target.dataset.parent];\r\n        if( comment.isDeleted ){\r\n            return;\r\n        }\r\n        var message = comment.message.replace(/<[^>]*>/g, '');\r\n        var parentHtml = `<div class=\"comment-item-parent\"><a class=\"comment-item-avatar\" href=\"javascript:;\"><img src=\"${comment.avatar}\"></a><div class=\"comment-item-pmain\"><div class=\"comment-item-pheader\">${comment.name}</div><div class=\"comment-item-pcontent\" title=\"${ message }\">${ message }</div></div></div>`;\r\n        target.insertAdjacentHTML('beforeend', parentHtml);\r\n    }\r\n\r\n    // 点选表情\r\n    iDisqus.prototype.field = function(e, target){\r\n        var _ = this;\r\n        var item = target;\r\n        var form = item.closest('.comment-form');\r\n        var textarea = form.querySelector('.comment-form-textarea');\r\n        _.appendText(textarea, item.dataset.code);\r\n    }\r\n\r\n    // 显示回复框 or 取消回复框\r\n    iDisqus.prototype.show = function(e, target){\r\n        var _ = this;\r\n\r\n        var $this = target;\r\n        var item = $this.closest('.comment-item');\r\n\r\n        // 无论取消还是回复，移除已显示回复框\r\n        var box = _.dom.querySelector('.comment-item .comment-box:not([data-current-id])');\r\n        if( box ){\r\n            var $show = box.closest('.comment-item');\r\n            var cancel = $show.querySelector('.comment-item-cancel')\r\n            cancel.outerHTML = cancel.outerHTML.replace('cancel','reply');\r\n            box.outerHTML = '';\r\n        }\r\n\r\n        // 回复时，显示评论框\r\n        if( $this.className == 'comment-item-reply' ){\r\n            $this.outerHTML = $this.outerHTML.replace('reply','cancel');\r\n            var commentBox = _.box.replace(/emoji-input/g,'emoji-input-'+item.dataset.id).replace(/upload-input/g,'upload-input-'+item.dataset.id);\r\n            item.querySelector('.comment-item-children').insertAdjacentHTML('beforebegin', commentBox);\r\n            _.user.init();\r\n\r\n            item.querySelector('.comment-form-textarea').focus();\r\n        }\r\n\r\n    }\r\n\r\n    // 验证表单\r\n    iDisqus.prototype.verify = function(e, target){\r\n        var _ = this;\r\n        var $this = target;\r\n        var box  = $this.closest('.comment-box');\r\n        var $avatar = box.querySelector('.comment-avatar-image');\r\n        var $name = box.querySelector('.comment-form-name');\r\n        var $email = box.querySelector('.comment-form-email');\r\n        var alertmsg = box.querySelector('.comment-form-alert');\r\n        if($email.value == ''){\r\n            return;\r\n        }\r\n        getAjax(\r\n            _.opts.api + '/getgravatar.php?email=' + $email.value + '&name=' + $name.value,\r\n            function(resp) {\r\n                var data  = JSON.parse(resp);\r\n                if ( !data.isEmail && $this == $email) {\r\n                    _.errorTips('您所填写的邮箱地址有误。', $email);\r\n                }\r\n                if ($name.value != '') {\r\n                    $avatar.src = data.gravatar;\r\n                }\r\n            }, function(){\r\n            }\r\n        );\r\n    }\r\n\r\n    // 添加文本\r\n    iDisqus.prototype.appendText = function(textarea, text){\r\n        var _ = this;\r\n        var selStart = textarea.selectionStart;\r\n        var text = selStart == 0 ? text + ' ' : ' ' + text + ' ';\r\n        textarea.value = textarea.value.slice(0, selStart) + text + textarea.value.slice(selStart);\r\n        textarea.focus();\r\n        textarea.setSelectionRange(selStart + text.length, selStart + text.length);\r\n    }\r\n\r\n    // 上传图片\r\n    iDisqus.prototype.upload = function(e, target){\r\n        var _ = this;\r\n        var file = target;\r\n        var form = file.closest('.comment-form');\r\n        var progress = form.querySelector('.comment-image-progress');\r\n        var loaded = form.querySelector('.comment-image-loaded');\r\n        var wrapper = form.querySelector('.comment-form-wrapper');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n        if(file.files.length === 0){\r\n            return;\r\n        }\r\n\r\n        // 以文件大小识别是否为同张图片\r\n        var size = file.files[0].size;\r\n\r\n        if( size > 5*1e6 ){\r\n            alertmsg.innerHTML = '请选择 5M 以下图片。';\r\n            setTimeout(function(){\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        if( _.stat.imageSize.indexOf(size) == -1 ){\r\n            progress.style.width = '80px';\r\n        } else {\r\n            alertmsg.innerHTML = '请勿选择已存在的图片。';\r\n            setTimeout(function(){\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        // 展开图片上传界面\r\n        wrapper.classList.add('expanded');\r\n\r\n        // 图片上传请求\r\n        var data = new FormData();\r\n        data.append('file', file.files[0] );\r\n        var filename = file.files[0].name;\r\n\r\n        var $item;\r\n\r\n        var xhrUpload = new XMLHttpRequest();\r\n        xhrUpload.withCredentials = true;\r\n        xhrUpload.onreadystatechange = function(){\r\n            if(xhrUpload.readyState == 4 && xhrUpload.status == 200){\r\n                var data = JSON.parse(xhrUpload.responseText);\r\n                if( data.code == 0 ){\r\n                    _.stat.imageSize.push(size);\r\n                    var imageUrl = data.response[filename].url;\r\n                    var textarea = form.querySelector('.comment-form-textarea');\r\n                    _.appendText(textarea, imageUrl);\r\n\r\n                    var image = new Image();\r\n                    image.src = imageUrl;\r\n                    image.onload = function(){\r\n                        $item.innerHTML = '<img class=\"comment-image-object\" src=\"'+imageUrl+'\">';\r\n                        $item.dataset.imageUrl = imageUrl;\r\n                        $item.classList.remove('loading');\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '图片上传出错。';\r\n                    $item.innerHTML = '';\r\n                    if( !!form.getElementsByClassName('comment-image-item').length){\r\n                        wrapper.classList.remove('expanded');\r\n                    }\r\n                    setTimeout(function(){\r\n                        alertmsg.innerHTML = '';\r\n                    }, 3000);\r\n                }\r\n            }\r\n        };\r\n        xhrUpload.upload.addEventListener('progress', function(e){\r\n            loaded.style.width = Math.ceil((e.loaded/e.total) * 100)+ '%';\r\n        }, false);\r\n        xhrUpload.upload.addEventListener('load', function(e){\r\n            loaded.style.width = 0;\r\n            progress.style.width = 0;\r\n            var imageItem = `<li class=\"comment-image-item loading\" data-image-size=\"${ size }\">\r\n            <svg version=\"1.1\" class=\"comment-image-object\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\" style=\"enable-background: new 0 0 50 50;\" xml:space=\"preserve\">\r\n            <rect x=\"0\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            <rect x=\"8\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            <rect x=\"16\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            </svg>\r\n            </li>`;\r\n            form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageItem);\r\n            $item = form.querySelector('[data-image-size=\"'+size+'\"]');\r\n        }, false);\r\n        xhrUpload.open('POST', _.opts.api + '/upload.php', true);\r\n        xhrUpload.send(data);\r\n    }\r\n\r\n    // 移除图片\r\n    iDisqus.prototype.remove = function(e){\r\n        var _ = this;\r\n        var $item = e.currentTarget.closest('.comment-image-item');\r\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\r\n        $item.outerHTML = '';\r\n        _.stat.imageSize = [];\r\n        var imageArr = wrapper.getElementsByClassName('comment-image-item');\r\n        [].forEach.call(imageArr, function(item, i){\r\n            _.stat.imageSize[i] = item.dataset.imageSize;\r\n        });\r\n        if(_.stat.imageSize.length == 0){\r\n            wrapper.classList.remove('expanded');\r\n        }\r\n        wrapper.querySelector('.comment-image-input').value = '';\r\n    }\r\n\r\n    // 错误提示\r\n    iDisqus.prototype.errorTips = function(Text, Dom){\r\n        var _ = this;\r\n        if( _.user.logged_in == 'true' ){\r\n            _.handle.logout();\r\n        }\r\n        var idisqus = _.dom.querySelector('#idisqus');\r\n        var errorDom = _.dom.querySelector('.comment-form-error');\r\n        if(!!errorDom){\r\n            errorDom.outerHTML = '';\r\n        }\r\n        var Top = Dom.offsetTop;\r\n        var Left = Dom.offsetLeft;\r\n        var errorHtml = '<div class=\"comment-form-error\" style=\"top:'+Top+'px;left:'+Left+'px;\">'+Text+'</div>';\r\n        idisqus.insertAdjacentHTML('beforeend', errorHtml);\r\n        setTimeout(function(){\r\n            var errorDom = _.dom.querySelector('.comment-form-error');\r\n            if(!!errorDom){\r\n                errorDom.outerHTML = '';\r\n            }\r\n        }, 3000);\r\n    }\r\n\r\n    // 发表/回复评论\r\n    iDisqus.prototype.post = function(e, target){\r\n        var _ = this;\r\n        var item =  target.closest('.comment-box[data-current-id]') || target.closest('.comment-item') || target.closest('.comment-box');\r\n        var message = item.querySelector('.comment-form-textarea').value;\r\n        var parentId = !!item.dataset.id ? item.dataset.id : '';\r\n        var imgArr = item.getElementsByClassName('comment-image-item');\r\n\r\n        // 不是编辑框需预览\r\n        if( !item.dataset.currentId ){\r\n            var elName = item.querySelector('.comment-form-name');\r\n            var elEmail = item.querySelector('.comment-form-email');\r\n            var elUrl = item.querySelector('.comment-form-url');\r\n            var user = {\r\n                name: elName.value,\r\n                email: elEmail.value,\r\n                url: elUrl.value.replace(/\\s/g,''),\r\n                avatar: item.querySelector('.comment-avatar-image').src,\r\n                type: 0\r\n            }\r\n            var alertmsg = item.querySelector('.comment-form-alert');\r\n            var alertClear = function() {\r\n                setTimeout(function(){\r\n                    alertmsg.innerHTML = '';\r\n                }, 3000);\r\n            }\r\n\r\n            if(_.user.type != '1'){\r\n                if(/^\\s*$/i.test(user.name)){\r\n                    _.errorTips('名字不能为空。', elName);\r\n                    return;\r\n                }\r\n                if(/^\\s*$/i.test(user.email)){\r\n                    _.errorTips('邮箱不能为空。', elEmail);\r\n                    return;\r\n                }\r\n                if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(user.email)){\r\n                    _.errorTips('请正确填写邮箱。', elEmail);\r\n                    return;\r\n                }\r\n                if(!/^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(([A-Za-z0-9-~]+)\\.)+([A-Za-z0-9-~\\/])+$|^\\s*$/i.test(user.url)){\r\n                    _.errorTips('请正确填写网址。', elUrl);\r\n                    return;\r\n                }\r\n                _.user.submit(user);\r\n\r\n                if( !_.user.name && !_.user.email ){\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if(!_.stat.message && !_.stat.mediaHtml){\r\n                _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论……/,'');\r\n            }\r\n\r\n            if( /^\\s*$/i.test(message)){\r\n                alertmsg.innerHTML = '评论不能为空或空格。';\r\n                item.querySelector('.comment-form-textarea').focus();\r\n                return;\r\n            };\r\n\r\n            var preMessage = message;\r\n\r\n            if( !!_.opts.emoji_preview ){\r\n                preMessage = preMessage.replace(/:([-+\\w]+):/g, function (match){\r\n                    var emojiShort = match.replace(/:/g,'');\r\n                    var emojiImage = !!_.eac[emojiShort] ? `<img class=\"emojione\" width=\"24\" height=\"24\" alt=\"'+emojiShort+'\" title=\":${emojiShort}:\" src=\"${_.opts.emojiPath +_.eac[emojiShort]}.png\">` : match;\r\n                    return emojiImage;\r\n                });\r\n            } else {\r\n                _.emojiList.forEach(function(item){\r\n                    preMessage = preMessage.replace(`:${item.code}:`, `<img class=\"emojione\" width=\"24\" height=\"24\" src=\"${ _.opts.emojiPath + item.unicode }.png\" />`);\r\n                });\r\n            }\r\n\r\n            var post = {\r\n                'url': !!_.user.url ? _.user.url : '',\r\n                'isMod': false,\r\n                'username': null,\r\n                'name': _.user.name,\r\n                'avatar': _.user.avatar,\r\n                'id': 'preview',\r\n                'parent': parentId,\r\n                'createdAt': (new Date()).toJSON(),\r\n                'message': '<p>' + preMessage + '</p>',\r\n            };\r\n\r\n            _.load(post);\r\n\r\n            _.timeAgo();\r\n\r\n            // 清空或移除评论框\r\n            _.stat.message = message;\r\n            _.stat.mediaHtml = item.querySelector('.comment-image-list').innerHTML;\r\n\r\n            if( parentId ){\r\n                item.querySelector('.comment-item-cancel').click();\r\n            } else {\r\n                item.querySelector('.comment-form-textarea').value = '';\r\n                item.querySelector('.comment-image-list').innerHTML = '';\r\n                item.querySelector('.comment-form-wrapper').classList.remove('expanded','editing');\r\n            }\r\n        }\r\n\r\n        // @\r\n        var mentions = message.match(/@\\w+/g);\r\n        if( !!mentions ){\r\n            mentions = mentions.filter(function(mention) {\r\n                return _.stat.users.map(function(user) { return user.username; }).indexOf(mention.slice(1)) > -1;\r\n            });\r\n            if( mentions.length > 0 ){\r\n                var re = new RegExp('('+mentions.join('|')+')','g');\r\n                message = message.replace(re,'$1:disqus');\r\n            }\r\n        }\r\n\r\n        // POST 操作\r\n        // 编辑框则更新评论\r\n        if( !!item.dataset.currentId ){\r\n            var postData = {\r\n                id: item.dataset.currentId,\r\n                message: message,\r\n            }\r\n            postAjax( _.opts.api + '/updatecomment.php', postData, function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.message = null;\r\n                    _.stat.mediaHtml = null;\r\n                    var post = data.response;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                } else {\r\n                    // 取消编辑\r\n                    _.load(_.stat.editing)\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                }\r\n            }, function(){\r\n                // 取消编辑\r\n                _.load(_.stat.editing)\r\n                _.timeAgo();\r\n                _.stat.editing = false;\r\n            })\r\n        } else {\r\n            var postData = {\r\n                thread:  _.stat.thread.id,\r\n                parent: parentId,\r\n                message: message,\r\n                name: _.user.name,\r\n                email: _.user.email,\r\n                url:  _.user.url,\r\n                identifier: _.opts.identifier\r\n            }\r\n            postAjax( _.opts.api + '/postcomment.php', postData, function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.stat.total += 1;\r\n                    _.stat.thread = data.thread;\r\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.total + ' 条评论';\r\n                    var post = data.response;\r\n                    post.isPost = true;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    var postData = {\r\n                        post: JSON.stringify(post),\r\n                        thread: JSON.stringify(_.stat.thread),\r\n                        parent: JSON.stringify(_.stat.post[parentId]),\r\n                        code: data.verifyCode\r\n                    }\r\n                    if(!!data.verifyCode){\r\n                        // 异步发送邮件\r\n                        postAjax( _.opts.api + '/sendemail.php', postData, function(resp){\r\n                            console.info('邮件发送成功！');\r\n                        })\r\n                    }\r\n                } else if (data.code === 2) {\r\n                    alertmsg.innerHTML = data.response;\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n\r\n                    if( data.response.indexOf('author') > -1){\r\n                        _.handle.logout();\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '提交失败，请稍后重试，错误代码：' + data.code;\r\n                    alertClear();\r\n\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n                }\r\n\r\n            }, function(){\r\n                alertmsg.innerHTML = '提交出错，请稍后重试。';\r\n                alertClear();\r\n\r\n                _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                _.reEdit(item);\r\n            })\r\n        }\r\n    }\r\n\r\n    // 重新编辑\r\n    iDisqus.prototype.reEdit = function(item){\r\n        var _ = this;\r\n\r\n        if( !!item.dataset.id ){\r\n            item.querySelector('.comment-item-reply').click();\r\n        } else {\r\n            item.querySelector('.comment-form-wrapper').classList.add('editing');\r\n        }\r\n\r\n        // 重新填充文本图片\r\n        if(!!_.stat.message){\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if(!!_.stat.mediaHtml){\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n        }\r\n    }\r\n\r\n    // 编辑\r\n    iDisqus.prototype.edit = function(post){\r\n        var _ = this;\r\n        var commentBox = _.box.replace('comment-box','comment-box comment-box-'+post.id).replace(/emoji-input/g,'emoji-input-'+post.id).replace(/upload-input/g,'upload-input-'+ post.id);\r\n        var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-body');\r\n        $this.outerHTML = commentBox;\r\n        _.user.init();\r\n        var item = _.dom.querySelector('.comment-box-' + post.id);\r\n        item.dataset.currentId = post.id;\r\n        item.querySelector('.comment-form-textarea').focus();\r\n\r\n        // 取消编辑\r\n        item.querySelector('.comment-actions-form').insertAdjacentHTML('afterbegin', '<a class=\"comment-form-cancel\" href=\"javascript:;\">取消</a>')\r\n        item.querySelector('.comment-form-cancel').addEventListener('click', function(){\r\n            _.stat.editing = false;\r\n            _.load(post);\r\n            _.timeAgo();\r\n        }, false);\r\n\r\n        // 重新填充文本图片，连续回复、连续编辑会有 bug\r\n        if(!!_.stat.message){\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if(!!_.stat.mediaHtml){\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n        }\r\n\r\n    }\r\n\r\n    // Thread 初始化\r\n    iDisqus.prototype.threadInit = function(){\r\n        var _ = this;\r\n        // 自动创建\r\n        if(_.opts.autoCreate){\r\n            _.dom.querySelector('.loading-container').dataset.tips = '正在创建 Thread……';\r\n            var postData = {\r\n                url: _.opts.link,\r\n                identifier: _.opts.identifier,\r\n                title: _.opts.title,\r\n                slug: _.opts.slug,\r\n                message: _.opts.desc\r\n            }\r\n            _.threadCreate(postData);\r\n            return;\r\n        }\r\n        _.dom.querySelector('#idisqus').classList.remove('loading');\r\n        var threadForm = `<div class=\"comment-header\"><span class=\"comment-header-item\">创建 Thread</span></div>\r\n        <div class=\"comment-thread-form\">\r\n        <p>由于 Disqus 没有本页面的相关 Thread，故需先创建 Thread</p>\r\n        <div class=\"comment-form-item\"><label class=\"comment-form-label\">url:</label><input class=\"comment-form-input\" id=\"thread-url\" name=\"url\" value=\"${ _.opts.link }\" disabled /></div>\r\n        <div class=\"comment-form-item\"><label class=\"comment-form-label\">identifier:</label><input class=\"comment-form-input\" id=\"thread-identifier\" name=\"identifier\" value=\"${ _.opts.identifier }\" disabled /></div>\r\n        <div class=\"comment-form-item\"><label class=\"comment-form-label\">title:</label><input class=\"comment-form-input\" id=\"thread-title\" name=\"title\" value=\"${ _.opts.title }\" disabled /></div>\r\n        <div class=\"comment-form-item\"><label class=\"comment-form-label\">slug:</label><input class=\"comment-form-input\" id=\"thread-slug\" name=\"slug\" value=\"${ _.opts.slug }\" /></div>\r\n        <div class=\"comment-form-item\"><label class=\"comment-form-label\">message:</label><textarea class=\"comment-form-textarea\" id=\"thread-message\" name=\"message\">${ _.opts.desc }</textarea></div>\r\n        <button id=\"thread-submit\" class=\"comment-form-submit\">提交</button></div>`;\r\n        _.dom.querySelector('#idisqus').innerHTML = threadForm;\r\n    }\r\n\r\n    // 创建 Thread 事件\r\n    iDisqus.prototype.threadCreate = function(e, target){\r\n        var _ = this;\r\n        if( !!target ){\r\n            var postData = {\r\n                url: _.dom.querySelector('#thread-url').value,\r\n                identifier: _.dom.querySelector('#thread-identifier').value,\r\n                title: _.dom.querySelector('#thread-title').value,\r\n                slug: _.dom.querySelector('#thread-slug').value.replace(/[^A-Za-z0-9_-]+/g,''),\r\n                message: _.dom.querySelector('#thread-message').value\r\n            }\r\n        } else {\r\n            var postData = arguments[0];\r\n        }\r\n        postAjax( _.opts.api + '/createthread.php', postData, function(resp){\r\n            var data = JSON.parse(resp);\r\n            if( data.code === 0 ) {\r\n                alert('创建 Thread 成功，刷新后便可愉快地评论了！');\r\n                setTimeout(function(){location.reload();},2000);\r\n            } else if( data.code === 2 ) {\r\n                if (data.response.indexOf('A thread already exists with link') > -1) {\r\n                    alert(data.response.replace('A thread already exists with link,', '已存在此链接的相关 Thread，'));\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid URL') > -1) {\r\n                    alert('参数错误，无效的\\'URL\\'');\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid slug') > -1) {\r\n                    alert('参数错误，无效的\\'slug\\'');\r\n                    return;\r\n                }\r\n                alert(data.response);\r\n                return;\r\n            } else { \r\n                alert(data.response);\r\n                return;\r\n            }\r\n        }, function(){\r\n            alert('创建 Thread 出错，请稍后重试！');\r\n        })\r\n    }\r\n\r\n    // 销毁评论框\r\n    iDisqus.prototype.destroy = function(){\r\n        var _ = this;\r\n        _.dom.innerHTML = '';\r\n        delete _.box;\r\n        delete _.dom;\r\n        delete _.emojiList;\r\n        delete _.user;\r\n        delete _.handle;\r\n        delete _.opts;\r\n        delete _.stat;\r\n    }\r\n\r\n    /* CommonJS */\r\n    if (typeof require === 'function' && typeof module === 'object' && module && typeof exports === 'object' && exports)\r\n        module.exports = iDisqus;\r\n    /* AMD */\r\n    else if (typeof define === 'function' && define['amd'])\r\n        define(function () {\r\n            return iDisqus;\r\n        });\r\n    /* Global */\r\n    else\r\n        global['iDisqus'] = global['iDisqus'] || iDisqus;\r\n\r\n})(window || this);\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./src/iDisqus.js","webpack://[name]/(webpack)/buildin/module.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_RESULT__","global","document","localStorage","scripts","lasturl","length","src","isEdge","substring","lastIndexOf","navigator","userAgent","indexOf","isIE","ActiveXObject","getAjax","url","success","error","xhr","XMLHttpRequest","open","encodeURI","onreadystatechange","readyState","status","responseText","onerror","withCredentials","send","postAjax","data","params","keys","filter","k","map","encodeURIComponent","join","setRequestHeader","generateGUID","time","Number","Date","getTime","toString","guid","Math","abs","floor","random","ElementProto","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","selector","elements","this","ownerDocument","querySelectorAll","index","Boolean","closest","element","nodeType","parentNode","on","eventName","handler","addEventListener","e","target","Element","User","dom","arguments","opts","init","autologin","_","getItem","email","avatar","type","logged_in","unique","setItem","JSON","stringify","vote","parse","reactionVote","boxarr","getElementsByClassName","forEach","item","querySelector","classList","add","remove","dataset","$login","innerHTML","title","checked","$user","api","resp","code","user","response","username","submit","login","timer","popup","setInterval","closed","clearInterval","logout","removeItem","iDisqus","getElementById","slice","site","location","origin","optsUrl","replace","pathname","search","identifier","link","slug","desc","content","timeout","toggle","autoCreate","auto","relatedType","emojiPath","emoji_path","emojiList","emoji_list","unicode","emoji_preview","emojiPreview","eac","stat","current","loaded","loading","editing","offsetTop","next","message","mediaHtml","forum","thread","post","media","order","users","imageSize","disqusLoaded","disqus_config","page","callbacks","onReady","push","style","display","disabled","handle","onNewComment","comment","a","postData","id","setTimeout","console","info","timeAgo","templates","prefix","suffix","seconds","minute","minutes","hour","hours","day","days","week","weeks","month","months","year","years","template","round","$this","getAttribute","box","outerHTML","loadMore","threadCreate","threadVote","show","upload","verify","jump","mention","keySelect","field","focus","input","parentShow","selectOrder","$iDisqus","disqus","threadInit","tips","log","createElement","timestamp","now","onload","head","body","appendChild","ontimeout","abort","addListener","els","evt","func","el","count","counts","qty","commentArr","disqusUrl","href","itemLink","posts","disqusCount","loadRelated","settings","organicDiscoveryEnabled","relatedLoaded","popHtml","topPost","createdAt","loadReactions","threadReactionsEnabled","eligible","prompt","reactions","total","reaListHtml","selectedId","selected","votes","imageUrl","text","$count","reactionId","reaction","sessionStorage","getlist","documentElement","scrollTop","loadmore","load","parent","unshift","cursor","hasPrev","hasNext","iframe","width","clientWidth","height","getElementsByTagName","script","scrollTo","test","hash","scrollBy","getBoundingClientRect","top","alert","parentPostDom","parentPost","insert","isPost","html","isMod","badge","isDeleted","insertAdjacentHTML","postEdit","currentTarget","clearTimeout","edit","wrapper","contains","form","urls","match","image","imageHtml","thumbnailUrl","textarea","selStart","selectionStart","mentionIndex","mentionText","mentionDom","showUsers","re","RegExp","keyCode","coord","getCaretCoord","list","left","setSelectionRange","carPos","selectionEnd","div","span","copyStyle","getComputedStyle","prop","position","textContent","substr","coords","parseFloat","lineHeight","offsetLeft","scrollLeft","removeChild","preventDefault","previousSibling","nextSibling","getLocation","history","replaceState","undefined","parentHtml","appendText","cancel","className","commentBox","$avatar","$name","$email","isEmail","errorTips","gravatar","file","progress","alertmsg","files","size","FormData","append","$item","filename","xhrUpload","Image","ceil","imageItem","imageArr","Text","Dom","idisqus","errorDom","errorHtml","parentId","currentId","elName","elEmail","elUrl","alertClear","anonName","anonEmail","anonUrl","preMessage","emojiShort","toJSON","click","mentions","verifyCode","reEdit","likes","moderatorBadgeText","votedusers","threadForm","reload","destroy","webpackPolyfill","deprecate","paths","children"],"mappings":"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","file":"iDisqus.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"iDisqus\"] = factory();\n\telse\n\t\troot[\"iDisqus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*!\r\n * \r\n * @author fooleap\r\n * @email fooleap@gmail.com\r\n * @create 2017-06-17 20:48:25\r\n * @update 2018-10-16 23:42:23\r\n * @version 0.2.25\r\n * Copyright 2017-2018 fooleap\r\n * Released under the MIT license\r\n */\r\nrequire('./iDisqus.scss');\r\n(function (global) {\r\n    'use strict';\r\n\r\n    var d = document,\r\n        l = localStorage,\r\n        scripts = d.scripts,\r\n        lasturl = scripts[scripts.length - 1].src,\r\n        filepath = lasturl.substring(0, lasturl.lastIndexOf('/')),\r\n        isEdge = navigator.userAgent.indexOf(\"Edge\") > -1,\r\n        isIE = !!window.ActiveXObject || \"ActiveXObject\" in window;\r\n\r\n    function getLocation(href) {\r\n        var link = d.createElement('a');\r\n        link.href = href;\r\n        return link;\r\n    }\r\n\r\n    function getAjax(url, success, error) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open ('GET', encodeURI(url));\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText);\r\n            }\r\n        }\r\n        xhr.onerror = error;\r\n        xhr.withCredentials = true;\r\n        xhr.send();\r\n        return xhr;\r\n    }\r\n    \r\n    function postAjax(url, data, success, error) {\r\n        var params = typeof data == 'string' ? data : Object.keys(data).filter(function(k){\r\n            return data[k] != null;\r\n        }).map(function(k){ \r\n            return encodeURIComponent(k) + '=' + encodeURIComponent(data[k])\r\n        }).join('&');\r\n\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('POST', url);\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText); \r\n            }\r\n        };\r\n        xhr.onerror = error; \r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n        xhr.send(params);\r\n        return xhr;\r\n    }\r\n    \r\n    function generateGUID() {\r\n        var time = Number(new Date().getTime().toString().substring(3));\r\n        var guid = Math.abs(time + Math.floor(Math.random() * 1e5) - 48*1e6+Math.floor(Math.random()*1e6)).toString(32);\r\n        guid +=  Math.floor(Math.random() * 1e9).toString(32);\r\n        return guid;\r\n    }\r\n\r\n    (function (ElementProto) {\r\n        // matches & closest polyfill https://github.com/jonathantneal/closest\r\n        if (typeof ElementProto.matches !== 'function') {\r\n            ElementProto.matches = ElementProto.msMatchesSelector || ElementProto.mozMatchesSelector || ElementProto.webkitMatchesSelector || function matches(selector) {\r\n                var element = this;\r\n                var elements = (element.document || element.ownerDocument).querySelectorAll(selector);\r\n                var index = 0;\r\n\r\n                while (elements[index] && elements[index] !== element) {\r\n                    ++index;\r\n                }\r\n\r\n                return Boolean(elements[index]);\r\n            };\r\n        }\r\n\r\n        if (typeof ElementProto.closest !== 'function') {\r\n            ElementProto.closest = function closest(selector) {\r\n                var element = this;\r\n\r\n                while (element && element.nodeType === 1) {\r\n                    if (element.matches(selector)) {\r\n                        return element;\r\n                    }\r\n\r\n                    element = element.parentNode;\r\n                }\r\n\r\n                return null;\r\n            };\r\n        }\r\n\r\n        // 事件委托\r\n        ElementProto.on = function on(eventName, selector, handler) {\r\n            this.addEventListener(eventName, function(e) {\r\n                for (var target = e.target; target && target != this; target = target.parentNode) {\r\n                    if (target.matches(selector)) {\r\n                        handler.call(null, e, target);\r\n                        break;\r\n                    }\r\n                }\r\n            }, true);\r\n        };\r\n\r\n    })(window.Element.prototype);\r\n\r\n    // 访客信息\r\n    var User = function () {\r\n        this.dom = arguments[0];\r\n        this.opts = arguments[1];\r\n        this.init();\r\n        this.autologin();\r\n    }\r\n\r\n    User.prototype = {\r\n        // 初始化访客信息\r\n        init: function(){\r\n            var _ = this;\r\n            // 读取访客信息\r\n            _.name = l.getItem('name');\r\n            _.email = l.getItem('email');\r\n            _.url = l.getItem('url');\r\n            _.avatar = l.getItem('avatar');\r\n            _.type = l.getItem('type');\r\n            _.logged_in = l.getItem('logged_in');\r\n            _.unique = l.getItem('disqus_unique')\r\n            if( !l.getItem('vote') ){\r\n                l.setItem('vote', JSON.stringify({}));\r\n            }\r\n            if( !l.getItem('reaction_vote') ){\r\n                l.setItem('reaction_vote', JSON.stringify({}));\r\n            }\r\n            _.vote = JSON.parse(l.getItem('vote'));\r\n            _.reactionVote = JSON.parse(l.getItem('reaction_vote'));\r\n\r\n            var boxarr = _.dom.getElementsByClassName('comment-box');\r\n            if( _.logged_in == 'true' ) {\r\n                [].forEach.call(boxarr,function(item){\r\n                    if(_.type == '1'){\r\n                        item.querySelector('.comment-form-wrapper').classList.add('logged-in');\r\n                    }\r\n                    item.querySelector('.comment-form-name').value = _.name;\r\n                    item.querySelector('.comment-form-email').value = _.email;\r\n                    item.querySelector('.comment-form-url').value = _.url;\r\n                    item.querySelector('.comment-avatar-image').src = _.avatar;\r\n                });\r\n            } else {\r\n                [].forEach.call(boxarr,function(item){\r\n                    item.querySelector('.comment-form-wrapper').classList.remove('logged-in');\r\n                    item.querySelector('.comment-form-name').value = '';\r\n                    item.querySelector('.comment-form-email').value = '';\r\n                    item.querySelector('.comment-form-url').value = '';\r\n                    item.querySelector('.comment-avatar-image').src = _.dom.querySelector('.comment-avatar-image').dataset.avatar;\r\n                });\r\n                l.setItem('logged_in', 'false');\r\n            }\r\n\r\n            if(_.type == '1' &&  _.logged_in == 'true'){\r\n                var $login = _.dom.querySelector('.comment-login');\r\n                if(!!$login){\r\n                    $login.innerHTML = _.name + '<label class=\"comment-logout\"  title=\"退出\" for=\"comment-user\">退出登录</label>';\r\n                    $login.title = _.name;\r\n                    $login.classList.add('comment-user');\r\n                    $login.classList.remove('comment-login');\r\n                    _.dom.querySelector('#comment-user').checked = false;\r\n                }\r\n            } else {\r\n                var $user = _.dom.querySelector('.comment-user');\r\n                if(!!$user){\r\n                    $user.innerHTML = '登录';\r\n                    $user.title = '使用 Disqus 帐号授权登录';\r\n                    $user.classList.add('comment-login');\r\n                    $user.classList.remove('comment-user');\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // 自动登录\r\n        autologin: function(){\r\n            var _ = this;\r\n            getAjax( _.opts.api +'/user.php', function(resp){\r\n                var data = JSON.parse(resp);\r\n                if( data.code == 0 ){\r\n                    var user = data.response;\r\n                    _.avatar = user.avatar;\r\n                    _.name = user.name;\r\n                    _.username = user.username;\r\n                    _.url = user.url;\r\n                    _.type = user.type\r\n                    _.submit();\r\n                } else {\r\n                    if( _.type == '1' ){\r\n                        l.setItem('logged_in', 'false');\r\n                        _.init();\r\n                    } else {\r\n                        l.setItem('type', '0');\r\n                        if( !_.unique ){\r\n                            l.setItem('disqus_unique', generateGUID());\r\n                        }\r\n                        _.init();\r\n                    }\r\n                }\r\n            }, function(){\r\n            })\r\n        },\r\n\r\n        // 登录\r\n        login: function(){\r\n\r\n            var _ = this;\r\n            var popup = window.open(_.opts.api+'/login.php', 'Disqus Oauth', 'width=470,height=508');\r\n            var timer;\r\n            function isLogged(){\r\n                if (!popup || !popup.closed) return;\r\n                clearInterval(timer);\r\n                _.user.autologin();\r\n            }\r\n            timer = setInterval(isLogged, 100);\r\n\r\n        },\r\n\r\n        // 退出登录\r\n        logout: function(){\r\n            var _ = this;\r\n            postAjax( _.opts.api + '/logout.php', {}, function(resp){\r\n                l.setItem('logged_in', 'false');\r\n                l.removeItem('type');\r\n                l.removeItem('email');\r\n                l.removeItem('avatar');\r\n                l.removeItem('name');\r\n                l.removeItem('url');\r\n                l.removeItem('disqus_unique');\r\n                l.removeItem('vote');\r\n                l.removeItem('reaction_vote');\r\n                _.user.init();\r\n            })\r\n        },\r\n\r\n        // 提交访客信息\r\n        submit: function(){\r\n            var _ = this;\r\n            l.setItem('email', _.email);\r\n            l.setItem('type', _.type);\r\n            l.setItem('name', _.name);\r\n            l.setItem('url', _.url);\r\n            l.setItem('avatar', _.avatar);\r\n            l.setItem('disqus_unique', _.unique);\r\n            l.setItem('logged_in', 'true');\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    var iDisqus = function () {\r\n        var _ = this;\r\n\r\n        // 配置\r\n        _.opts = typeof(arguments[1]) == 'object' ? arguments[1] : arguments[0];\r\n        _.dom =  d.getElementById(typeof(arguments[0]) == 'string' ? arguments[0] : 'comment');\r\n        _.opts.api = _.opts.api.slice(-1) == '/' ? _.opts.api.slice(0,-1) : _.opts.api;\r\n        _.opts.site = _.opts.site || location.origin;\r\n        if(!!_.opts.url){\r\n            var optsUrl = _.opts.url.replace(_.opts.site, '');\r\n            _.opts.url = optsUrl.slice(0, 1) != '/' ? '/' + optsUrl : optsUrl;\r\n        } else if(isEdge || isIE) {\r\n            _.opts.url = encodeURI(location.pathname) + encodeURI(location.search);\r\n        } else {\r\n            _.opts.url = location.pathname + location.search;\r\n        }\r\n        _.opts.identifier = _.opts.identifier || _.opts.url;\r\n        _.opts.link = _.opts.site + _.opts.url; \r\n        _.opts.title = _.opts.title || d.title;\r\n        _.opts.slug = !!_.opts.slug ? _.opts.slug.replace(/[^A-Za-z0-9_-]+/g,'') : '';\r\n        _.opts.desc =  _.opts.desc || (!!d.querySelector('[name=\"description\"]') ? d.querySelector('[name=\"description\"]').content : '');\r\n        _.opts.mode = _.opts.mode || 1;\r\n        _.opts.timeout = _.opts.timeout || 3000;\r\n        _.opts.toggle = !!_.opts.toggle ? d.getElementById(_.opts.toggle) : null;\r\n        _.opts.autoCreate = !!_.opts.autoCreate || !!_.opts.auto;\r\n        _.opts.relatedType = _.opts.relatedType || 'Related'\r\n\r\n        // emoji 表情\r\n        _.opts.emojiPath = _.opts.emojiPath || _.opts.emoji_path || 'https://assets-cdn.github.com/images/icons/emoji/unicode/';\r\n        _.emojiList = _.opts.emojiList || _.opts.emoji_list || [{\r\n            code:'smile',\r\n            title:'笑脸',\r\n            unicode:'1f604'\r\n        },{\r\n            code:'mask',\r\n            title:'生病',\r\n            unicode:'1f637'\r\n        },{\r\n            code:'joy',\r\n            title:'破涕为笑',\r\n            unicode:'1f602'\r\n        },{\r\n            code:'stuck_out_tongue_closed_eyes',\r\n            title:'吐舌',\r\n            unicode:'1f61d'\r\n        },{\r\n            code:'flushed',\r\n            title:'脸红',\r\n            unicode:'1f633'\r\n        },{\r\n            code:'scream',\r\n            title:'恐惧',\r\n            unicode:'1f631'\r\n        },{\r\n            code:'pensive',\r\n            title:'失望',\r\n            unicode:'1f614'\r\n        },{\r\n            code:'unamused',\r\n            title:'无语',\r\n            unicode:'1f612'\r\n        },{\r\n            code:'grin',\r\n            title:'露齿笑',\r\n            unicode:'1f601'\r\n        },{\r\n            code:'heart_eyes',\r\n            title:'色',\r\n            unicode:'1f60d'\r\n        },{\r\n            code:'sweat',\r\n            title:'汗',\r\n            unicode:'1f613'\r\n        },{\r\n            code:'smirk',\r\n            title:'得意',\r\n            unicode:'1f60f'\r\n        },{\r\n            code:'relieved',\r\n            title:'满意',\r\n            unicode:'1f60c'\r\n        },{\r\n            code:'rolling_eyes',\r\n            title:'翻白眼',\r\n            unicode:'1f644'\r\n        },{\r\n            code:'ok_hand',\r\n            title:'OK',\r\n            unicode:'1f44c'\r\n        },{\r\n            code:'v',\r\n            title:'胜利',\r\n            unicode:'270c'\r\n        }];\r\n        \r\n        if(!!_.opts.emoji_preview || !!_.opts.emojiPreview ){\r\n            getAjax(_.opts.api +'/eac.php', function(resp){\r\n                _.eac = JSON.parse(resp);\r\n            }, function(){\r\n            })\r\n        }\r\n\r\n        // 默认状态\r\n        _.stat = {\r\n            current: 'idisqus', // 当前显示评论框\r\n            loaded: false,      // 评论框已加载\r\n            loading: false,     // 评论加载中\r\n            editing: false,     // 评论编辑中\r\n            offsetTop: 0,       // 高度位置\r\n            next: null,         // 下条评论\r\n            message: null,      // 新评论\r\n            mediaHtml: null,    // 新上传图片\r\n            forum: {},          // 站点信息\r\n            thread: {},         // 文章信息\r\n            post: {},           // 评论数据\r\n            media: {},          // 媒体信息\r\n            root: [],           // 根评论\r\n            order: 'desc',      // 排序\r\n            users: [],          // Disqus 会员\r\n            imageSize: [],      // 已上传图片大小\r\n            disqusLoaded: false // Disqus 已加载\r\n        };\r\n\r\n        // Disqus 评论框设置\r\n        window.disqus_config = function () {\r\n            this.page.identifier = _.opts.identifier;\r\n            this.page.title = _.opts.title;\r\n            this.page.url = _.opts.link;\r\n            this.callbacks.onReady.push(function() {\r\n                _.stat.current = 'disqus';\r\n                _.stat.disqusLoaded = true;\r\n                _.dom.querySelector('#idisqus').style.display = 'none';\r\n                _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n                if( _.opts.mode == 3 && !!_.opts.toggle) {\r\n                    _.opts.toggle.disabled = '';\r\n                    _.opts.toggle.checked = true;\r\n                    _.opts.toggle.addEventListener('change', _.handle.toggle, false);\r\n                }\r\n            });\r\n            // 原生评论框发邮件\r\n            this.callbacks.onNewComment = [function(comment, a) { \r\n                var postData = {\r\n                    id: comment.id\r\n                }\r\n                // 异步发送邮件\r\n                setTimeout(function(){\r\n                    postAjax( _.opts.api + '/sendemail.php', postData, function(resp){\r\n                        console.info('邮件发送成功！');\r\n                    })\r\n                }, 2000);\r\n            }];\r\n        }\r\n\r\n        // 自动初始化\r\n        if( !!_.opts.init ){\r\n            _.init();\r\n            //console.log(_);\r\n        }\r\n    }\r\n\r\n    // TimeAgo https://coderwall.com/p/uub3pw/javascript-timeago-func-e-g-8-hours-ago\r\n    iDisqus.prototype.timeAgo = function() {\r\n\r\n        var _ = this;\r\n        var templates = {\r\n            prefix: \"\",\r\n            suffix: \"前\",\r\n            seconds: \"几秒\",\r\n            minute: \"1分钟\",\r\n            minutes: \"%d分钟\",\r\n            hour: \"1小时\",\r\n            hours: \"%d小时\",\r\n            day: \"1天\",\r\n            days: \"%d天\",\r\n            week: \"1周\",\r\n            weeks: \"%d周\",\r\n            month: \"1个月\",\r\n            months: \"%d个月\",\r\n            year: \"1年\",\r\n            years: \"%d年\"\r\n        };\r\n        var template = function (t, n) {\r\n            return templates[t] && templates[t].replace(/%d/i, Math.abs(Math.round(n)));\r\n        };\r\n\r\n        var timer = function (time) {\r\n            if (!time) return;\r\n            time = time.replace(/\\.\\d+/, \"\"); // remove milliseconds\r\n            time = time.replace(/-/, \"/\").replace(/-/, \"/\");\r\n            time = time.replace(/T/, \" \").replace(/Z/, \" UTC\");\r\n            time = time.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\r\n            time = new Date(time * 1000 || time);\r\n\r\n            var now = new Date();\r\n            var seconds = ((now.getTime() - time) * .001) >> 0;\r\n            var minutes = seconds / 60;\r\n            var hours = minutes / 60;\r\n            var days = hours / 24;\r\n            var weeks = days / 7;\r\n            var months = days / 30;\r\n            var years = days / 365;\r\n\r\n            return templates.prefix + ( seconds < 45 && template('seconds', seconds) || seconds < 90 && template('minute', 1) || minutes < 45 && template('minutes', minutes) || minutes < 90 && template('hour', 1) || hours < 24 && template('hours', hours) || hours < 42 && template('day', 1) || days < 30 && template('days', days) || days < 45 && template('month', 1) || days < 365 && template('months', months) || years < 1.5 && template('year', 1) || template('years', years)) + templates.suffix;\r\n        };\r\n\r\n        var elements = _.dom.querySelectorAll('time[datetime]');\r\n        for (var i in elements) {\r\n            var $this = elements[i];\r\n            if (typeof $this === 'object') {\r\n                $this.title = new Date($this.getAttribute('datetime'));\r\n                $this.innerHTML = timer($this.getAttribute('datetime'));\r\n            }\r\n        }\r\n\r\n        // update time every minute\r\n        setTimeout(_.timeAgo.bind(_), 60000);\r\n\r\n    }\r\n\r\n    // 初始化评论框\r\n    iDisqus.prototype.init = function(){\r\n        var _ = this;\r\n        if(!_.dom){\r\n            //console.log('该页面没有评论框！');\r\n            return\r\n        }\r\n        // 表情\r\n        var emojiList = '';\r\n        _.emojiList.forEach(function(item){\r\n            emojiList += '<li class=\"emojione-item\" title=\"'+ item.title+'\" data-code=\":'+item.code+':\"><img class=\"emojione-item-image\" src=\"'+_.opts.emojiPath + item.unicode+'.png\" /></li>';\r\n        })\r\n        _.dom.innerHTML = `<div class=\"comment init\" id=\"idisqus\">\r\n            <div class=\"comment-reaction\">\r\n                <div class=\"comment-reaction-header\">\r\n                    <div class=\"comment-reaction-prompt\"></div>\r\n                    <div class=\"comment-reaction-total\"></div>\r\n                </div>\r\n                <div class=\"comment-reaction-list\"></div>\r\n            </div>\r\n            <div class=\"init-container\" data-tips=\"正在初始化……\"><svg class=\"init-bg\" width=\"72\" height=\"72\" viewBox=\"0 0 720 720\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path class=\"ring\" fill=\"none\" stroke=\"#9d9ea1\" d=\"M 0 -260 A 260 260 0 1 1 -80 -260\" transform=\"translate(400,400)\" stroke-width=\"50\" /><polygon transform=\"translate(305,20)\" points=\"50,0 0,100 18,145 50,82 92,145 100,100\" style=\"fill:#9d9ea1\"/></svg></div>\r\n            <div class=\"comment-header\">\r\n                <div class=\"comment-header-primary\">\r\n                    <span class=\"comment-header-item\" id=\"comment-count\">评论</span>\r\n                    <a class=\"comment-header-item\" id=\"comment-link\" target=\"_blank\">在线讨论</a>\r\n                </div>\r\n                <div class=\"comment-header-menu\">\r\n                    <input class=\"comment-header-checkbox\" type=\"checkbox\" id=\"comment-user\">\r\n                    <label class=\"comment-header-item comment-login\" title=\"使用 Disqus 帐号授权登录\" for=\"comment-user\">登录</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"comment-navbar\">\r\n                <div class=\"comment-navbar-item\">\r\n                    <a class=\"comment-recommend\" href=\"javascript:;\"><svg t=\"1537508059126\" class=\"icon\" style=\"\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"3234\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"24\" height=\"24\"><path d=\"M489.993 887.107 177.906 586.021c-4.002-3.501-114.033-104.031-114.033-224.063 0-146.54 89.526-234.065 239.069-234.065 87.523 0 169.546 69.019 209.058 108.03 39.512-39.011 121.535-108.03 209.059-108.03 149.542 0 239.068 87.525 239.068 234.065 0 120.033-110.031 220.563-114.533 225.065L534.007 887.107c-6 6-14.003 9-22.007 9C503.997 896.107 495.993 893.107 489.993 887.107z\" p-id=\"3235\"></path></svg><span class=\"comment-recommend-text\">推荐</span><span class=\"comment-recommend-count\"></span></a>\r\n                </div>\r\n                <div class=\"comment-navbar-item comment-order\">\r\n                  <input class=\"comment-order-radio\" id=\"order-popular\" type=\"radio\" name=\"comment-order\" value=\"popular\" />\r\n                  <label class=\"comment-order-label\" for=\"order-popular\" title=\"按评分高低排序\">最佳</label>\r\n                  <input class=\"comment-order-radio\" id=\"order-desc\" type=\"radio\" name=\"comment-order\" value=\"desc\" />\r\n                  <label class=\"comment-order-label\" for=\"order-desc\" title=\"按从新到旧排序\">最新</label>\r\n                  <input class=\"comment-order-radio\" id=\"order-asc\" type=\"radio\" name=\"comment-order\" value=\"asc\" />\r\n                  <label class=\"comment-order-label\" for=\"order-asc\" title=\"按从旧到新排序\">最早</label>\r\n                </div>\r\n            </div>\r\n            <div class=\"comment-box\">\r\n                <div class=\"comment-avatar avatar\"><img class=\"comment-avatar-image\" src=\"//a.disquscdn.com/images/noavatar92.png\" data-avatar=\"//a.disquscdn.com/images/noavatar92.png\"></div>\r\n                <div class=\"comment-form\">\r\n                    <div class=\"comment-form-wrapper\">\r\n                        <textarea class=\"comment-form-textarea\" placeholder=\"加入讨论……\"></textarea>\r\n                        <div class=\"comment-form-alert\"></div>\r\n                        <div class=\"comment-image\">\r\n                            <ul class=\"comment-image-list\"></ul>\r\n                            <div class=\"comment-image-progress\"><div class=\"comment-image-loaded\"></div></div>\r\n                        </div>\r\n        \r\n                        <div class=\"comment-actions\">\r\n        \r\n                            <div class=\"comment-actions-group\">\r\n                                <input id=\"emoji-input\" class=\"comment-actions-input\" type=\"checkbox\">\r\n                                <label class=\"comment-actions-label emojione\" for=\"emoji-input\">\r\n                                    <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <g>\r\n                                            <title>选择表情</title>\r\n                                            <path d=\"M512 1024c-282.713043 0-512-229.286957-512-512s229.286957-512 512-512c282.713043 0 512 229.286957 512 512S792.486957 1024 512 1024zM512 44.521739c-258.226087 0-467.478261 209.252174-467.478261 467.478261 0 258.226087 209.252174 467.478261 467.478261 467.478261s467.478261-209.252174 467.478261-467.478261C979.478261 253.773913 768 44.521739 512 44.521739z\"></path>\r\n                                            <path d=\"M801.391304 554.295652c0 160.278261-129.113043 289.391304-289.391304 289.391304s-289.391304-129.113043-289.391304-289.391304L801.391304 554.295652z\"></path>\r\n                                            <path d=\"M674.504348 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\r\n                                            <path d=\"M347.269565 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\r\n                                        </g>\r\n                                    </svg>\r\n                                    <ul class=\"emojione-list\">${ emojiList }</ul>\r\n                                </label>\r\n                                <input id=\"upload-input\" class=\"comment-actions-input comment-image-input\" type=\"file\" accept=\"image/*\" name=\"file\">\r\n                                <label class=\"comment-actions-label\" for=\"upload-input\">\r\n                                    <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <g>\r\n                                            <title>上传图片</title>\r\n                                            <path d=\"M15.515152 15.515152 15.515152 15.515152 15.515152 15.515152Z\"></path>\r\n                                            <path d=\"M15.515152 139.636364l0 806.787879 992.969697 0 0-806.787879-992.969697 0zM946.424242 884.363636l-868.848485 0 0-682.666667 868.848485 0 0 682.666667zM698.181818 356.848485c0-51.417212 41.673697-93.090909 93.090909-93.090909s93.090909 41.673697 93.090909 93.090909c0 51.417212-41.673697 93.090909-93.090909 93.090909s-93.090909-41.673697-93.090909-93.090909zM884.363636 822.30303l-744.727273 0 186.181818-496.484848 248.242424 310.30303 124.121212-93.090909z\"></path>\r\n                                        </g>\r\n                                    </svg>\r\n                                </label>\r\n                            </div>\r\n        \r\n                            <div class=\"comment-actions-form\">\r\n                                <button class=\"comment-form-submit\">\r\n                                    <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n                                        <path d=\"M565.747623 792.837176l260.819261 112.921839 126.910435-845.424882L66.087673 581.973678l232.843092 109.933785 562.612725-511.653099-451.697589 563.616588-5.996574 239.832274L565.747623 792.837176z\" fill=\"#ffffff\"></path>\r\n                                    </svg>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"comment-form-user\">\r\n                        <form class=\"comment-form-guest\"><input class=\"comment-form-input comment-form-name\" type=\"text\" name=\"name\" placeholder=\"名字（必填）\" autocomplete=\"name\" /><input class=\"comment-form-input comment-form-email\" type=\"email\" name=\"email\" placeholder=\"邮箱（必填）\" autocomplete=\"email\" /><input class=\"comment-form-input comment-form-url\" type=\"url\" name=\"url\" placeholder=\"网址（可选）\" autocomplete=\"url\" /></form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ul id=\"comments\" class=\"comment-list\" data-tips=\"评论加载中……\"></ul>\r\n            <a href=\"javascript:;\" class=\"comment-loadmore hide\">加载更多</a>\r\n            <div class=\"comment-related\"></div>\r\n        </div>\r\n        <div class=\"comment\" id=\"disqus_thread\"></div>`;\r\n\r\n        _.user = new User(_.dom,_.opts);\r\n        _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论……/,'');\r\n        _.handle = {\r\n            logout: _.user.logout.bind(_),\r\n            login: _.user.login.bind(_),\r\n            loadMore: _.loadMore.bind(_),\r\n            post: _.post.bind(_),\r\n            threadCreate: _.threadCreate.bind(_),\r\n            threadVote: _.threadVote.bind(_),\r\n            reactionVote: _.reactionVote.bind(_),\r\n            remove: _.remove.bind(_),\r\n            show: _.show.bind(_),\r\n            toggle: _.toggle.bind(_),\r\n            upload: _.upload.bind(_),\r\n            verify: _.verify.bind(_),\r\n            jump: _.jump.bind(_),\r\n            mention: _.mention.bind(_),\r\n            keySelect: _.keySelect.bind(_),\r\n            field: _.field.bind(_),\r\n            focus: _.focus,\r\n            input: _.input.bind(_),\r\n            parentShow: _.parentShow.bind(_),\r\n            selectOrder: _.selectOrder.bind(_)\r\n        };\r\n\r\n        var $iDisqus = _.dom.querySelector('#idisqus');\r\n        $iDisqus.on('blur','.comment-form-textarea', _.handle.focus);\r\n        $iDisqus.on('focus','.comment-form-textarea', _.handle.focus);\r\n        $iDisqus.on('input','.comment-form-textarea', _.handle.input);\r\n        $iDisqus.on('propertychange','.comment-form-textarea', _.handle.input);\r\n        $iDisqus.on('keyup','.comment-form-textarea', _.handle.mention);\r\n        $iDisqus.on('keydown', '.comment-form-textarea', _.handle.keySelect);\r\n        $iDisqus.on('blur', '.comment-form-name', _.handle.verify);\r\n        $iDisqus.on('blur', '.comment-form-email',  _.handle.verify);\r\n        $iDisqus.on('click', '.comment-form-submit',  _.handle.post);\r\n        $iDisqus.on('click', '.comment-login',  _.handle.login);\r\n        $iDisqus.on('change', '.comment-image-input',  _.handle.upload);\r\n        $iDisqus.on('click', '.emojione-item',  _.handle.field);\r\n        $iDisqus.on('click', '.comment-logout', _.handle.logout);\r\n        $iDisqus.on('click', '.comment-item-reply', _.handle.show);\r\n        $iDisqus.on('click', '.comment-item-cancel',  _.handle.show);\r\n        $iDisqus.on('click','.comment-item-avatar', _.handle.jump);\r\n        $iDisqus.on('click','.comment-item-pname', _.handle.jump);\r\n        $iDisqus.on('mouseover','.comment-item-pname', _.handle.parentShow);\r\n        $iDisqus.on('click', '.comment-loadmore', _.handle.loadMore);\r\n        $iDisqus.on('click', '#thread-submit', _.handle.threadCreate);\r\n        $iDisqus.on('click', '.comment-recommend', _.handle.threadVote);\r\n        $iDisqus.on('click', '.comment-reaction-btn:not(.selected)', _.handle.reactionVote);\r\n        $iDisqus.on('change', '.comment-order-radio', _.handle.selectOrder);\r\n\r\n        switch(_.opts.mode){\r\n            case 1:\r\n                _.disqus();\r\n                break;\r\n            case 2: \r\n                _.threadInit();\r\n                break;\r\n            case 3: \r\n                _.threadInit();\r\n                _.disqus();\r\n                break;\r\n            default:\r\n                _.disqus();\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 切换评论框\r\n    iDisqus.prototype.toggle = function(){\r\n        var _ = this;\r\n        if( _.stat.current == 'disqus' ){\r\n            _.stat.current = 'idisqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'block';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        } else {\r\n            _.disqus();\r\n        }\r\n    }\r\n\r\n    // 加载 Disqus 评论\r\n    iDisqus.prototype.disqus = function(){\r\n        var _ = this;\r\n        var _tips = _.dom.querySelector('.init-container').dataset.tips;\r\n        if(_.opts.site != location.origin){\r\n            console.log('本地环境不加载 Disqus 评论框！');\r\n            if( _.opts.mode == 1 ){\r\n                _.threadInit();\r\n            }\r\n            return;\r\n        }\r\n        if(!_.stat.disqusLoaded ){\r\n            _tips = '尝试连接 Disqus……';\r\n\r\n            var s = d.createElement('script');\r\n            s.src = '//'+_.opts.forum+'.disqus.com/embed.js';\r\n            s.dataset.timestamp = Date.now();\r\n            s.onload = function(){\r\n                _.stat.disqusLoaded = true;\r\n                _tips = '连接成功，加载 Disqus 评论框……'\r\n            } \r\n            s.onerror = function(){\r\n                if( _.opts.mode == 1){\r\n                    _tips = '连接失败，加载简易评论框……';\r\n                    _.threadInit();\r\n                }\r\n            }\r\n\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('GET', '//disqus.com/next/config.json?' + Date.now(), true);\r\n            xhr.timeout = _.opts.timeout;\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4 && xhr.status == 200) {\r\n                    (d.head || d.body).appendChild(s);\r\n                }\r\n            }\r\n            xhr.ontimeout = function () {\r\n                xhr.abort();\r\n                if( _.opts.mode == 1){\r\n                    _tips = '连接超时，加载简易评论框……';\r\n                    _.threadInit();\r\n                }\r\n            }\r\n            xhr.onerror = function() {\r\n                if( _.opts.mode == 1){\r\n                    _tips = '连接失败，加载简易评论框……';\r\n                    _.threadInit();\r\n                }\r\n            }\r\n            xhr.send();\r\n        } else {\r\n            _.stat.current = 'disqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'none';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n        }\r\n    }\r\n\r\n    // 添加事件监听\r\n    iDisqus.prototype.addListener = function (els, evt, func){\r\n        var _ = this;\r\n        var el = _.dom.getElementsByClassName(els);\r\n        [].forEach.call(el, function(item){\r\n            item.addEventListener(evt, func, false);\r\n        });\r\n    }\r\n\r\n    // 评论计数\r\n    iDisqus.prototype.count = function (){\r\n        var _ = this;\r\n        var counts = d.querySelectorAll('[data-disqus-url]');\r\n        var qty = counts.length;\r\n        if(qty > 0){\r\n            var commentArr = [];\r\n            for( var i = 0; i < qty; i++){\r\n                commentArr[i] = counts[i].dataset.disqusUrl.replace(_.opts.site, '');\r\n            }\r\n            getAjax(\r\n                _.opts.api + '/count.php?links=' + commentArr.join(','), \r\n                function(resp) {\r\n                    var data  = JSON.parse(resp);\r\n                    var posts = data.response;\r\n                    posts.forEach(function(item){\r\n                        var link = document.createElement('a');\r\n                        link.href = item.link;\r\n                        var itemLink = link.href.replace(link.origin, '');\r\n                        var el = d.querySelector('[data-disqus-url$=\"'+itemLink+'\"]')\r\n                        if(!!el ){\r\n                            el.innerHTML = item.posts;\r\n                            el.dataset.disqusCount = item.posts;\r\n                        }\r\n                    });\r\n                }, function(){\r\n                    console.log('获取数据失败！')\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    // 加载热门话题\r\n    iDisqus.prototype.loadRelated = function(){\r\n        var _ = this;\r\n        if( _.stat.forum.settings.organicDiscoveryEnabled == false || _.stat.relatedLoaded){\r\n            return;\r\n        }\r\n        getAjax(\r\n            _.opts.api + '/list'+ _.opts.relatedType +'.php' + '?thread=' + _.stat.thread.id, \r\n            function(resp) {\r\n                var data = JSON.parse(resp);\r\n                if(data.code == 0){\r\n                    _.stat.relatedLoaded = true;\r\n                    var threads = data.response;\r\n                    var popHtml = '';\r\n                    threads.forEach(function(item){\r\n                        var message = item.topPost.message.replace(/<[^>]*>/g, '');\r\n                        popHtml += `<li class=\"related-item\">\r\n                        <a class=\"related-item-link\" href=\"${item.link}\" title=\"${item.title}\">\r\n                        <div class=\"related-item-title\">${item.title}</div>\r\n                        <div class=\"related-item-desc\">${item.posts}条评论<span class=\"related-item-bullet\"> • </span><time class=\"related-item-time\" datetime=\"${item.createdAt}\"></time></div></a>\r\n                        <a class=\"related-item-link\" href=\"${item.link}?#comment-${item.topPost.id}\" title=\"${ message }\">\r\n                        <div class=\"related-item-post\">\r\n                        <div class=\"related-item-avatar\"><img src=\"${item.topPost.avatar}\" /></div>\r\n                        <div class=\"related-item-main\">\r\n                        <div class=\"related-item-name\">${ item.topPost.name }</div>\r\n                        <div class=\"related-item-message\">${ message }</div>\r\n                        </div>\r\n                        </div></a>\r\n                        </li>`;\r\n                    });\r\n                    popHtml = `<div class=\"comment-related-title\">在<span class=\"comment-related-forumname\">${_.stat.forum.name}</span>上还有</div><div class=\"comment-related-content\"><ul class=\"related-list\">${popHtml}</ul></div>`;\r\n                    _.dom.querySelector('.comment-related').innerHTML = popHtml;\r\n                    _.timeAgo();\r\n                }\r\n            },function(){\r\n                console.log('获取数据失败！')\r\n            }\r\n        );\r\n    };\r\n\r\n    // 加载反应\r\n    iDisqus.prototype.loadReactions = function(){\r\n        var _ = this;\r\n        if(_.stat.forum.settings.threadReactionsEnabled == false){\r\n            return;\r\n        }\r\n        getAjax( _.opts.api + '/threadReactionsLoadReations.php' + '?thread=' + _.stat.thread.id, function(resp) {\r\n            var data  = JSON.parse(resp);\r\n            if( data.response.eligible ){\r\n                _.dom.querySelector('.comment-reaction-prompt').innerHTML = data.response.prompt;\r\n                var reactions = data.response.reactions;\r\n                var total = 0;\r\n                var reaListHtml = '';\r\n                var selectedId = _.user.reactionVote[_.stat.thread.id];\r\n                selectedId = selectedId || (!!data.selected ? data.selected.id : 0);\r\n                reactions.forEach(function(item){\r\n                    total += item.votes;\r\n                    reaListHtml += `<li class=\"comment-reaction-item\"><a class=\"comment-reaction-btn${(selectedId == item.id  ? ' selected' : '')}\" data-id=\"${ item.id }\" href=\"javascript:;\"><img class=\"comment-reaction-image\" src=\"${ item.imageUrl }\"> ${ item.text }</a><div class=\"comment-reaction-count\">${ item.votes }</div></li>`;\r\n                })\r\n                _.dom.querySelector('.comment-reaction-list').innerHTML = reaListHtml;\r\n                _.dom.querySelector('.comment-reaction-total').innerHTML = total + ' 人次参与';\r\n            }\r\n        },function(){})\r\n\r\n    };\r\n\r\n    // 反应打分事件\r\n    iDisqus.prototype.reactionVote = function(e, target){\r\n        var _ = this;\r\n        var $reaction = target.closest('.comment-reaction-item');\r\n        var $count = $reaction.querySelector('.comment-reaction-count');\r\n        var reactionId = target.dataset.id;\r\n        var postData = {\r\n            thread: _.stat.thread.id,\r\n            unique: _.user.unique,\r\n            reaction: reactionId\r\n        }\r\n        postAjax( _.opts.api + '/threadReactionsVote.php', postData, function(resp){\r\n            _.user.reactionVote[_.stat.thread.id] = reactionId;\r\n            l.setItem('reaction_vote', JSON.stringify(_.user.reactionVote));\r\n            target.classList.add('selected');\r\n            $count.innerHTML ++\r\n        })\r\n    }\r\n\r\n    // 排序\r\n    iDisqus.prototype.selectOrder = function(e, target){\r\n       var _ = this;\r\n       var order = target.value;\r\n       sessionStorage.setItem('order', order);\r\n       _.stat.order = order;\r\n       _.dom.querySelector('.comment-list').innerHTML = '';\r\n       _.dom.querySelector('.comment-loadmore').classList.add('hide');\r\n       _.stat.next = null;\r\n       _.getlist();\r\n    }\r\n\r\n    // 获取评论列表\r\n    iDisqus.prototype.getlist = function(){\r\n        var _ = this;\r\n        _.stat.loading = true;\r\n        _.dom.querySelector('#idisqus').classList.add('loading');\r\n        _.dom.querySelector('.comment-list').dataset.tips = '评论加载中……';\r\n        getAjax(\r\n            _.opts.api + '/getcomments.php?thread=' + _.stat.thread.id + (!!_.stat.next ? '&cursor=' + _.stat.next : '') + '&order=' + _.stat.order,\r\n            function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n\r\n                    _.dom.querySelector('#idisqus').classList.remove('loading')\r\n                    var loadmore = _.dom.querySelector('.comment-loadmore');\r\n                    var posts = !!data.response ? data.response : [];\r\n                    _.stat.root = [];\r\n                    posts.forEach(function(item){\r\n                        _.load(item);\r\n                        if(!item.parent){\r\n                            _.stat.root.unshift(item.id);\r\n                        }\r\n                    });\r\n\r\n                    if ( data.cursor.hasPrev ){\r\n                        _.stat.root.forEach(function(item){\r\n                            _.dom.querySelector('.comment-list').appendChild(_.dom.querySelector('#comment-' + item));\r\n                        })\r\n                    } \r\n                    if ( data.cursor.hasNext ){\r\n                        _.stat.next = data.cursor.next;\r\n                        loadmore.classList.remove('loading');\r\n                        loadmore.classList.remove('hide');\r\n                    } else {\r\n                        _.stat.next = null;\r\n                        loadmore.classList.add('hide');\r\n                    }\r\n\r\n                    if( _.stat.thread.posts == 0 ){\r\n                        _.dom.querySelector('.comment-list').dataset.tips = '来做第一个留言的人吧！';\r\n                        return;\r\n                    }\r\n\r\n                    if(posts.length == 0){\r\n                        return;\r\n                    }\r\n                    _.timeAgo();\r\n\r\n                    var iframe =_.dom.querySelectorAll('.comment-item-body iframe');\r\n                    [].forEach.call(iframe, function(item){\r\n                        item.style.width = item.clientWidth + 'px';\r\n                        item.style.height = item.clientWidth * 9 / 16 + 'px';\r\n                        setTimeout(function(){\r\n                            item.src = item.src;\r\n                        },1000)\r\n                    })\r\n                    var tweet =_.dom.querySelectorAll('.comment-item-body .twitter-tweet');\r\n                    if( tweet.length > 0 ){\r\n                        var head= document.getElementsByTagName('head')[0]; \r\n                        var script= document.createElement('script'); \r\n                        script.type= 'text/javascript'; \r\n                        script.src= '//platform.twitter.com/widgets.js'; \r\n                        head.appendChild(script);\r\n                    }\r\n\r\n                    window.scrollTo(0, _.stat.offsetTop);\r\n\r\n                    if (/^#disqus|^#comment-/.test(location.hash) && !data.cursor.hasPrev && !_.stat.disqusLoaded && !_.stat.loaded) {\r\n                        var el = _.dom.querySelector('#idisqus ' + location.hash)\r\n                        if( !!el ){\r\n                            window.scrollBy(0, el.getBoundingClientRect().top);\r\n                        }\r\n                    }\r\n                    _.stat.loading = false;\r\n                    _.stat.loaded = true;\r\n                } \r\n            },function(){\r\n                alert('获取数据失败，请检查服务器设置。')\r\n            }\r\n        );\r\n    }\r\n\r\n    // 读取评论\r\n    iDisqus.prototype.load = function(post){\r\n\r\n        var _ = this;\r\n\r\n        _.stat.post[post.id] = post;\r\n\r\n        var parentPostDom = _.dom.querySelector('.comment-item[data-id=\"'+post.parent+'\"]');\r\n\r\n        var user = {\r\n            username: post.username,\r\n            name: post.name,\r\n            avatar: post.avatar\r\n        }\r\n        if(!!post.username && _.stat.users.map(function(user) { return user.username; }).indexOf(post.username) == -1){\r\n            _.stat.users.push(user);\r\n        }\r\n        \r\n        var parentPost = !!post.parent ? {\r\n            name: `<a class=\"comment-item-pname\" data-parent=\"${post.parent}\" href=\"#${parentPostDom.id}\"><svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\"><path d=\"M1.664 902.144s97.92-557.888 596.352-557.888V129.728L1024 515.84l-425.984 360.448V628.8c-270.464 0-455.232 23.872-596.352 273.28\"></path></svg>${parentPostDom.dataset.name}</a>`,\r\n            dom: parentPostDom.querySelector('.comment-item-children'),\r\n            insert: 'afterbegin'\r\n        } : {\r\n            name: '',\r\n            dom: _.dom.querySelector('.comment-list'),\r\n            insert: post.id == 'preview' || !!post.isPost ? 'afterbegin' : 'beforeend'\r\n        };\r\n\r\n\r\n        var html = `<li class=\"comment-item\" data-id=\"${ post.id }\" data-name=\"${ post.name }\" id=\"comment-${ post.id }\">\r\n        <div class=\"comment-item-body\">\r\n        <a class=\"comment-item-avatar\" href=\"#comment-${ post.id }\"><img src=\"${ post.avatar }\"></a>\r\n        <div class=\"comment-item-main\">\r\n        <div class=\"comment-item-header\"><a class=\"comment-item-name\" title=\"${ post.name }\" rel=\"nofollow\" target=\"_blank\" href=\"${(post.url || 'javascript:;')}\">${ post.name }</a>${( post.isMod ? `<span class=\"comment-item-badge\">${_.opts.badge}</span>` : ``)}${ parentPost.name }<span class=\"comment-item-bullet\"> • </span><time class=\"comment-item-time\" datetime=\"${ post.createdAt }\"></time></div>\r\n        <div class=\"comment-item-content\">${ post.message }</div>\r\n        <div class=\"comment-item-footer\">${!!post.isPost ? `<span class=\"comment-item-manage\"><a class=\"comment-item-edit\" href=\"javascript:;\">编辑</a><span class=\"comment-item-bullet\"> • </span><a class=\"comment-item-delete\" href=\"javascript:;\">删除</a><span class=\"comment-item-bullet\"> • </span></span>` : ``}<a class=\"comment-item-reply\" href=\"javascript:;\">回复</a></div>\r\n        </div></div>\r\n        <ul class=\"comment-item-children\"></ul>\r\n        </li>`;\r\n\r\n        // 已删除评论\r\n        if(!!post.isDeleted){\r\n            html = `<li class=\"comment-item\" data-id=\"${ post.id }\" id=\"comment-${ post.id }\" data-name=\"${ post.name }\">\r\n            <div class=\"comment-item-body\">\r\n            <a class=\"comment-item-avatar\" href=\"#comment-${ post.id }\"><img src=\"${ post.avatar }\"></a>\r\n            <div class=\"comment-item-main\" data-message=\"此评论已被删除。\"></div></div>\r\n            <ul class=\"comment-item-children\"></ul>\r\n            </li>`;\r\n        }\r\n\r\n\r\n        // 更新 or 创建\r\n        if(!!_.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]')){\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]').outerHTML = html;\r\n        } else {\r\n            parentPost.dom.insertAdjacentHTML(parentPost.insert, html);\r\n        }\r\n\r\n        // 发布留言，可编辑删除\r\n        if(!!post.isPost && !_.stat.editing){\r\n            var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]');\r\n\r\n            var postEdit = setTimeout(function(){\r\n                // 十分钟后\r\n                if(!!$this.querySelector('.comment-item-manage')){\r\n                    $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                }\r\n            }, 6*1e5);\r\n\r\n            // 删除\r\n            $this.querySelector('.comment-item-delete').addEventListener('click',function(e){\r\n                var postData = {\r\n                    id: post.id\r\n                }\r\n                var delDom = e.currentTarget;\r\n                delDom.innerHTML = '删除中';\r\n                postAjax( _.opts.api + '/removecomment.php', postData, function(resp){\r\n                    var data = JSON.parse(resp);\r\n                    if (data.code === 0) {\r\n                        if(data.response.isDeleted == true){\r\n                            $this.outerHTML = '';\r\n                        } else {\r\n                            alert(data.response.message);\r\n                            $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                        }\r\n                    } else if (data.code === 2) {\r\n                        alert(data.response);\r\n                        $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                    }\r\n                }, function(){\r\n                    alert('删除出错，请稍后重试');\r\n                })\r\n                clearTimeout(postEdit);\r\n            }, false)\r\n\r\n            // 编辑\r\n            $this.querySelector('.comment-item-edit').addEventListener('click',function(){\r\n                _.stat.editing = post;\r\n                _.edit(post);\r\n            }, false)\r\n        }\r\n    }\r\n\r\n    // 读取更多\r\n    iDisqus.prototype.loadMore = function(e, target){\r\n        var _ = this;\r\n        _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n        if( !_.stat.loading ){\r\n            target.classList.add('loading');\r\n            _.getlist();\r\n        }\r\n    }\r\n\r\n    // 评论框焦点\r\n    iDisqus.prototype.focus = function(e, target){\r\n        var wrapper = target.closest('.comment-form-wrapper');\r\n        wrapper.classList.add('editing');\r\n        if (wrapper.classList.contains('focus')){\r\n            wrapper.classList.remove('focus');\r\n        } else{\r\n            wrapper.classList.add('focus');\r\n        }\r\n    }\r\n\r\n    // 输入事件\r\n    iDisqus.prototype.input = function(e, target){\r\n        var _ = this;\r\n        var form = target.closest('.comment-form');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n        var wrapper = form.querySelector('.comment-form-wrapper');\r\n        var filterText = target.value.replace(/<code>.*?<\\/code>/g,'');\r\n        var urls = filterText.match(/(^|\\s|\\r|\\n)*(http:\\/\\/|https:\\/\\/)(\\w|-|\\.)*(disqus|sinaimg|giphy|imgur|instagram|twimg|twitter|youtube|youtu\\.be)((\\w|=|\\?|\\.|\\/|&|\\%|-)*)(jpg|png|gif|gallery\\/\\w+|p\\/[a-zA-Z0-9]{11}.*|status\\/\\d{19}|v=[a-zA-Z0-9]{11}|\\/[a-zA-Z0-9]{11})(\\s|$|\\n)/g);\r\n        form.querySelector('.comment-image-list').innerHTML = '';\r\n        if(!!urls){\r\n            urls.forEach(function(item, i){\r\n                item = item.replace('/\\n|\\r\\n|^\\s|\\s$/g','');\r\n                var image = _.stat.media[item];\r\n                if(!!image){\r\n                    var imageHtml = `<li class=\"comment-image-item\" data-image-url=\"${image.thumbnailUrl}\"><img class=\"comment-image-object\" src=\"https:${image.thumbnailUrl}\"></li>`;\r\n                    form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageHtml);\r\n                    wrapper.classList.add('expanded');\r\n                    return;\r\n                }\r\n                postAjax( _.opts.api + '/media.php', {url: item}, function(resp){\r\n                    var data = JSON.parse(resp);\r\n                    if(data.code == 0){\r\n                        image = data.response;\r\n                        var imageHtml = `<li class=\"comment-image-item\" data-image-url=\"${image.thumbnailUrl}\"><img class=\"comment-image-object\" src=\"https:${image.thumbnailUrl}\"></li>`;\r\n                        form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageHtml);\r\n                        _.stat.media[item] = image;\r\n                        wrapper.classList.add('expanded');\r\n                    }\r\n                }, function(){\r\n                })\r\n            })\r\n        } else {\r\n            wrapper.classList.remove('expanded');\r\n        }\r\n\r\n    }\r\n\r\n    // 提醒用户 @ mention \r\n    iDisqus.prototype.mention = function(e, target){\r\n        var _ = this;\r\n        var textarea = target;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        var showUsers = _.stat.users.filter(function(user){\r\n            var re = new RegExp(mentionText.slice(1), 'i');\r\n            return user.username.search(re) > -1;\r\n        });\r\n        if(mentionText.search(/^@\\w+$|^@$/) == 0 && showUsers.length > 0){\r\n            if( e.keyCode == 38 || e.keyCode == 40){\r\n                return;\r\n            }\r\n            var coord = _.getCaretCoord(textarea);\r\n            var list='', html = '';\r\n\r\n            showUsers.forEach(function(item, i){\r\n                list += `<li class=\"mention-user-item${(i == 0 ? ' active' : '')}\" data-username=\"${ item.username }\"><img class=\"mention-user-avatar\" src=\"${ item.avatar }\"><div class=\"mention-user-username\">${ item.username }</div><div class=\"mention-user-name\">${ item.name }</div></li>`;\r\n            })\r\n            if(!!mentionDom){\r\n                mentionDom.innerHTML = '<ul class=\"mention-user-list\">'+list+'</ul>';\r\n                mentionDom.style.left = coord.left + 'px';\r\n                mentionDom.style.top = coord.top + 'px';\r\n            } else {\r\n                html = `<div class=\"mention-user\" style=\"left:${ coord.left }px;top:${ coord.top }px\"><ul class=\"mention-user-list\">${list}</ul></div>`;\r\n                _.dom.querySelector('#idisqus').insertAdjacentHTML('beforeend', html);\r\n            }\r\n\r\n            // 鼠标悬浮\r\n            _.addListener('mention-user-item', 'mouseover', function(){\r\n                _.dom.querySelector('.mention-user-item.active').classList.remove('active');\r\n                this.classList.add('active');\r\n            })\r\n\r\n            // 鼠标点击\r\n            _.addListener('mention-user-item', 'click', function(){\r\n                var username = '@' + this.dataset.username + ' ';\r\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                mentionDom.outerHTML = '';\r\n                textarea.focus();\r\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n            })\r\n        } else if(!!mentionDom){\r\n            mentionDom.outerHTML = '';\r\n        }\r\n    }\r\n\r\n    // 获取光标坐标 https://medium.com/@_jh3y/how-to-where-s-the-caret-getting-the-xy-position-of-the-caret-a24ba372990a\r\n    iDisqus.prototype.getCaretCoord = function(textarea){\r\n        var _ = this;\r\n        var carPos = textarea.selectionEnd,\r\n            div = d.createElement('div'),\r\n            span = d.createElement('span'),\r\n            copyStyle = getComputedStyle(textarea);\r\n        [].forEach.call(copyStyle, function(prop){\r\n            div.style[prop] = copyStyle[prop];\r\n        });\r\n        div.style.position = 'absolute';\r\n        _.dom.appendChild(div);\r\n        div.textContent = textarea.value.substr(0, carPos);\r\n        span.textContent = textarea.value.substr(carPos) || '.';\r\n        div.appendChild(span);\r\n        var coords = {\r\n            'top': textarea.offsetTop - textarea.scrollTop + span.offsetTop + parseFloat(copyStyle.lineHeight),\r\n            'left': textarea.offsetLeft - textarea.scrollLeft + span.offsetLeft\r\n        };\r\n        _.dom.removeChild(div);\r\n        return coords;\r\n    }\r\n\r\n    // 键盘选择用户\r\n    iDisqus.prototype.keySelect = function(e,target){\r\n        var _ = this;\r\n        var textarea = target;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        if( !mentionDom ){\r\n            return;\r\n        }\r\n        var current = _.dom.querySelector('.mention-user-item.active')\r\n        switch(e.keyCode){\r\n            case 13:\r\n                //回车\r\n                var username = '@' + current.dataset.username + ' ';\r\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n                _.dom.querySelector('.mention-user').outerHTML = '';\r\n                e.preventDefault();\r\n                break;\r\n            case 38:\r\n                //上\r\n                if(!!current.previousSibling){\r\n                    current.previousSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            case 40:\r\n                //下\r\n                if(!!current.nextSibling){\r\n                    current.nextSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 跳到评论\r\n    iDisqus.prototype.jump = function(e, target){\r\n        var _ = this;\r\n        var hash = getLocation(target.href).hash;\r\n        var el = _.dom.querySelector('#idisqus ' + hash);\r\n        history.replaceState(undefined, undefined, hash);\r\n        window.scrollBy(0, el.getBoundingClientRect().top);\r\n        e.preventDefault();\r\n    }\r\n\r\n    // 显示父评论\r\n    iDisqus.prototype.parentShow = function(e, target){\r\n        var _ = this;\r\n        if(!!target.querySelector('.comment-item-parent')){\r\n            return;\r\n        }\r\n        var comment = _.stat.post[target.dataset.parent];\r\n        if( comment.isDeleted ){\r\n            return;\r\n        }\r\n        var message = comment.message.replace(/<[^>]*>/g, '');\r\n        var parentHtml = `<div class=\"comment-item-parent\"><a class=\"comment-item-avatar\" href=\"javascript:;\"><img src=\"${comment.avatar}\"></a><div class=\"comment-item-pmain\"><div class=\"comment-item-pheader\">${comment.name}</div><div class=\"comment-item-pcontent\" title=\"${ message }\">${ message }</div></div></div>`;\r\n        target.insertAdjacentHTML('beforeend', parentHtml);\r\n    }\r\n\r\n    // 点选表情\r\n    iDisqus.prototype.field = function(e, target){\r\n        var _ = this;\r\n        var item = target;\r\n        var form = item.closest('.comment-form');\r\n        var textarea = form.querySelector('.comment-form-textarea');\r\n        _.appendText(textarea, item.dataset.code);\r\n    }\r\n\r\n    // 显示回复框 or 取消回复框\r\n    iDisqus.prototype.show = function(e, target){\r\n        var _ = this;\r\n\r\n        var $this = target;\r\n        var item = $this.closest('.comment-item');\r\n\r\n        // 无论取消还是回复，移除已显示回复框\r\n        var box = _.dom.querySelector('.comment-item .comment-box:not([data-current-id])');\r\n        if( box ){\r\n            var $show = box.closest('.comment-item');\r\n            var cancel = $show.querySelector('.comment-item-cancel')\r\n            cancel.outerHTML = cancel.outerHTML.replace('cancel','reply');\r\n            box.outerHTML = '';\r\n        }\r\n\r\n        // 回复时，显示评论框\r\n        if( $this.className == 'comment-item-reply' ){\r\n            $this.outerHTML = $this.outerHTML.replace('reply','cancel');\r\n            var commentBox = _.box.replace(/emoji-input/g,'emoji-input-'+item.dataset.id).replace(/upload-input/g,'upload-input-'+item.dataset.id);\r\n            item.querySelector('.comment-item-children').insertAdjacentHTML('beforebegin', commentBox);\r\n            _.user.init();\r\n\r\n            item.querySelector('.comment-form-textarea').focus();\r\n        }\r\n\r\n    }\r\n\r\n    // 验证表单\r\n    iDisqus.prototype.verify = function(e, target){\r\n        var _ = this;\r\n        var $this = target;\r\n        var box  = $this.closest('.comment-box');\r\n        var $avatar = box.querySelector('.comment-avatar-image');\r\n        var $name = box.querySelector('.comment-form-name');\r\n        var $email = box.querySelector('.comment-form-email');\r\n        var alertmsg = box.querySelector('.comment-form-alert');\r\n        if($email.value == ''){\r\n            return;\r\n        }\r\n        getAjax(\r\n            _.opts.api + '/getgravatar.php?email=' + $email.value + '&name=' + $name.value,\r\n            function(resp) {\r\n                var data  = JSON.parse(resp);\r\n                if ( !data.isEmail && $this == $email) {\r\n                    _.errorTips('您所填写的邮箱地址有误。', $email);\r\n                }\r\n                if ($name.value != '') {\r\n                    $avatar.src = data.gravatar;\r\n                }\r\n            }, function(){\r\n            }\r\n        );\r\n    }\r\n\r\n    // 添加文本\r\n    iDisqus.prototype.appendText = function(textarea, text){\r\n        var _ = this;\r\n        var selStart = textarea.selectionStart;\r\n        var text = selStart == 0 ? text + ' ' : ' ' + text + ' ';\r\n        textarea.value = textarea.value.slice(0, selStart) + text + textarea.value.slice(selStart);\r\n        textarea.focus();\r\n        textarea.setSelectionRange(selStart + text.length, selStart + text.length);\r\n    }\r\n\r\n    // 上传图片\r\n    iDisqus.prototype.upload = function(e, target){\r\n        var _ = this;\r\n        var file = target;\r\n        var form = file.closest('.comment-form');\r\n        var progress = form.querySelector('.comment-image-progress');\r\n        var loaded = form.querySelector('.comment-image-loaded');\r\n        var wrapper = form.querySelector('.comment-form-wrapper');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n        if(file.files.length === 0){\r\n            return;\r\n        }\r\n\r\n        // 以文件大小识别是否为同张图片\r\n        var size = file.files[0].size;\r\n\r\n        if( size > 5*1e6 ){\r\n            alertmsg.innerHTML = '请选择 5M 以下图片。';\r\n            setTimeout(function(){\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        if( _.stat.imageSize.indexOf(size) == -1 ){\r\n            progress.style.width = '80px';\r\n        } else {\r\n            alertmsg.innerHTML = '请勿选择已存在的图片。';\r\n            setTimeout(function(){\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        // 展开图片上传界面\r\n        wrapper.classList.add('expanded');\r\n\r\n        // 图片上传请求\r\n        var data = new FormData();\r\n        data.append('file', file.files[0] );\r\n        var filename = file.files[0].name;\r\n\r\n        var $item;\r\n\r\n        var xhrUpload = new XMLHttpRequest();\r\n        xhrUpload.withCredentials = true;\r\n        xhrUpload.onreadystatechange = function(){\r\n            if(xhrUpload.readyState == 4 && xhrUpload.status == 200){\r\n                var data = JSON.parse(xhrUpload.responseText);\r\n                if( data.code == 0 ){\r\n                    _.stat.imageSize.push(size);\r\n                    var imageUrl = data.response[filename].url;\r\n                    var textarea = form.querySelector('.comment-form-textarea');\r\n                    _.appendText(textarea, imageUrl);\r\n\r\n                    var image = new Image();\r\n                    image.src = imageUrl;\r\n                    image.onload = function(){\r\n                        $item.innerHTML = '<img class=\"comment-image-object\" src=\"'+imageUrl+'\">';\r\n                        $item.dataset.imageUrl = imageUrl;\r\n                        $item.classList.remove('loading');\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '图片上传出错。';\r\n                    $item.innerHTML = '';\r\n                    if( !!form.getElementsByClassName('comment-image-item').length){\r\n                        wrapper.classList.remove('expanded');\r\n                    }\r\n                    setTimeout(function(){\r\n                        alertmsg.innerHTML = '';\r\n                    }, 3000);\r\n                }\r\n            }\r\n        };\r\n        xhrUpload.upload.addEventListener('progress', function(e){\r\n            loaded.style.width = Math.ceil((e.loaded/e.total) * 100)+ '%';\r\n        }, false);\r\n        xhrUpload.upload.addEventListener('load', function(e){\r\n            loaded.style.width = 0;\r\n            progress.style.width = 0;\r\n            var imageItem = `<li class=\"comment-image-item loading\" data-image-size=\"${ size }\">\r\n            <svg version=\"1.1\" class=\"comment-image-object\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\" style=\"enable-background: new 0 0 50 50;\" xml:space=\"preserve\">\r\n            <rect x=\"0\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            <rect x=\"8\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            <rect x=\"16\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\r\n            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\r\n            </rect>\r\n            </svg>\r\n            </li>`;\r\n            form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageItem);\r\n            $item = form.querySelector('[data-image-size=\"'+size+'\"]');\r\n        }, false);\r\n        xhrUpload.open('POST', _.opts.api + '/upload.php', true);\r\n        xhrUpload.send(data);\r\n    }\r\n\r\n    // 移除图片\r\n    iDisqus.prototype.remove = function(e){\r\n        var _ = this;\r\n        var $item = e.currentTarget.closest('.comment-image-item');\r\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\r\n        $item.outerHTML = '';\r\n        _.stat.imageSize = [];\r\n        var imageArr = wrapper.getElementsByClassName('comment-image-item');\r\n        [].forEach.call(imageArr, function(item, i){\r\n            _.stat.imageSize[i] = item.dataset.imageSize;\r\n        });\r\n        if(_.stat.imageSize.length == 0){\r\n            wrapper.classList.remove('expanded');\r\n        }\r\n        wrapper.querySelector('.comment-image-input').value = '';\r\n    }\r\n\r\n    // 错误提示\r\n    iDisqus.prototype.errorTips = function(Text, Dom){\r\n        var _ = this;\r\n        if( _.user.logged_in == 'true' ){\r\n            _.handle.logout();\r\n        }\r\n        var idisqus = _.dom.querySelector('#idisqus');\r\n        var errorDom = _.dom.querySelector('.comment-form-error');\r\n        if(!!errorDom){\r\n            errorDom.outerHTML = '';\r\n        }\r\n        var Top = Dom.offsetTop;\r\n        var Left = Dom.offsetLeft;\r\n        var errorHtml = '<div class=\"comment-form-error\" style=\"top:'+Top+'px;left:'+Left+'px;\">'+Text+'</div>';\r\n        idisqus.insertAdjacentHTML('beforeend', errorHtml);\r\n        setTimeout(function(){\r\n            var errorDom = _.dom.querySelector('.comment-form-error');\r\n            if(!!errorDom){\r\n                errorDom.outerHTML = '';\r\n            }\r\n        }, 3000);\r\n    }\r\n\r\n    // 发表/回复评论\r\n    iDisqus.prototype.post = function(e, target){\r\n        var _ = this;\r\n        var item =  target.closest('.comment-box[data-current-id]') || target.closest('.comment-item') || target.closest('.comment-box');\r\n        var message = item.querySelector('.comment-form-textarea').value;\r\n        var parentId = !!item.dataset.id ? item.dataset.id : '';\r\n        var imgArr = item.getElementsByClassName('comment-image-item');\r\n\r\n        // 不是编辑框需预览\r\n        if( !item.dataset.currentId ){\r\n            var elName = item.querySelector('.comment-form-name');\r\n            var elEmail = item.querySelector('.comment-form-email');\r\n            var elUrl = item.querySelector('.comment-form-url');\r\n            var alertmsg = item.querySelector('.comment-form-alert');\r\n            var alertClear = function() {\r\n                setTimeout(function(){\r\n                    alertmsg.innerHTML = '';\r\n                }, 3000);\r\n            }\r\n\r\n            if(_.user.type != '1'){\r\n                var anonName = elName.value;\r\n                var anonEmail = elEmail.value;\r\n                var anonUrl = elUrl.value.replace(/\\s/g,'');\r\n                if(/^\\s*$/i.test(anonName)){\r\n                    _.errorTips('名字不能为空或空格。', elName);\r\n                    return;\r\n                }\r\n                if(/^\\s*$/i.test(anonEmail)){\r\n                    _.errorTips('邮箱不能为空或空格。', elEmail);\r\n                    return;\r\n                }\r\n                if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(anonEmail)){\r\n                    _.errorTips('请正确填写邮箱。', elEmail);\r\n                    return;\r\n                }\r\n                if(!/^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(([A-Za-z0-9-~]+)\\.)+([A-Za-z0-9-~\\/])+$|^\\s*$/i.test(anonUrl)){\r\n                    _.errorTips('请正确填写网址。', elUrl);\r\n                    return;\r\n                }\r\n                _.user.unique = _.user.email == anonEmail ? _.user.unique : generateGUID();\r\n                _.user.name = anonName;\r\n                _.user.email = anonEmail;\r\n                _.user.url = anonUrl;\r\n                _.user.avatar = item.querySelector('.comment-avatar-image').src;\r\n                _.user.submit();\r\n\r\n                if( !_.user.name && !_.user.email ){\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if(!_.stat.message && !_.stat.mediaHtml){\r\n                _.box = _.dom.querySelector('.comment-box').outerHTML.replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论……/,'');\r\n            }\r\n\r\n            if( /^\\s*$/i.test(message)){\r\n                alertmsg.innerHTML = '评论不能为空或空格。';\r\n                item.querySelector('.comment-form-textarea').focus();\r\n                return;\r\n            };\r\n\r\n            var preMessage = message;\r\n\r\n            if( !!_.opts.emoji_preview ){\r\n                preMessage = preMessage.replace(/:([-+\\w]+):/g, function (match){\r\n                    var emojiShort = match.replace(/:/g,'');\r\n                    var emojiImage = !!_.eac[emojiShort] ? `<img class=\"emojione\" width=\"24\" height=\"24\" alt=\"'+emojiShort+'\" title=\":${emojiShort}:\" src=\"${_.opts.emojiPath +_.eac[emojiShort]}.png\">` : match;\r\n                    return emojiImage;\r\n                });\r\n            } else {\r\n                _.emojiList.forEach(function(item){\r\n                    preMessage = preMessage.replace(`:${item.code}:`, `<img class=\"emojione\" width=\"24\" height=\"24\" src=\"${ _.opts.emojiPath + item.unicode }.png\" />`);\r\n                });\r\n            }\r\n\r\n            var post = {\r\n                'url': !!_.user.url ? _.user.url : '',\r\n                'isMod': false,\r\n                'username': null,\r\n                'name': _.user.name,\r\n                'avatar': _.user.avatar,\r\n                'id': 'preview',\r\n                'parent': parentId,\r\n                'createdAt': (new Date()).toJSON(),\r\n                'message': '<p>' + preMessage + '</p>',\r\n            };\r\n\r\n            _.load(post);\r\n\r\n            _.timeAgo();\r\n\r\n            // 清空或移除评论框\r\n            _.stat.message = message;\r\n            _.stat.mediaHtml = item.querySelector('.comment-image-list').innerHTML;\r\n\r\n            if( parentId ){\r\n                item.querySelector('.comment-item-cancel').click();\r\n            } else {\r\n                item.querySelector('.comment-form-textarea').value = '';\r\n                item.querySelector('.comment-image-list').innerHTML = '';\r\n                item.querySelector('.comment-form-wrapper').classList.remove('expanded','editing');\r\n            }\r\n        }\r\n\r\n        // @\r\n        var mentions = message.match(/@\\w+/g);\r\n        if( !!mentions ){\r\n            mentions = mentions.filter(function(mention) {\r\n                return _.stat.users.map(function(user) { return user.username; }).indexOf(mention.slice(1)) > -1;\r\n            });\r\n            if( mentions.length > 0 ){\r\n                var re = new RegExp('('+mentions.join('|')+')','g');\r\n                message = message.replace(re,'$1:disqus');\r\n            }\r\n        }\r\n\r\n        // POST 操作\r\n        // 编辑框则更新评论\r\n        if( !!item.dataset.currentId ){\r\n            var postData = {\r\n                id: item.dataset.currentId,\r\n                message: message,\r\n                unique: _.user.unique\r\n            }\r\n            postAjax( _.opts.api + '/updatecomment.php', postData, function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.message = null;\r\n                    _.stat.mediaHtml = null;\r\n                    var post = data.response;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                } else {\r\n                    // 取消编辑\r\n                    _.load(_.stat.editing)\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                }\r\n            }, function(){\r\n                // 取消编辑\r\n                _.load(_.stat.editing)\r\n                _.timeAgo();\r\n                _.stat.editing = false;\r\n            })\r\n        } else {\r\n            var postData = {\r\n                thread:  _.stat.thread.id,\r\n                parent: parentId,\r\n                message: message,\r\n                name: _.user.name,\r\n                email: _.user.email,\r\n                url:  _.user.url,\r\n                unique:  _.user.unique\r\n            }\r\n            postAjax( _.opts.api + '/postcomment.php', postData, function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.stat.thread = data.thread;\r\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.thread.posts + ' 条评论';\r\n                    var post = data.response;\r\n                    post.isPost = true;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    var postData = {\r\n                        post: JSON.stringify(post),\r\n                        thread: JSON.stringify(_.stat.thread),\r\n                        parent: JSON.stringify(_.stat.post[parentId]),\r\n                        code: data.verifyCode\r\n                    }\r\n                    if(!!data.verifyCode){\r\n                        // 异步发送邮件\r\n                        postAjax( _.opts.api + '/sendemail.php', postData, function(resp){\r\n                            console.info('邮件发送成功！');\r\n                        })\r\n                    }\r\n                } else if (data.code === 2) {\r\n                    alertmsg.innerHTML = data.response;\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n\r\n                    if( data.response.indexOf('author') > -1){\r\n                        _.handle.logout();\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '提交失败，请稍后重试，错误代码：' + data.code;\r\n                    alertClear();\r\n\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n                }\r\n\r\n            }, function(){\r\n                alertmsg.innerHTML = '提交出错，请稍后重试。';\r\n                alertClear();\r\n\r\n                _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                _.reEdit(item);\r\n            })\r\n        }\r\n    }\r\n\r\n    // 重新编辑\r\n    iDisqus.prototype.reEdit = function(item){\r\n        var _ = this;\r\n\r\n        if( !!item.dataset.id ){\r\n            item.querySelector('.comment-item-reply').click();\r\n        } else {\r\n            item.querySelector('.comment-form-wrapper').classList.add('editing');\r\n        }\r\n\r\n        // 重新填充文本图片\r\n        if(!!_.stat.message){\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if(!!_.stat.mediaHtml){\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n        }\r\n    }\r\n\r\n    // 编辑\r\n    iDisqus.prototype.edit = function(post){\r\n        var _ = this;\r\n        var commentBox = _.box.replace('comment-box','comment-box comment-box-'+post.id).replace(/emoji-input/g,'emoji-input-'+post.id).replace(/upload-input/g,'upload-input-'+ post.id);\r\n        var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-body');\r\n        $this.outerHTML = commentBox;\r\n        _.user.init();\r\n        var item = _.dom.querySelector('.comment-box-' + post.id);\r\n        item.dataset.currentId = post.id;\r\n        item.querySelector('.comment-form-textarea').focus();\r\n\r\n        // 取消编辑\r\n        item.querySelector('.comment-actions-form').insertAdjacentHTML('afterbegin', '<a class=\"comment-form-cancel\" href=\"javascript:;\">取消</a>')\r\n        item.querySelector('.comment-form-cancel').addEventListener('click', function(){\r\n            _.stat.editing = false;\r\n            _.load(post);\r\n            _.timeAgo();\r\n        }, false);\r\n\r\n        // 重新填充文本图片，连续回复、连续编辑会有 bug\r\n        if(!!_.stat.message){\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if(!!_.stat.mediaHtml){\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n        }\r\n\r\n    }\r\n\r\n    // Thread 初始化\r\n    iDisqus.prototype.threadInit = function(e, target){\r\n        var _ = this;\r\n        _.dom.querySelector('#idisqus').style.display = 'block';\r\n        _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        getAjax( _.opts.api + '/threadsDetails.php?ident=' + _.opts.identifier + '&link=' + _.opts.url , function(resp){\r\n            var data  = JSON.parse(resp);\r\n            if( data.code == 0){\r\n                _.stat.thread = data.response;\r\n                _.stat.forum = data.forum;\r\n                _.dom.querySelector('#comment-link').href = `https://disqus.com/home/discussion/${_.stat.forum.id}/${_.stat.thread.slug}/?l=zh`;\r\n                _.dom.querySelector('.comment-avatar-image').dataset.avatar = _.stat.forum.avatar;\r\n                _.dom.querySelector('.comment-recommend-count').innerHTML = _.stat.thread.likes || '';\r\n                if( _.user.logged_in == 'false' ){\r\n                    _.dom.querySelector('.comment-avatar-image').src = _.stat.forum.avatar;\r\n                }\r\n                _.opts.badge =  _.stat.forum.moderatorBadgeText;\r\n                if( !_.stat.order ){\r\n                    switch( _.stat.forum.order ){\r\n                        case 1:\r\n                            _.stat.order = 'asc';\r\n                            break;\r\n                        case 2:\r\n                            _.stat.order = 'desc';\r\n                            break;\r\n                        case 4:\r\n                            _.stat.order = 'popular';\r\n                            break;\r\n                    }\r\n                }\r\n                _.dom.querySelector('.comment-order-radio[value=\"'+ _.stat.order +'\"]').checked = true;\r\n                \r\n                var users = data.votedusers;\r\n                var vote = 0;\r\n                if( _.user.type == 1 ){\r\n                    // 已登录\r\n                    vote = users.filter(function(user){\r\n                        return user.username == _.user.username;\r\n                    }).length > 0 ? 1 : 0;\r\n                } else {\r\n                    // 未登录\r\n                    vote = !!_.user.vote[_.stat.thread.id] ? 1 : 0;;\r\n                }\r\n                _.user.vote[_.stat.thread.id] = vote;\r\n                l.setItem('vote', JSON.stringify(_.user.vote));\r\n                if( !!vote ){\r\n                    _.dom.querySelector('.comment-recommend').classList.add('voted');\r\n                    _.dom.querySelector('.comment-recommend-text').innerHTML = '已推荐';\r\n                }\r\n                _.dom.querySelector('#idisqus').classList.remove('init')\r\n                _.loadRelated();\r\n                _.loadReactions();\r\n                _.dom.querySelector('#comment-count').innerHTML = _.stat.thread.posts + ' 条评论';\r\n                _.getlist();\r\n            } else if ( data.code === 2 ){\r\n                    // 自动创建\r\n                    if(_.opts.autoCreate){\r\n                        _.dom.querySelector('.init-container').dataset.tips = '正在创建 Thread……';\r\n                        var postData = {\r\n                            url: _.opts.link,\r\n                            identifier: _.opts.identifier,\r\n                            title: _.opts.title,\r\n                            slug: _.opts.slug,\r\n                            message: _.opts.desc\r\n                        }\r\n                        _.threadCreate(postData);\r\n                        return;\r\n                    }\r\n                    _.dom.querySelector('#idisqus').classList.remove('init');\r\n                    var threadForm = `<div class=\"comment-header\"><span class=\"comment-header-item\">创建 Thread</span></div>\r\n                            <div class=\"comment-thread-form\">\r\n                            <p>由于 Disqus 没有本页面的相关 Thread，故需先创建 Thread</p>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">url:</label><input class=\"comment-form-input\" id=\"thread-url\" name=\"url\" value=\"${ _.opts.link }\" disabled /></div>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">identifier:</label><input class=\"comment-form-input\" id=\"thread-identifier\" name=\"identifier\" value=\"${ _.opts.identifier }\" disabled /></div>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">title:</label><input class=\"comment-form-input\" id=\"thread-title\" name=\"title\" value=\"${ _.opts.title }\" disabled /></div>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">slug:</label><input class=\"comment-form-input\" id=\"thread-slug\" name=\"slug\" value=\"${ _.opts.slug }\" /></div>\r\n                            <div class=\"comment-form-item\"><label class=\"comment-form-label\">message:</label><textarea class=\"comment-form-textarea\" id=\"thread-message\" name=\"message\">${ _.opts.desc }</textarea></div>\r\n                            <button id=\"thread-submit\" class=\"comment-form-submit\">提交</button></div>`;\r\n                    _.dom.querySelector('#idisqus').innerHTML = threadForm;\r\n            }\r\n        },function(){})\r\n    }\r\n\r\n    // Thread 打分事件\r\n    iDisqus.prototype.threadVote = function(e, target){\r\n        var _ = this;\r\n        var vote = !!_.user.vote[_.stat.thread.id] ? 0 : 1;\r\n        var postData = {\r\n            thread: _.stat.thread.id,\r\n            unique: _.user.unique,\r\n            vote: vote\r\n        }\r\n        postAjax( _.opts.api + '/threadsVote.php', postData, function(resp){\r\n            _.user.vote[_.stat.thread.id] = vote;\r\n            l.setItem('vote', JSON.stringify(_.user.vote));\r\n            if(!!vote){\r\n                _.dom.querySelector('.comment-recommend').classList.add('voted');\r\n                _.stat.thread.likes ++;\r\n            } else {\r\n                _.dom.querySelector('.comment-recommend').classList.remove('voted');\r\n               _.stat.thread.likes = _.stat.thread.likes == 0 ? 0 : _.stat.thread.likes - 1;\r\n            }\r\n            _.dom.querySelector('.comment-recommend-count').innerHTML = _.stat.thread.likes || '';\r\n        })\r\n    }\r\n\r\n    // Thread Create 事件\r\n    iDisqus.prototype.threadCreate = function(e, target){\r\n        var _ = this;\r\n        if( !!target ){\r\n            var postData = {\r\n                url: _.dom.querySelector('#thread-url').value,\r\n                identifier: _.dom.querySelector('#thread-identifier').value,\r\n                title: _.dom.querySelector('#thread-title').value,\r\n                slug: _.dom.querySelector('#thread-slug').value.replace(/[^A-Za-z0-9_-]+/g,''),\r\n                message: _.dom.querySelector('#thread-message').value\r\n            }\r\n        } else {\r\n            var postData = arguments[0];\r\n        }\r\n        postAjax( _.opts.api + '/createthread.php', postData, function(resp){\r\n            var data = JSON.parse(resp);\r\n            if( data.code === 0 ) {\r\n                alert('创建 Thread 成功，刷新后便可愉快地评论了！');\r\n                setTimeout(function(){location.reload();},2000);\r\n            } else if( data.code === 2 ) {\r\n                if (data.response.indexOf('A thread already exists with link') > -1) {\r\n                    alert(data.response.replace('A thread already exists with link,', '已存在此链接的相关 Thread，'));\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid URL') > -1) {\r\n                    alert('参数错误，无效的\\'URL\\'');\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid slug') > -1) {\r\n                    alert('参数错误，无效的\\'slug\\'');\r\n                    return;\r\n                }\r\n                alert(data.response);\r\n                return;\r\n            } else { \r\n                alert(data.response);\r\n                return;\r\n            }\r\n        }, function(){\r\n            alert('创建 Thread 出错，请稍后重试！');\r\n        })\r\n    }\r\n\r\n    // 销毁评论框\r\n    iDisqus.prototype.destroy = function(){\r\n        var _ = this;\r\n        _.dom.innerHTML = '';\r\n        delete _.dom;\r\n        delete _.box;\r\n        delete _.emojiList;\r\n        delete _.user;\r\n        delete _.handle;\r\n        delete _.stat;\r\n        delete _.opts;\r\n    }\r\n\r\n    /* CommonJS */\r\n    if (typeof require === 'function' && typeof module === 'object' && module && typeof exports === 'object' && exports)\r\n        module.exports = iDisqus;\r\n    /* AMD */\r\n    else if (typeof define === 'function' && define['amd'])\r\n        define(function () {\r\n            return iDisqus;\r\n        });\r\n    /* Global */\r\n    else\r\n        global['iDisqus'] = global['iDisqus'] || iDisqus;\r\n\r\n})(window || this);\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n"],"sourceRoot":""}
>>>>>>> upstream/master
