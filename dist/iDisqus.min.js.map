<<<<<<< HEAD
{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/./src/iDisqus.js","webpack://[name]/(webpack)/buildin/module.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_RESULT__","global","document","localStorage","scripts","lasturl","length","src","isEdge","substring","lastIndexOf","navigator","userAgent","indexOf","isIE","ActiveXObject","getAjax","url","success","error","xhr","XMLHttpRequest","open","encodeURI","onreadystatechange","readyState","status","responseText","onerror","withCredentials","send","postAjax","data","params","keys","map","k","encodeURIComponent","join","setRequestHeader","ElementProto","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","selector","elements","this","ownerDocument","querySelectorAll","index","Boolean","closest","element","nodeType","parentNode","Element","User","dom","arguments","opts","init","autologin","_","getItem","email","avatar","type","logged_in","boxarr","getElementsByClassName","forEach","item","querySelector","classList","add","remove","dataset","setItem","api","resp","JSON","parse","code","submit","response","login","timer","popup","setInterval","closed","clearInterval","user","logout","removeItem","iDisqus","getElementById","slice","site","location","origin","optsUrl","replace","pathname","search","identifier","link","title","slug","desc","content","timeout","toggle","autoCreate","auto","emojiPath","emoji_path","emojiList","emoji_list","unicode","emoji_preview","emojiPreview","eac","stat","current","loaded","loading","editing","offsetTop","thread","next","message","mediaHtml","count","users","imageSize","disqusLoaded","disqus_config","page","callbacks","onReady","push","style","display","disabled","checked","addEventListener","handle","timeAgo","templates","prefix","suffix","seconds","minute","minutes","hour","hours","day","days","week","weeks","month","months","year","years","template","Math","abs","round","time","Date","getTime","$this","getAttribute","innerHTML","setTimeout","box","outerHTML","loadMore","post","postThread","show","upload","verify","jump","mention","keySelect","field","focus","input","disqus","getlist","tip","createElement","forum","timestamp","now","onload","head","body","appendChild","ontimeout","abort","addListener","els","evt","func","el","removeListener","removeEventListener","addAllListeners","counts","qty","commentArr","disqusUrl","href","itemLink","posts","disqusCount","console","log","popular","popHtml","topPost","raw_message","createdAt","id","documentElement","scrollTop","total","cursor","badge","moderatorBadgeText","loadmore","load","parent","unshift","hasPrev","hasNext","scrollTo","settings","organicDiscoveryEnabled","test","hash","scrollBy","getBoundingClientRect","top","alert","parentPostDom","username","parentPost","insert","isPost","mediaHTML","media","html","isMod","isDeleted","insertAdjacentHTML","postEdit","e","postData","currentTarget","clearTimeout","edit","wrapper","contains","textarea","selStart","selectionStart","mentionIndex","mentionText","mentionDom","keyCode","showUsers","filter","re","RegExp","coord","getCaretCoord","list","left","setSelectionRange","carPos","selectionEnd","div","span","copyStyle","getComputedStyle","prop","position","textContent","substr","coords","parseFloat","lineHeight","offsetLeft","scrollLeft","removeChild","preventDefault","previousSibling","nextSibling","getLocation","history","replaceState","undefined","shortCode","cancel","className","commentBox","$avatar","$name","$email","isEmail","errorTips","gravatar","file","form","progress","alertmsg","files","size","width","FormData","append","$item","filename","xhrUpload","imageUrl","image","Image","ceil","imageItem","imageArr","Text","Dom","idisqus","errorDom","errorHtml","parentId","imgArr","mediaStr","currentId","elName","elEmail","elUrl","alertClear","preMessage","match","emojiShort","toJSON","click","mentions","verifyCode","stringify","info","reEdit","target","reload","destroy","webpackPolyfill","deprecate","paths","children"],"mappings":"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","file":"iDisqus.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"iDisqus\"] = factory();\n\telse\n\t\troot[\"iDisqus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*!\r\n * v 0.2.15\r\n * \r\n * @author fooleap\r\n * @email fooleap@gmail.com\r\n * @create 2017-06-17 20:48:25\r\n * @update 2018-08-31 13:42:06\r\n * @version 0.2.16\r\n * Copyright 2017-2018 fooleap\r\n * Released under the MIT license\r\n */\r\nrequire('./iDisqus.scss');\r\n(function (global) {\r\n    'use strict';\r\n\r\n    var d = document,\r\n        l = localStorage,\r\n        scripts = d.scripts,\r\n        lasturl = scripts[scripts.length - 1].src,\r\n        filepath = lasturl.substring(0, lasturl.lastIndexOf('/')),\r\n        isEdge = navigator.userAgent.indexOf(\"Edge\") > -1,\r\n        isIE = !!window.ActiveXObject || \"ActiveXObject\" in window;\r\n\r\n    function getLocation(href) {\r\n        var link = d.createElement('a');\r\n        link.href = href;\r\n        return link;\r\n    }\r\n\r\n    function getAjax(url, success, error) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open ('GET', encodeURI(url));\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText);\r\n            }\r\n        }\r\n        xhr.onerror = error;\r\n        xhr.withCredentials = true;\r\n        xhr.send();\r\n        return xhr;\r\n    }\r\n    \r\n    function postAjax(url, data, success, error) {\r\n        var params = typeof data == 'string' ? data : Object.keys(data).map(\r\n            function(k){ return encodeURIComponent(k) + '=' + encodeURIComponent(data[k]) }\r\n        ).join('&');\r\n\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('POST', url);\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText); \r\n            }\r\n        };\r\n        xhr.onerror = error; \r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n        xhr.send(params);\r\n        return xhr;\r\n    }\r\n    \r\n    // matches & closest polyfill https://github.com/jonathantneal/closest\r\n    (function (ElementProto) {\r\n        if (typeof ElementProto.matches !== 'function') {\r\n            ElementProto.matches = ElementProto.msMatchesSelector || ElementProto.mozMatchesSelector || ElementProto.webkitMatchesSelector || function matches(selector) {\r\n                var element = this;\r\n                var elements = (element.document || element.ownerDocument).querySelectorAll(selector);\r\n                var index = 0;\r\n\r\n                while (elements[index] && elements[index] !== element) {\r\n                    ++index;\r\n                }\r\n\r\n                return Boolean(elements[index]);\r\n            };\r\n        }\r\n\r\n        if (typeof ElementProto.closest !== 'function') {\r\n            ElementProto.closest = function closest(selector) {\r\n                var element = this;\r\n\r\n                while (element && element.nodeType === 1) {\r\n                    if (element.matches(selector)) {\r\n                        return element;\r\n                    }\r\n\r\n                    element = element.parentNode;\r\n                }\r\n\r\n                return null;\r\n            };\r\n        }\r\n    })(window.Element.prototype);\r\n\r\n    // 访客信息\r\n    var User = function () {\r\n        this.dom = arguments[0];\r\n        this.opts = arguments[1];\r\n        this.init();\r\n        this.autologin();\r\n    }\r\n\r\n    User.prototype = {\r\n        // 初始化访客信息\r\n        init: function(){\r\n            var _ = this;\r\n            // 读取访客信息\r\n            _.name = l.getItem('name');\r\n            _.email = l.getItem('email');\r\n            _.url = l.getItem('url');\r\n            _.avatar = l.getItem('avatar');\r\n            _.type = l.getItem('type');\r\n            _.logged_in = l.getItem('logged_in');\r\n\r\n            var boxarr = _.dom.getElementsByClassName('comment-box');\r\n            if( _.logged_in == 'true' ) {\r\n                [].forEach.call(boxarr,function(item){\r\n                    if(_.type == '1'){\r\n                        item.querySelector('.comment-form-wrapper').classList.add('logged-in');\r\n                    }\r\n                    item.querySelector('.comment-form-name').value = _.name;\r\n                    item.querySelector('.comment-form-email').value = _.email;\r\n                    item.querySelector('.comment-form-url').value = _.url;\r\n                    item.querySelector('.comment-avatar-image').src = _.avatar;\r\n                });\r\n            } else {\r\n                [].forEach.call(boxarr,function(item){\r\n                    item.querySelector('.comment-form-wrapper').classList.remove('logged-in');\r\n                    item.querySelector('.comment-form-name').value = '';\r\n                    item.querySelector('.comment-form-email').value = '';\r\n                    item.querySelector('.comment-form-url').value = '';\r\n                    item.querySelector('.comment-avatar-image').src = _.dom.querySelector('.comment-avatar-image').dataset.avatar;\r\n                });\r\n                l.setItem('logged_in', 'false');\r\n            }\r\n        },\r\n\r\n        // 自动登录\r\n        autologin: function(){\r\n            var _ = this;\r\n            getAjax( _.opts.api +'/user.php', function(resp){\r\n                var data = JSON.parse(resp);\r\n                if( data.code == 0 ){\r\n                    _.submit(data.response);\r\n                } else {\r\n                    if( _.type == '1' ){\r\n                        l.setItem('logged_in', 'false');\r\n                        _.init();\r\n                    }\r\n                }\r\n            }, function(){\r\n            })\r\n        },\r\n\r\n        // 登录\r\n        login: function(){\r\n\r\n            var _ = this;\r\n            var popup = window.open(_.opts.api+'/login.php', 'Disqus Oauth', 'width=470,height=508');\r\n            var timer;\r\n            function isLogged(){\r\n                if (!popup || !popup.closed) return;\r\n                clearInterval(timer);\r\n                _.user.autologin();\r\n            }\r\n            timer = setInterval(isLogged, 100);\r\n\r\n        },\r\n\r\n        // 退出登录\r\n        logout: function(){\r\n            var _ = this;\r\n            postAjax( _.opts.api + '/logout.php', {}, function(resp){\r\n                l.setItem('logged_in', 'false');\r\n                l.removeItem('type');\r\n                l.removeItem('email');\r\n                l.removeItem('avatar');\r\n                l.removeItem('name');\r\n                l.removeItem('url');\r\n                _.user.init();\r\n            })\r\n        },\r\n\r\n        // 提交访客信息\r\n        submit: function(user){\r\n            l.setItem('email', user.email);\r\n            l.setItem('type', user.type);\r\n            l.setItem('name', user.name);\r\n            l.setItem('url', user.url);\r\n            l.setItem('avatar', user.avatar);\r\n            l.setItem('logged_in', 'true');\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    var iDisqus = function () {\r\n        var _ = this;\r\n\r\n        // 配置\r\n        _.opts = typeof(arguments[1]) == 'object' ? arguments[1] : arguments[0];\r\n        _.dom =  d.getElementById(typeof(arguments[0]) == 'string' ? arguments[0] : 'comment');\r\n        _.opts.api = _.opts.api.slice(-1) == '/' ? _.opts.api.slice(0,-1) : _.opts.api;\r\n        _.opts.site = _.opts.site || location.origin;\r\n        if(!!_.opts.url){\r\n            var optsUrl = _.opts.url.replace(_.opts.site, '');\r\n            _.opts.url = optsUrl.slice(0, 1) != '/' ? '/' + optsUrl : optsUrl;\r\n        } else if(isEdge || isIE) {\r\n            _.opts.url = encodeURI(location.pathname) + encodeURI(location.search);\r\n        } else {\r\n            _.opts.url = location.pathname + location.search;\r\n        }\r\n        _.opts.identifier = _.opts.identifier || _.opts.url;\r\n        _.opts.link = _.opts.site + _.opts.url; \r\n        _.opts.title = _.opts.title || d.title;\r\n        _.opts.slug = !!_.opts.slug ? _.opts.slug.replace(/[^A-Za-z0-9_-]+/g,'') : '';\r\n        _.opts.desc =  _.opts.desc || (!!d.querySelector('[name=\"description\"]') ? d.querySelector('[name=\"description\"]').content : '');\r\n        _.opts.mode = _.opts.mode || 1;\r\n        _.opts.timeout = _.opts.timeout || 3000;\r\n        _.opts.toggle = !!_.opts.toggle ? d.getElementById(_.opts.toggle) : null;\r\n        _.opts.autoCreate = !!_.opts.autoCreate || !!_.opts.auto;\r\n\r\n        // emoji 表情\r\n        _.opts.emojiPath = _.opts.emojiPath || _.opts.emoji_path || 'https://assets-cdn.github.com/images/icons/emoji/unicode/';\r\n        _.emojiList = _.opts.emojiList || _.opts.emoji_list || [{\r\n            code:'smile',\r\n            title:'笑脸',\r\n            unicode:'1f604'\r\n        },{\r\n            code:'mask',\r\n            title:'生病',\r\n            unicode:'1f637'\r\n        },{\r\n            code:'joy',\r\n            title:'破涕为笑',\r\n            unicode:'1f602'\r\n        },{\r\n            code:'stuck_out_tongue_closed_eyes',\r\n            title:'吐舌',\r\n            unicode:'1f61d'\r\n        },{\r\n            code:'flushed',\r\n            title:'脸红',\r\n            unicode:'1f633'\r\n        },{\r\n            code:'scream',\r\n            title:'恐惧',\r\n            unicode:'1f631'\r\n        },{\r\n            code:'pensive',\r\n            title:'失望',\r\n            unicode:'1f614'\r\n        },{\r\n            code:'unamused',\r\n            title:'无语',\r\n            unicode:'1f612'\r\n        },{\r\n            code:'grin',\r\n            title:'露齿笑',\r\n            unicode:'1f601'\r\n        },{\r\n            code:'heart_eyes',\r\n            title:'色',\r\n            unicode:'1f60d'\r\n        },{\r\n            code:'sweat',\r\n            title:'汗',\r\n            unicode:'1f613'\r\n        },{\r\n            code:'smirk',\r\n            title:'得意',\r\n            unicode:'1f60f'\r\n        },{\r\n            code:'relieved',\r\n            title:'满意',\r\n            unicode:'1f60c'\r\n        },{\r\n            code:'rolling_eyes',\r\n            title:'翻白眼',\r\n            unicode:'1f644'\r\n        },{\r\n            code:'ok_hand',\r\n            title:'OK',\r\n            unicode:'1f44c'\r\n        },{\r\n            code:'v',\r\n            title:'胜利',\r\n            unicode:'270c'\r\n        }];\r\n        \r\n        if(!!_.opts.emoji_preview || !!_.opts.emojiPreview ){\r\n            getAjax(_.opts.api +'/eac.php', function(resp){\r\n                _.eac = JSON.parse(resp);\r\n            }, function(){\r\n            })\r\n        }\r\n\r\n        // 默认状态\r\n        _.stat = {\r\n            current: 'idisqus', // 当前显示评论框\r\n            loaded: false,      // 评论框已加载\r\n            loading: false,     // 评论加载中\r\n            editing: false,     // 评论编辑中\r\n            offsetTop: 0,       // 高度位置\r\n            thread: null,       // 本页 thread id\r\n            next: null,         // 下条评论\r\n            message: null,      // 新评论\r\n            mediaHtml: null,    // 新上传图片\r\n            root: [],           // 根评论\r\n            count: 0,           // 评论数\r\n            users: [],          // Disqus 会员\r\n            imageSize: [],      // 已上传图片大小\r\n            disqusLoaded: false // Disqus 已加载\r\n        };\r\n\r\n        // Disqus 评论框设置\r\n        window.disqus_config = function () {\r\n            this.page.identifier = _.opts.identifier;\r\n            this.page.title = _.opts.title;\r\n            this.page.url = _.opts.link;\r\n            this.callbacks.onReady.push(function() {\r\n                _.stat.current = 'disqus';\r\n                _.stat.disqusLoaded = true;\r\n                _.dom.querySelector('#idisqus').style.display = 'none';\r\n                _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n                if( _.opts.mode == 3 && !!_.opts.toggle) {\r\n                    _.opts.toggle.disabled = '';\r\n                    _.opts.toggle.checked = true;\r\n                    _.opts.toggle.addEventListener('change', _.handle.toggle, false);\r\n                }\r\n            });\r\n        }\r\n\r\n        // 自动初始化\r\n        if( !!_.opts.init ){\r\n            _.init();\r\n            //console.log(_);\r\n        }\r\n    }\r\n\r\n    // TimeAgo https://coderwall.com/p/uub3pw/javascript-timeago-func-e-g-8-hours-ago\r\n    iDisqus.prototype.timeAgo = function() {\r\n\r\n        var _ = this;\r\n        var templates = {\r\n            prefix: \"\",\r\n            suffix: \"前\",\r\n            seconds: \"几秒\",\r\n            minute: \"1分钟\",\r\n            minutes: \"%d分钟\",\r\n            hour: \"1小时\",\r\n            hours: \"%d小时\",\r\n            day: \"1天\",\r\n            days: \"%d天\",\r\n            week: \"1周\",\r\n            weeks: \"%d周\",\r\n            month: \"1个月\",\r\n            months: \"%d个月\",\r\n            year: \"1年\",\r\n            years: \"%d年\"\r\n        };\r\n        var template = function (t, n) {\r\n            return templates[t] && templates[t].replace(/%d/i, Math.abs(Math.round(n)));\r\n        };\r\n\r\n        var timer = function (time) {\r\n            if (!time) return;\r\n            time = time.replace(/\\.\\d+/, \"\"); // remove milliseconds\r\n            time = time.replace(/-/, \"/\").replace(/-/, \"/\");\r\n            time = time.replace(/T/, \" \").replace(/Z/, \" UTC\");\r\n            time = time.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\r\n            time = new Date(time * 1000 || time);\r\n\r\n            var now = new Date();\r\n            var seconds = ((now.getTime() - time) * .001) >> 0;\r\n            var minutes = seconds / 60;\r\n            var hours = minutes / 60;\r\n            var days = hours / 24;\r\n            var weeks = days / 7;\r\n            var months = days / 30;\r\n            var years = days / 365;\r\n\r\n            return templates.prefix + ( seconds < 45 && template('seconds', seconds) || seconds < 90 && template('minute', 1) || minutes < 45 && template('minutes', minutes) || minutes < 90 && template('hour', 1) || hours < 24 && template('hours', hours) || hours < 42 && template('day', 1) || days < 30 && template('days', days) || days < 45 && template('month', 1) || days < 365 && template('months', months) || years < 1.5 && template('year', 1) || template('years', years)) + templates.suffix;\r\n        };\r\n\r\n        var elements = _.dom.querySelectorAll('time[datetime]');\r\n        for (var i in elements) {\r\n            var $this = elements[i];\r\n            if (typeof $this === 'object') {\r\n                $this.title = new Date($this.getAttribute('datetime'));\r\n                $this.innerHTML = timer($this.getAttribute('datetime'));\r\n            }\r\n        }\r\n\r\n        // update time every minute\r\n        setTimeout(_.timeAgo.bind(_), 60000);\r\n\r\n    }\r\n\r\n    // 初始化评论框\r\n    iDisqus.prototype.init = function(){\r\n        var _ = this;\r\n        if(!_.dom){\r\n            //console.log('该页面没有评论框！');\r\n            return\r\n        }\r\n        // 表情\r\n        var emojiList = '';\r\n        _.emojiList.forEach(function(item){\r\n            emojiList += '<li class=\"emojione-item\" title=\"'+ item.title+'\" data-code=\":'+item.code+':\"><img class=\"emojione-item-image\" src=\"'+_.opts.emojiPath + item.unicode+'.png\" /></li>';\r\n        })\r\n        _.dom.innerHTML = '<div class=\"comment loading\" id=\"idisqus\">\\n'+\r\n            '    <div class=\"loading-container\" data-tip=\"正在加载评论……\"><svg class=\"loading-bg\" width=\"72\" height=\"72\" viewBox=\"0 0 720 720\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path class=\"ring\" fill=\"none\" stroke=\"#9d9ea1\" d=\"M 0 -260 A 260 260 0 1 1 -80 -260\" transform=\"translate(400,400)\" stroke-width=\"50\" /><polygon transform=\"translate(305,20)\" points=\"50,0 0,100 18,145 50,82 92,145 100,100\" style=\"fill:#9d9ea1\"/></svg></div>\\n'+\r\n            '    <div class=\"comment-header\"><span class=\"comment-header-item\" id=\"comment-count\">评论</span><a target=\"_blank\" class=\"comment-header-item\" id=\"comment-link\">Disqus 讨论区</a></div>\\n'+\r\n            '    <div class=\"comment-box\">\\n'+\r\n            '        <div class=\"comment-avatar avatar\"><img class=\"comment-avatar-image\" src=\"//a.disquscdn.com/images/noavatar92.png\" data-avatar=\"//a.disquscdn.com/images/noavatar92.png\"></div>\\n'+\r\n            '        <div class=\"comment-form\">\\n'+\r\n            '            <div class=\"comment-form-wrapper\">\\n'+\r\n            '                <textarea class=\"comment-form-textarea\" placeholder=\"加入讨论……\"></textarea>\\n'+\r\n            '                <div class=\"comment-form-alert\"></div>\\n'+\r\n            '                <div class=\"comment-image\">\\n'+\r\n            '                    <ul class=\"comment-image-list\"></ul>\\n'+\r\n            '                    <div class=\"comment-image-progress\">\\n'+\r\n            '                        <div class=\"comment-image-loaded\"></div>\\n'+\r\n            '                    </div>\\n'+\r\n            '                </div>\\n'+\r\n            '                <div class=\"comment-actions\">\\n'+\r\n            '                    <div class=\"comment-actions-group\">\\n'+\r\n            '                        <input id=\"emoji-input\" class=\"comment-actions-input\" type=\"checkbox\"> \\n'+\r\n            '                        <label class=\"comment-actions-label emojione\" for=\"emoji-input\">\\n'+\r\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\r\n            '                                <g>\\n'+\r\n            '                                <title>选择表情</title>\\n'+\r\n            '                                <path d=\"M512 1024c-282.713043 0-512-229.286957-512-512s229.286957-512 512-512c282.713043 0 512 229.286957 512 512S792.486957 1024 512 1024zM512 44.521739c-258.226087 0-467.478261 209.252174-467.478261 467.478261 0 258.226087 209.252174 467.478261 467.478261 467.478261s467.478261-209.252174 467.478261-467.478261C979.478261 253.773913 768 44.521739 512 44.521739z\"></path>\\n'+\r\n            '                                <path d=\"M801.391304 554.295652c0 160.278261-129.113043 289.391304-289.391304 289.391304s-289.391304-129.113043-289.391304-289.391304L801.391304 554.295652z\"></path>\\n'+\r\n            '                                <path d=\"M674.504348 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\\n'+\r\n            '                                <path d=\"M347.269565 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\\n'+\r\n            '                                </g>\\n'+\r\n            '                            </svg>\\n'+\r\n            '                            <ul class=\"emojione-list\">'+emojiList+'</ul>\\n'+\r\n            '                        </label>\\n'+\r\n            '                        <input id=\"upload-input\" class=\"comment-actions-input comment-image-input\" type=\"file\" accept=\"image/*\" name=\"file\"> \\n'+\r\n            '                        <label class=\"comment-actions-label\" for=\"upload-input\">\\n'+\r\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\r\n            '                                <g>\\n'+\r\n            '                                <title>上传图片</title>\\n'+\r\n            '                                <path d=\"M15.515152 15.515152 15.515152 15.515152 15.515152 15.515152Z\"></path>\\n'+\r\n            '                                <path d=\"M15.515152 139.636364l0 806.787879 992.969697 0 0-806.787879-992.969697 0zM946.424242 884.363636l-868.848485 0 0-682.666667 868.848485 0 0 682.666667zM698.181818 356.848485c0-51.417212 41.673697-93.090909 93.090909-93.090909s93.090909 41.673697 93.090909 93.090909c0 51.417212-41.673697 93.090909-93.090909 93.090909s-93.090909-41.673697-93.090909-93.090909zM884.363636 822.30303l-744.727273 0 186.181818-496.484848 248.242424 310.30303 124.121212-93.090909z\"></path>\\n'+\r\n            '                                </g>\\n'+\r\n            '                            </svg>\\n'+\r\n            '                        </label>\\n'+\r\n            '                    </div>\\n'+\r\n            '                    <div class=\"comment-actions-form\">\\n'+\r\n            '                        <label class=\"comment-actions-label exit\" title=\"退出登录\">\\n'+\r\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"48\" height=\"48\">\\n'+\r\n            '                                <path d=\"M348.870666 210.685443l378.570081 0c32.8205 0 58.683541 26.561959 58.683541 58.683541 0 162.043606 0 324.804551 0 486.848157 0 32.81129-26.561959 58.674331-58.683541 58.674331L348.870666 814.891472c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276c0-10.477632 8.372691-18.841114 18.850323-18.841114l343.645664 0c10.477632 0 18.850323-8.372691 18.850323-18.850323L711.366653 304.983109c0-10.477632-8.372691-18.841114-18.850323-18.841114L348.870666 286.141996c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276C329.98248 219.095997 338.393034 210.685443 348.870666 210.685443z\"></path>\\n'+\r\n            '                                <path d=\"M128.152728 526.436804l112.450095 112.450095c6.985088 6.985088 19.567661 6.985088 26.552749 0l26.561959-26.561959c6.985088-6.985088 6.985088-19.567661 0-26.552749l-34.925441-34.925441L494.168889 550.84675c10.477632 0 18.850323-8.372691 18.850323-18.850323l0-37.719066c0-10.477632-8.372691-18.850323-18.850323-18.850323L258.754229 475.427036l34.925441-34.925441c6.985088-6.985088 6.985088-19.567661 0-26.552749l-26.561959-26.524097c-6.985088-6.985088-19.567661-6.985088-26.552749 0L128.152728 499.875868C120.431883 506.859933 120.431883 519.451716 128.152728 526.436804z\"></path>\\n'+\r\n            '                            </svg>\\n'+\r\n            '                        </label>\\n'+\r\n            '                        <button class=\"comment-form-submit\">\\n'+\r\n            '                            <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\r\n            '                                <path d=\"M565.747623 792.837176l260.819261 112.921839 126.910435-845.424882L66.087673 581.973678l232.843092 109.933785 562.612725-511.653099-451.697589 563.616588-5.996574 239.832274L565.747623 792.837176z\" fill=\"#ffffff\"></path>\\n'+\r\n            '                            </svg>\\n'+\r\n            '                        </button>\\n'+\r\n            '                    </div>\\n'+\r\n            '                </div>\\n'+\r\n            '            </div>\\n'+\r\n            '            <div class=\"comment-form-user\">'+ ( _.opts.mode != 1 ? '<div class=\"comment-form-auth\"><button class=\"comment-form-login\" title=\"使用 Disqus 帐号登录\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 200 200\"><path fill=\"#2E9FFF\" d=\"M102.535 167.5c-16.518 0-31.621-6.036-43.298-16.021L30.5 155.405l11.102-27.401A67.658 67.658 0 0 1 35.564 100c0-37.277 29.984-67.5 66.971-67.5 36.984 0 66.965 30.223 66.965 67.5 0 37.284-29.98 67.5-66.965 67.5zm36.567-67.693v-.188c0-19.478-13.736-33.367-37.42-33.367h-25.58v67.5h25.201c23.868.001 37.799-14.468 37.799-33.945zm-37.138 17.361h-7.482V82.841h7.482c10.989 0 18.283 6.265 18.283 17.07v.188c0 10.896-7.294 17.069-18.283 17.069z\"/></svg></button></div><span> 或 </span>' : '' ) + '<form class=\"comment-form-guest\"><input class=\"comment-form-input comment-form-name\" type=\"text\" name=\"name\" placeholder=\"名字（必填）\" autocomplete=\"name\"><input class=\"comment-form-input comment-form-email\" type=\"email\" name=\"email\" placeholder=\"邮箱（必填）\" autocomplete=\"email\"><input class=\"comment-form-input comment-form-url\" type=\"url\" name=\"url\" placeholder=\"网址（可选）\" autocomplete=\"url\"></form></div>\\n'+\r\n            '        </div>\\n'+\r\n            '    </div>\\n'+\r\n            '    <ul id=\"comments\" class=\"comment-list\"></ul>\\n'+\r\n            '    <a href=\"javascript:;\" class=\"comment-loadmore\">加载更多</a>\\n'+\r\n            '    <div class=\"comment-popular\"></div>'+\r\n            '</div>\\n'+\r\n            '<div class=\"comment\" id=\"disqus_thread\"></div>';\r\n\r\n        _.user = new User(_.dom,_.opts);\r\n        _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论……/,'');\r\n        _.handle = {\r\n            logout: _.user.logout.bind(_),\r\n            login: _.user.login.bind(_),\r\n            loadMore: _.loadMore.bind(_),\r\n            post: _.post.bind(_),\r\n            postThread: _.postThread.bind(_),\r\n            remove: _.remove.bind(_),\r\n            show: _.show.bind(_),\r\n            toggle: _.toggle.bind(_),\r\n            upload: _.upload.bind(_),\r\n            verify: _.verify.bind(_),\r\n            jump: _.jump.bind(_),\r\n            mention: _.mention.bind(_),\r\n            keySelect: _.keySelect.bind(_),\r\n            field: _.field,\r\n            focus: _.focus,\r\n            input: _.input\r\n        };\r\n\r\n        switch(_.opts.mode){\r\n            case 1:\r\n                _.disqus();\r\n                break;\r\n            case 2: \r\n                _.getlist();\r\n                break;\r\n            case 3: \r\n                _.getlist();\r\n                _.disqus();\r\n                break;\r\n            default:\r\n                _.disqus();\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 切换评论框\r\n    iDisqus.prototype.toggle = function(){\r\n        var _ = this;\r\n        if( _.stat.current == 'disqus' ){\r\n            _.stat.current = 'idisqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'block';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        } else {\r\n            _.disqus();\r\n        }\r\n    }\r\n\r\n    // 加载 Disqus 评论\r\n    iDisqus.prototype.disqus = function(){\r\n        var _ = this;\r\n        var _tip = _.dom.querySelector('.loading-container').dataset.tip;\r\n        if(_.opts.site != location.origin){\r\n            //console.log('本地环境不加载 Disqus 评论框！');\r\n            if( _.opts.mode == 1 ){\r\n                _.getlist();\r\n            }\r\n            return;\r\n        }\r\n        if(!_.stat.disqusLoaded ){\r\n            _tip = '尝试连接 Disqus……';\r\n\r\n            var s = d.createElement('script');\r\n            s.src = '//'+_.opts.forum+'.disqus.com/embed.js';\r\n            s.dataset.timestamp = Date.now();\r\n            s.onload = function(){\r\n                _.stat.disqusLoaded = true;\r\n                _tip = '连接成功，加载 Disqus 评论框……'\r\n            } \r\n            s.onerror = function(){\r\n                if( _.opts.mode == 1){\r\n                    _tip = '连接失败，加载简易评论框……';\r\n                    _.getlist();\r\n                }\r\n            }\r\n\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('GET', '//disqus.com/next/config.json?' + Date.now(), true);\r\n            xhr.timeout = _.opts.timeout;\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4 && xhr.status == 200) {\r\n                    (d.head || d.body).appendChild(s);\r\n                }\r\n            }\r\n            xhr.ontimeout = function () {\r\n                xhr.abort();\r\n                if( _.opts.mode == 1){\r\n                    _tip = '连接超时，加载简易评论框……';\r\n                    _.getlist();\r\n                }\r\n            }\r\n            xhr.onerror = function() {\r\n                if( _.opts.mode == 1){\r\n                    _tip = '连接失败，加载简易评论框……';\r\n                    _.getlist();\r\n                }\r\n            }\r\n            xhr.send();\r\n        } else {\r\n            _.stat.current = 'disqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'none';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n        }\r\n    }\r\n\r\n    // 添加事件监听\r\n    iDisqus.prototype.addListener = function (els, evt, func){\r\n        var _ = this;\r\n        var el = _.dom.getElementsByClassName(els);\r\n        [].forEach.call(el, function(item){\r\n            item.addEventListener(evt, func, false);\r\n        });\r\n    }\r\n\r\n    // 移除事件监听\r\n    iDisqus.prototype.removeListener = function (els, evt, func){\r\n        var _ = this;\r\n        var el = _.dom.getElementsByClassName(els);\r\n        [].forEach.call(el, function(item){\r\n            item.removeEventListener(evt, func, false);\r\n        });\r\n    }\r\n\r\n    // 添加所有事件监听\r\n    iDisqus.prototype.addAllListeners = function (){\r\n        var _ = this;\r\n        _.addListener('exit', 'click', _.handle.logout);\r\n        _.addListener('comment-form-textarea', 'blur',  _.handle.focus);\r\n        _.addListener('comment-form-textarea', 'focus',  _.handle.focus);\r\n        _.addListener('comment-form-textarea', 'input',  _.handle.input);\r\n        _.addListener('comment-form-textarea', 'keyup',  _.handle.mention);\r\n        _.addListener('comment-form-name', 'blur',  _.handle.verify);\r\n        _.addListener('comment-form-email', 'blur',  _.handle.verify);\r\n        _.addListener('comment-form-submit', 'click',  _.handle.post);\r\n        _.addListener('comment-form-login', 'click',  _.handle.login);\r\n        _.addListener('comment-image-input', 'change',  _.handle.upload);\r\n        _.addListener('emojione-item', 'click', _.handle.field);\r\n    }\r\n\r\n    // 评论计数\r\n    iDisqus.prototype.count = function (){\r\n        var _ = this;\r\n        var counts = d.querySelectorAll('[data-disqus-url]');\r\n        var qty = counts.length;\r\n        if(qty > 0){\r\n            var commentArr = [];\r\n            for( var i = 0; i < qty; i++){\r\n                commentArr[i] = counts[i].dataset.disqusUrl.replace(_.opts.site, '');\r\n            }\r\n            getAjax(\r\n                _.opts.api + '/count.php?links=' + commentArr.join(','), \r\n                function(resp) {\r\n                    var data  = JSON.parse(resp);\r\n                    var posts = data.response;\r\n                    posts.forEach(function(item){\r\n                        var link = document.createElement('a');\r\n                        link.href = item.link;\r\n                        var itemLink = link.href.replace(link.origin, '');\r\n                        var el = d.querySelector('[data-disqus-url$=\"'+itemLink+'\"]')\r\n                        if(!!el ){\r\n                            el.innerHTML = item.posts;\r\n                            el.dataset.disqusCount = item.posts;\r\n                        }\r\n                    });\r\n                }, function(){\r\n                    console.log('获取数据失败！')\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    // 热门话题\r\n    iDisqus.prototype.popular = function(){\r\n        var _ = this;\r\n        getAjax(\r\n            _.opts.api + '/popular.php', \r\n            function(resp) {\r\n                var data = JSON.parse(resp);\r\n                if(data.code == 0){\r\n                    var threads = data.response;\r\n                    var popHtml = '';\r\n                    threads.forEach(function(item){\r\n                        item.topPost.raw_message = item.topPost.raw_message.replace(/(\\@\\w+):disqus/,'$1');\r\n                        popHtml += '<li class=\"popular-item\">'+\r\n                            '<a class=\"popular-item-link\" href=\"' + item.link  + '\" title=\"' + item.title + '\">'+\r\n                            '<div class=\"popular-item-title\">' + item.title + '</div>'+\r\n                            '<div class=\"popular-item-desc\">'+item.posts + '条评论<span class=\"popular-item-bullet\"> • </span><time class=\"popular-item-time\" datetime=\"' + item.createdAt + '\"></time></div></a>'+\r\n                            '<a class=\"popular-item-link\" href=\"' + item.link  +'?#comment-' + item.topPost.id + '\" title=\"' + item.topPost.raw_message + '\">'+\r\n                            '<div class=\"popular-item-post\">'+\r\n                            '<div class=\"popular-item-avatar\"><img src=\"'+item.topPost.avatar+'\" /></div>'+\r\n                            '<div class=\"popular-item-main\">'+\r\n                            '<div class=\"popular-item-name\">'+item.topPost.name+'</div>'+\r\n                            '<div class=\"popular-item-message\">'+item.topPost.raw_message+'</div>'+\r\n                            '</div>'+\r\n                            '</div></a>'+\r\n                            '</li>';\r\n                    });\r\n                    popHtml = '<div class=\"comment-popular-title\">在<span class=\"comment-popular-forumname\">'+_.opts.forum+'</span>上还有</div><div class=\"comment-popular-content\"><ul class=\"popular-list\">'+popHtml+'</ul></div>';\r\n                    _.dom.querySelector('.comment-popular').innerHTML = popHtml;\r\n                    _.timeAgo();\r\n                }\r\n            },function(){\r\n                console.log('获取数据失败！')\r\n            }\r\n        );\r\n    }\r\n\r\n    // 获取评论列表\r\n    iDisqus.prototype.getlist = function(){\r\n        var _ = this;\r\n        _.stat.loading = true;\r\n        _.dom.querySelector('#idisqus').style.display = 'block';\r\n        _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        getAjax(\r\n            _.opts.api + '/getcomments.php?ident=' + _.opts.identifier + '&link=' + _.opts.url + (!!_.stat.next ? '&cursor=' + _.stat.next : ''),\r\n            function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n                    _.stat.thread = data.thread;\r\n                    _.stat.total = data.cursor.total;\r\n                    _.forum = data.forum;\r\n                    _.opts.avatar = _.forum.avatar;\r\n                    _.dom.querySelector('.comment-avatar-image').dataset.avatar = _.forum.avatar;\r\n                    if( _.user.logged_in == 'false' ){\r\n                        _.dom.querySelector('.comment-avatar-image').src = _.forum.avatar;\r\n                    }\r\n                    _.opts.badge =  _.forum.moderatorBadgeText;\r\n                    _.dom.querySelector('#idisqus').classList.remove('loading');\r\n                    _.dom.querySelector('#comment-link').href = data.link;\r\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.total + ' 条评论';\r\n                    var loadmore = _.dom.querySelector('.comment-loadmore');\r\n                    var posts = !!data.response ? data.response : [];\r\n                    _.stat.root = [];\r\n                    posts.forEach(function(item){\r\n                        _.load(item);\r\n                        if(!item.parent){\r\n                            _.stat.root.unshift(item.id);\r\n                        }\r\n                    });\r\n\r\n                    if ( data.cursor.hasPrev ){\r\n                        _.stat.root.forEach(function(item){\r\n                            _.dom.querySelector('.comment-list').appendChild(_.dom.querySelector('#comment-' + item));\r\n                        })\r\n                    } else {\r\n                        loadmore.addEventListener('click', _.handle.loadMore, false);\r\n                        _.addAllListeners();\r\n                    }\r\n                    if ( data.cursor.hasNext ){\r\n                        _.stat.next = data.cursor.next;\r\n                        loadmore.classList.remove('loading');\r\n                    } else {\r\n                        _.stat.next = null;\r\n                        loadmore.classList.add('hide');\r\n                    }\r\n                    if (posts.length == 0) {\r\n                        return;\r\n                    }\r\n\r\n                    window.scrollTo(0, _.stat.offsetTop);\r\n\r\n                    _.timeAgo();\r\n\r\n                    if(_.forum.settings.organicDiscoveryEnabled){\r\n                        _.popular();\r\n                    }\r\n\r\n                    if (/^#disqus|^#comment-/.test(location.hash) && !data.cursor.hasPrev && !_.stat.disqusLoaded && !_.stat.loaded) {\r\n                        var el = _.dom.querySelector('#idisqus ' + location.hash)\r\n                        if( !!el ){\r\n                            window.scrollBy(0, el.getBoundingClientRect().top);\r\n                        }\r\n                    }\r\n                    _.stat.loading = false;\r\n                    _.stat.loaded = true;\r\n                } else if ( data.code === 2 ){\r\n                    _.create();\r\n                }\r\n            },function(){\r\n                alert('获取数据失败，请检查服务器设置。')\r\n            }\r\n        );\r\n    }\r\n\r\n    // 读取评论\r\n    iDisqus.prototype.load = function(post){\r\n\r\n        var _ = this;\r\n\r\n        var parentPostDom = _.dom.querySelector('.comment-item[data-id=\"'+post.parent+'\"]');\r\n\r\n        var user = {\r\n            username: post.username,\r\n            name: post.name,\r\n            avatar: post.avatar\r\n        }\r\n        if(!!post.username && _.stat.users.map(function(user) { return user.username; }).indexOf(post.username) == -1){\r\n            _.stat.users.push(user);\r\n        }\r\n        \r\n        var parentPost = !!post.parent ? {\r\n            name: '<a class=\"comment-item-pname\" href=\"#'+parentPostDom.id+'\"><svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\"><path d=\"M1.664 902.144s97.92-557.888 596.352-557.888V129.728L1024 515.84l-425.984 360.448V628.8c-270.464 0-455.232 23.872-596.352 273.28\"></path></svg>' + parentPostDom.dataset.name + '</a>',\r\n            dom: parentPostDom.querySelector('.comment-item-children'),\r\n            insert: 'afterbegin'\r\n        } : {\r\n            name: '',\r\n            dom: _.dom.querySelector('.comment-list'),\r\n            insert: post.id == 'preview' || !!post.isPost ? 'afterbegin' : 'beforeend'\r\n        };\r\n\r\n        var mediaHTML = '';\r\n        if( post.media.length == 1 ){\r\n            mediaHTML = '<div class=\"comment-item-images\"><a class=\"comment-item-image\" target=\"_blank\" href=\"' + post.media[0] + '\" style=\"background-image: url('+post.media[0]+');width: 167px;height: 167px\"></a></div>';\r\n        } else if( post.media.length > 1 ){\r\n            post.media.forEach(function(item){\r\n                mediaHTML += '<a class=\"comment-item-image\" target=\"_blank\" href=\"' + item + '\" style=\"background-image: url('+item+')\"></a>';\r\n            })\r\n            mediaHTML = '<div class=\"comment-item-images\">' + mediaHTML + '</div>';\r\n        }\r\n\r\n        var html = '<li class=\"comment-item\" data-id=\"' + post.id + '\" data-name=\"'+ post.name + '\" id=\"comment-' + post.id + '\">' +\r\n            '<div class=\"comment-item-body\">'+\r\n            '<a class=\"comment-item-avatar\" href=\"#comment-'+post.id+'\"><img src=\"' + post.avatar + '\"></a>'+\r\n            '<div class=\"comment-item-main\">'+\r\n            '<div class=\"comment-item-header\"><a class=\"comment-item-name\" title=\"' + post.name + '\" rel=\"nofollow\" target=\"_blank\" href=\"' + ( post.url ? post.url : 'javascript:;' ) + '\">' + post.name + '</a>'+ (post.isMod ?'<span class=\"comment-item-badge\">'+_.opts.badge+'</span>' :'')+parentPost.name+'<span class=\"comment-item-bullet\"> • </span><time class=\"comment-item-time\" datetime=\"' + post.createdAt + '\"></time></div>'+\r\n            '<div class=\"comment-item-content\">' + post.message + mediaHTML + '</div>'+\r\n            '<div class=\"comment-item-footer\">' + (!!post.isPost ? '<span class=\"comment-item-manage\"><a class=\"comment-item-edit\" href=\"javascript:;\">编辑</a><span class=\"comment-item-bullet\"> • </span><a class=\"comment-item-delete\" href=\"javascript:;\">删除</a><span class=\"comment-item-bullet\"> • </span></span>' : '') + '<a class=\"comment-item-reply\" href=\"javascript:;\">回复</a> </div>'+\r\n            '</div></div>'+\r\n            '<ul class=\"comment-item-children\"></ul>'+\r\n            '</li>';\r\n\r\n        // 已删除评论\r\n        if(!!post.isDeleted){\r\n            html = '<li class=\"comment-item\" data-id=\"' + post.id + '\" id=\"comment-' + post.id + '\" data-name=\"已删除\">' +\r\n                '<div class=\"comment-item-body\">'+\r\n                '<a class=\"comment-item-avatar\" href=\"#comment-'+post.id+'\"><img src=\"' + post.avatar + '\"></a>'+\r\n                '<div class=\"comment-item-main\" data-message=\"此评论已被删除。\"></div></div>'+\r\n                '<ul class=\"comment-item-children\"></ul>'+\r\n                '</li>';\r\n        }\r\n\r\n\r\n        // 更新 or 创建\r\n        if(!!_.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]')){\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]').outerHTML = html;\r\n        } else {\r\n            parentPost.dom.insertAdjacentHTML(parentPost.insert, html);\r\n        }\r\n\r\n        if(!post.isDeleted){\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-reply').addEventListener('click', _.handle.show, false);\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-avatar').addEventListener('click', _.handle.jump, false);\r\n            if( !!post.parent ) {\r\n                _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-pname').addEventListener('click', _.handle.jump, false);\r\n            }\r\n        }\r\n\r\n        // 发布留言，可编辑删除\r\n        if(!!post.isPost && !_.stat.editing){\r\n            var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]');\r\n\r\n            var postEdit = setTimeout(function(){\r\n                // 十分钟后\r\n                if(!!$this.querySelector('.comment-item-manage')){\r\n                    $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                }\r\n            }, 600000);\r\n\r\n            // 删除\r\n            $this.querySelector('.comment-item-delete').addEventListener('click',function(e){\r\n                var postData = {\r\n                    id: post.id,\r\n                    identifier: _.opts.identifier\r\n                }\r\n                var delDom = e.currentTarget;\r\n                delDom.innerHTML = '删除中';\r\n                postAjax( _.opts.api + '/removecomment.php', postData, function(resp){\r\n                    var data = JSON.parse(resp);\r\n                    if (data.code === 0) {\r\n                        if(data.response.isDeleted == true){\r\n                            $this.outerHTML = '';\r\n                        } else {\r\n                            alert(data.response.message);\r\n                            $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                        }\r\n                    } else if (data.code === 2) {\r\n                        alert(data.response);\r\n                        $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                    }\r\n                }, function(){\r\n                    alert('删除出错，请稍后重试');\r\n                })\r\n                clearTimeout(postEdit);\r\n            }, false)\r\n\r\n            // 编辑\r\n            $this.querySelector('.comment-item-edit').addEventListener('click',function(){\r\n                _.stat.editing = post;\r\n                _.edit(post);\r\n            }, false)\r\n        }\r\n    }\r\n\r\n    // 读取更多\r\n    iDisqus.prototype.loadMore = function(e){\r\n        var _ = this;\r\n        _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n        if( !_.stat.loading ){\r\n            e.currentTarget.classList.add('loading');\r\n            _.getlist();\r\n        }\r\n    }\r\n\r\n    // 评论框焦点\r\n    iDisqus.prototype.focus = function(e){\r\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\r\n        wrapper.classList.add('editing');\r\n        if (wrapper.classList.contains('focus')){\r\n            wrapper.classList.remove('focus');\r\n        } else{\r\n            wrapper.classList.add('focus');\r\n        }\r\n    }\r\n\r\n    // 输入事件\r\n    iDisqus.prototype.input = function(e){\r\n        var form = e.currentTarget.closest('.comment-form');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n    }\r\n\r\n    // 提醒用户 @ mention \r\n    iDisqus.prototype.mention = function(e){\r\n        var _ = this;\r\n        var textarea = e.currentTarget;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        if(mentionText.search(/^@\\w+$|^@$/) == 0){\r\n            if( e.keyCode == 38 || e.keyCode == 40){\r\n                return;\r\n            }\r\n            var showUsers = _.stat.users.filter(function(user){\r\n                var re = new RegExp(mentionText.slice(1), 'i');\r\n                return user.username.search(re) > -1;\r\n            });\r\n            var coord = _.getCaretCoord(textarea);\r\n            var list='', html = '';\r\n\r\n            if( showUsers.length > 0){\r\n                showUsers.forEach(function(item, i){\r\n                    list += '<li class=\"mention-user-item'+(i == 0 ? ' active' : '')+'\" data-username=\"'+item.username+'\"><img class=\"mention-user-avatar\" src=\"'+item.avatar+'\"><div class=\"mention-user-username\">'+item.username+'</div><div class=\"mention-user-name\">'+item.name+'</div></li>';\r\n                })\r\n                if(!!mentionDom){\r\n                    mentionDom.innerHTML = '<ul class=\"mention-user-list\">'+list+'</ul>';\r\n                    mentionDom.style.left = coord.left + 'px';\r\n                    mentionDom.style.top = coord.top + 'px';\r\n                } else {\r\n                    html = '<div class=\"mention-user\" style=\"left:'+coord.left+'px;top:'+coord.top+'px\"><ul class=\"mention-user-list\">'+list+'</ul></div>';\r\n                    _.dom.querySelector('#idisqus').insertAdjacentHTML('beforeend', html);\r\n                }\r\n\r\n                // 鼠标悬浮\r\n                _.addListener('mention-user-item', 'mouseover', function(){\r\n                    _.dom.querySelector('.mention-user-item.active').classList.remove('active');\r\n                    this.classList.add('active');\r\n                })\r\n\r\n                // 鼠标点击\r\n                _.addListener('mention-user-item', 'click', function(){\r\n                    var username = '@' + this.dataset.username + ' ';\r\n                    textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                    _.dom.querySelector('.mention-user').outerHTML = '';\r\n                    textarea.focus();\r\n                    textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n                    textarea.removeEventListener('keydown', _.handle.keySelect, false);\r\n                })\r\n\r\n                // 键盘事件\r\n                textarea.addEventListener('keydown', _.handle.keySelect, false);\r\n            } else{\r\n                if(!!mentionDom){\r\n                    mentionDom.outerHTML = '';\r\n                    textarea.removeEventListener('keydown', _.handle.keySelect, false);\r\n                }\r\n            }\r\n        } else {\r\n            if(!!mentionDom){\r\n                mentionDom.outerHTML = '';\r\n                textarea.removeEventListener('keydown', _.handle.keySelect, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 获取光标坐标 https://medium.com/@_jh3y/how-to-where-s-the-caret-getting-the-xy-position-of-the-caret-a24ba372990a\r\n    iDisqus.prototype.getCaretCoord = function(textarea){\r\n        var _ = this;\r\n        var carPos = textarea.selectionEnd,\r\n            div = d.createElement('div'),\r\n            span = d.createElement('span'),\r\n            copyStyle = getComputedStyle(textarea);\r\n        [].forEach.call(copyStyle, function(prop){\r\n            div.style[prop] = copyStyle[prop];\r\n        });\r\n        div.style.position = 'absolute';\r\n        _.dom.appendChild(div);\r\n        div.textContent = textarea.value.substr(0, carPos);\r\n        span.textContent = textarea.value.substr(carPos) || '.';\r\n        div.appendChild(span);\r\n        var coords = {\r\n            'top': textarea.offsetTop - textarea.scrollTop + span.offsetTop + parseFloat(copyStyle.lineHeight),\r\n            'left': textarea.offsetLeft - textarea.scrollLeft + span.offsetLeft\r\n        };\r\n        _.dom.removeChild(div);\r\n        return coords;\r\n    }\r\n\r\n    // 键盘选择用户\r\n    iDisqus.prototype.keySelect = function(e){\r\n        var _ = this;\r\n        var textarea = e.currentTarget;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        var current = _.dom.querySelector('.mention-user-item.active')\r\n        switch(e.keyCode){\r\n            case 13:\r\n                //回车\r\n                var username = '@' + current.dataset.username + ' ';\r\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n                _.dom.querySelector('.mention-user').outerHTML = '';\r\n                textarea.removeEventListener('keydown', _.handle.keySelect, false);\r\n                e.preventDefault();\r\n                break;\r\n            case 38:\r\n                //上\r\n                if(!!current.previousSibling){\r\n                    current.previousSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            case 40:\r\n                //下\r\n                if(!!current.nextSibling){\r\n                    current.nextSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 跳到评论\r\n    iDisqus.prototype.jump = function(e){\r\n        var _ = this;\r\n        var $this = e.currentTarget;\r\n        var hash = getLocation($this.href).hash;\r\n        var el = _.dom.querySelector('#idisqus ' + hash);\r\n        history.replaceState(undefined, undefined, hash);\r\n        window.scrollBy(0, el.getBoundingClientRect().top);\r\n        e.preventDefault();\r\n    }\r\n\r\n    // 点选表情\r\n    iDisqus.prototype.field = function(e){\r\n        var item = e.currentTarget;\r\n        var form = item.closest('.comment-form');\r\n        var textarea = form.querySelector('.comment-form-textarea');\r\n        var selStart = textarea.selectionStart;\r\n        var shortCode = selStart == 0 ? item.dataset.code + ' ' : ' ' + item.dataset.code + ' '\r\n        textarea.value = textarea.value.slice(0, selStart) + shortCode + textarea.value.slice(selStart) \r\n        textarea.focus();\r\n        textarea.setSelectionRange(selStart + shortCode.length, selStart + shortCode.length);\r\n    }\r\n\r\n    // 显示回复框 or 取消回复框\r\n    iDisqus.prototype.show = function(e){\r\n        var _ = this;\r\n\r\n        var $this = e.currentTarget;\r\n        var item = $this.closest('.comment-item');\r\n\r\n        // 无论取消还是回复，移除已显示回复框\r\n        var box = _.dom.querySelector('.comment-item .comment-box:not([data-current-id])');\r\n        if( box ){\r\n            var $show = box.closest('.comment-item');\r\n            var cancel = $show.querySelector('.comment-item-cancel')\r\n            cancel.outerHTML = cancel.outerHTML.replace('cancel','reply');\r\n            box.outerHTML = '';\r\n        }\r\n\r\n        // 回复时，显示评论框\r\n        if( $this.className == 'comment-item-reply' ){\r\n            $this.outerHTML = $this.outerHTML.replace('reply','cancel');\r\n            var commentBox = _.box.replace(/emoji-input/g,'emoji-input-'+item.dataset.id).replace(/upload-input/g,'upload-input-'+item.dataset.id);\r\n            item.querySelector('.comment-item-children').insertAdjacentHTML('beforebegin', commentBox);\r\n            _.user.init();\r\n\r\n            _.addAllListeners();\r\n            item.querySelector('.comment-form-textarea').focus();\r\n        }\r\n\r\n        // 监听事件\r\n        _.addListener('comment-item-reply', 'click', _.handle.show);\r\n        _.addListener('comment-item-cancel', 'click', _.handle.show);\r\n\r\n    }\r\n\r\n    // 验证表单\r\n    iDisqus.prototype.verify = function(e){\r\n        var _ = this;\r\n        var $this = e.currentTarget;\r\n        var box  = $this.closest('.comment-box');\r\n        var $avatar = box.querySelector('.comment-avatar-image');\r\n        var $name = box.querySelector('.comment-form-name');\r\n        var $email = box.querySelector('.comment-form-email');\r\n        var alertmsg = box.querySelector('.comment-form-alert');\r\n        if($email.value == ''){\r\n            return;\r\n        }\r\n        getAjax(\r\n            _.opts.api + '/getgravatar.php?email=' + $email.value + '&name=' + $name.value,\r\n            function(resp) {\r\n                var data  = JSON.parse(resp);\r\n                if ( !data.isEmail && $this == $email) {\r\n                    _.errorTips('您所填写的邮箱地址有误。', $email);\r\n                }\r\n                if ($name.value != '') {\r\n                    $avatar.src = data.gravatar;\r\n                }\r\n            }, function(){\r\n            }\r\n        );\r\n    }\r\n\r\n    // 上传图片\r\n    iDisqus.prototype.upload = function(e){\r\n        var _ = this;\r\n        var file = e.currentTarget;\r\n        var form = file.closest('.comment-form');\r\n        var progress = form.querySelector('.comment-image-progress');\r\n        var loaded = form.querySelector('.comment-image-loaded');\r\n        var wrapper = form.querySelector('.comment-form-wrapper');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n        if(file.files.length === 0){\r\n            return;\r\n        }\r\n\r\n        // 以文件大小识别是否为同张图片\r\n        var size = file.files[0].size;\r\n\r\n        if( size > 5000000 ){\r\n            alertmsg.innerHTML = '请选择 5M 以下图片。';\r\n            setTimeout(function(){\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        if( _.stat.imageSize.indexOf(size) == -1 ){\r\n            progress.style.width = '80px';\r\n        } else {\r\n            alertmsg.innerHTML = '请勿选择已存在的图片。';\r\n            setTimeout(function(){\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        // 展开图片上传界面\r\n        wrapper.classList.add('expanded');\r\n\r\n        // 图片上传请求\r\n        var data = new FormData();\r\n        data.append('file', file.files[0] );\r\n        var filename = file.files[0].name;\r\n\r\n        var $item;\r\n\r\n        var xhrUpload = new XMLHttpRequest();\r\n        xhrUpload.withCredentials = true;\r\n        xhrUpload.onreadystatechange = function(){\r\n            if(xhrUpload.readyState == 4 && xhrUpload.status == 200){\r\n                var data = JSON.parse(xhrUpload.responseText);\r\n                if( data.code == 0 ){\r\n                    _.stat.imageSize.push(size);\r\n                    var imageUrl = data.response[filename].url;\r\n                    var image = new Image();\r\n                    image.src = imageUrl;\r\n                    image.onload = function(){\r\n                        $item.innerHTML = '<img class=\"comment-image-object\" src=\"'+imageUrl+'\">';\r\n                        $item.dataset.imageUrl = imageUrl;\r\n                        $item.classList.remove('loading');\r\n                        $item.addEventListener('click', _.handle.remove, false);\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '图片上传出错。';\r\n                    $item.innerHTML = '';\r\n                    if( !!form.getElementsByClassName('comment-image-item').length){\r\n                        wrapper.classList.remove('expanded');\r\n                    }\r\n                    setTimeout(function(){\r\n                        alertmsg.innerHTML = '';\r\n                    }, 3000);\r\n                }\r\n            }\r\n        };\r\n        xhrUpload.upload.addEventListener('progress', function(e){\r\n            loaded.style.width = Math.ceil((e.loaded/e.total) * 100)+ '%';\r\n        }, false);\r\n        xhrUpload.upload.addEventListener('load', function(e){\r\n            loaded.style.width = 0;\r\n            progress.style.width = 0;\r\n            var imageItem = '<li class=\"comment-image-item loading\" data-image-size=\"' + size + '\">\\n'+\r\n                '    <svg version=\"1.1\" class=\"comment-image-object\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n'+\r\n                '        width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\" style=\"enable-background: new 0 0 50 50;\" xml:space=\"preserve\">\\n'+\r\n                '        <rect x=\"0\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\r\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '        </rect>\\n'+\r\n                '        <rect x=\"8\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\r\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '        </rect>\\n'+\r\n                '        <rect x=\"16\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\r\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '        </rect>\\n'+\r\n                '    </svg>\\n'+\r\n                '</li>\\n';\r\n            form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageItem);\r\n            $item = form.querySelector('[data-image-size=\"'+size+'\"]');\r\n        }, false);\r\n        xhrUpload.open('POST', _.opts.api + '/upload.php', true);\r\n        xhrUpload.send(data);\r\n    }\r\n\r\n    // 移除图片\r\n    iDisqus.prototype.remove = function(e){\r\n        var _ = this;\r\n        var $item = e.currentTarget.closest('.comment-image-item');\r\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\r\n        $item.outerHTML = '';\r\n        _.stat.imageSize = [];\r\n        var imageArr = wrapper.getElementsByClassName('comment-image-item');\r\n        [].forEach.call(imageArr, function(item, i){\r\n            _.stat.imageSize[i] = item.dataset.imageSize;\r\n        });\r\n        if(_.stat.imageSize.length == 0){\r\n            wrapper.classList.remove('expanded');\r\n        }\r\n        wrapper.querySelector('.comment-image-input').value = '';\r\n    }\r\n\r\n    // 错误提示\r\n    iDisqus.prototype.errorTips = function(Text, Dom){\r\n        var _ = this;\r\n        if( _.user.logged_in == 'true' ){\r\n            _.handle.logout();\r\n        }\r\n        var idisqus = _.dom.querySelector('#idisqus');\r\n        var errorDom = _.dom.querySelector('.comment-form-error');\r\n        if(!!errorDom){\r\n            errorDom.outerHTML = '';\r\n        }\r\n        var Top = Dom.offsetTop;\r\n        var Left = Dom.offsetLeft;\r\n        var errorHtml = '<div class=\"comment-form-error\" style=\"top:'+Top+'px;left:'+Left+'px;\">'+Text+'</div>';\r\n        idisqus.insertAdjacentHTML('beforeend', errorHtml);\r\n        setTimeout(function(){\r\n            var errorDom = _.dom.querySelector('.comment-form-error');\r\n            if(!!errorDom){\r\n                errorDom.outerHTML = '';\r\n            }\r\n        }, 3000);\r\n    }\r\n\r\n    // 发表/回复评论\r\n    iDisqus.prototype.post = function(e){\r\n        var _ = this;\r\n        var item =  e.currentTarget.closest('.comment-box[data-current-id]') || e.currentTarget.closest('.comment-item') || e.currentTarget.closest('.comment-box');\r\n        var message = item.querySelector('.comment-form-textarea').value;\r\n        var parentId = !!item.dataset.id ? item.dataset.id : '';\r\n        var imgArr = item.getElementsByClassName('comment-image-item');\r\n        var media = [];\r\n        var mediaStr = '';\r\n        [].forEach.call(imgArr, function(image,i){\r\n            media[i] = image.dataset.imageUrl;\r\n            mediaStr += ' ' + image.dataset.imageUrl;\r\n        });\r\n\r\n        // 不是编辑框需预览\r\n        if( !item.dataset.currentId ){\r\n            var elName = item.querySelector('.comment-form-name');\r\n            var elEmail = item.querySelector('.comment-form-email');\r\n            var elUrl = item.querySelector('.comment-form-url');\r\n            var user = {\r\n                name: elName.value,\r\n                email: elEmail.value,\r\n                url: elUrl.value.replace(/\\s/g,''),\r\n                avatar: item.querySelector('.comment-avatar-image').src,\r\n                type: 0\r\n            }\r\n            var alertmsg = item.querySelector('.comment-form-alert');\r\n            var alertClear = function() {\r\n                setTimeout(function(){\r\n                    alertmsg.innerHTML = '';\r\n                }, 3000);\r\n            }\r\n\r\n            if(_.user.type != '1'){\r\n                if(/^\\s*$/i.test(user.name)){\r\n                    _.errorTips('名字不能为空。', elName);\r\n                    return;\r\n                }\r\n                if(/^\\s*$/i.test(user.email)){\r\n                    _.errorTips('邮箱不能为空。', elEmail);\r\n                    return;\r\n                }\r\n                if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(user.email)){\r\n                    _.errorTips('请正确填写邮箱。', elEmail);\r\n                    return;\r\n                }\r\n                if(!/^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(([A-Za-z0-9-~]+)\\.)+([A-Za-z0-9-~\\/])+$|^\\s*$/i.test(user.url)){\r\n                    _.errorTips('请正确填写网址。', elUrl);\r\n                    return;\r\n                }\r\n                _.user.submit(user);\r\n\r\n                if( !_.user.name && !_.user.email ){\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if(!_.stat.message && !_.stat.mediaHtml){\r\n                _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论……/,'');\r\n            }\r\n\r\n            if( media.length == 0 && /^\\s*$/i.test(message)){\r\n                alertmsg.innerHTML = '评论不能为空或空格。';\r\n                item.querySelector('.comment-form-textarea').focus();\r\n                return;\r\n            };\r\n\r\n            var preMessage = message;\r\n\r\n            if( !!_.opts.emoji_preview ){\r\n                preMessage = preMessage.replace(/:([-+\\w]+):/g, function (match){\r\n                    var emojiShort = match.replace(/:/g,'');\r\n                    var emojiImage = !!_.eac[emojiShort] ? '<img class=\"emojione\" width=\"24\" height=\"24\" alt=\"'+emojiShort+'\" title=\":'+emojiShort+':\" src=\"'+_.opts.emojiPath +_.eac[emojiShort]+'.png\">' : match;\r\n                    return emojiImage;\r\n                });\r\n            } else {\r\n                _.emojiList.forEach(function(item){\r\n                    preMessage = preMessage.replace(':'+item.code+':', '<img class=\"emojione\" width=\"24\" height=\"24\" src=\"' + _.opts.emojiPath + item.unicode + '.png\" />');\r\n                });\r\n            }\r\n\r\n            var post = {\r\n                'url': !!_.user.url ? _.user.url : '',\r\n                'isMod': false,\r\n                'username': null,\r\n                'name': _.user.name,\r\n                'avatar': _.user.avatar,\r\n                'id': 'preview',\r\n                'parent': parentId,\r\n                'createdAt': (new Date()).toJSON(),\r\n                'message': '<p>' + preMessage + '</p>',\r\n                'media': media\r\n            };\r\n\r\n            _.load(post);\r\n\r\n            _.timeAgo();\r\n\r\n            // 清空或移除评论框\r\n            _.stat.message = message;\r\n            _.stat.mediaHtml = item.querySelector('.comment-image-list').innerHTML;\r\n\r\n            if( parentId ){\r\n                item.querySelector('.comment-item-cancel').click();\r\n            } else {\r\n                item.querySelector('.comment-form-textarea').value = '';\r\n                item.querySelector('.comment-image-list').innerHTML = '';\r\n                item.querySelector('.comment-form-wrapper').classList.remove('expanded','editing');\r\n            }\r\n        }\r\n\r\n        // @\r\n        var mentions = message.match(/@\\w+/g);\r\n        if( !!mentions ){\r\n            mentions = mentions.filter(function(mention) {\r\n                return _.stat.users.map(function(user) { return user.username; }).indexOf(mention.slice(1)) > -1;\r\n            });\r\n            if( mentions.length > 0 ){\r\n                var re = new RegExp('('+mentions.join('|')+')','g');\r\n                message = message.replace(re,'$1:disqus');\r\n            }\r\n        }\r\n\r\n        // 文本 + 图片\r\n        message += mediaStr;\r\n\r\n        // POST 操作\r\n        // 编辑框则更新评论\r\n        if( !!item.dataset.currentId ){\r\n            var postData = {\r\n                id: item.dataset.currentId,\r\n                message: message,\r\n            }\r\n            postAjax( _.opts.api + '/updatecomment.php', postData, function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.message = null;\r\n                    _.stat.mediaHtml = null;\r\n                    var post = data.response;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                } else {\r\n                    // 取消编辑\r\n                    _.load(_.stat.editing)\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                }\r\n            }, function(){\r\n                // 取消编辑\r\n                _.load(_.stat.editing)\r\n                _.timeAgo();\r\n                _.stat.editing = false;\r\n            })\r\n        } else {\r\n            var postData = {\r\n                thread:  _.stat.thread.id,\r\n                parent: parentId,\r\n                message: message,\r\n                name: _.user.name,\r\n                email: _.user.email,\r\n                url:  _.user.url,\r\n                identifier: _.opts.identifier\r\n            }\r\n            postAjax( _.opts.api + '/postcomment.php', postData, function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.stat.total += 1;\r\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.total + ' 条评论';\r\n                    var post = data.response;\r\n                    post.isPost = true;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    if(!!data.verifyCode){\r\n                        var postData = {\r\n                            post: JSON.stringify(post),\r\n                            thread: JSON.stringify(data.thread),\r\n                            parent: JSON.stringify(data.parent),\r\n                            code: data.verifyCode\r\n                        }\r\n                        // 异步发送邮件\r\n                        postAjax( _.opts.api + '/sendemail.php', postData, function(resp){\r\n                            console.info('邮件发送成功！');\r\n                        })\r\n                    }\r\n                } else if (data.code === 2) {\r\n                    alertmsg.innerHTML = data.response;\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n\r\n                    if( data.response.indexOf('author') > -1){\r\n                        _.handle.logout();\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '提交失败，请稍后重试，错误代码：' + data.code;\r\n                    alertClear();\r\n\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n                }\r\n\r\n            }, function(){\r\n                alertmsg.innerHTML = '提交出错，请稍后重试。';\r\n                alertClear();\r\n\r\n                _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                _.reEdit(item);\r\n            })\r\n        }\r\n    }\r\n\r\n    // 重新编辑\r\n    iDisqus.prototype.reEdit = function(item){\r\n        var _ = this;\r\n\r\n        if( !!item.dataset.id ){\r\n            item.querySelector('.comment-item-reply').click();\r\n        } else {\r\n            item.querySelector('.comment-form-wrapper').classList.add('editing');\r\n        }\r\n\r\n        // 重新填充文本图片\r\n        if(!!_.stat.message){\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if(!!_.stat.mediaHtml){\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n            _.addListener('comment-image-item', 'click', _.handle.remove);\r\n        }\r\n    }\r\n\r\n    // 编辑\r\n    iDisqus.prototype.edit = function(post){\r\n        var _ = this;\r\n        var commentBox = _.box.replace('comment-box','comment-box comment-box-'+post.id).replace(/emoji-input/g,'emoji-input-'+post.id).replace(/upload-input/g,'upload-input-'+ post.id);\r\n        var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-body');\r\n        $this.outerHTML = commentBox;\r\n        _.user.init();\r\n        var item = _.dom.querySelector('.comment-box-' + post.id);\r\n        item.dataset.currentId = post.id;\r\n        _.addAllListeners();\r\n        item.querySelector('.comment-form-textarea').focus();\r\n\r\n        // 取消编辑\r\n        item.querySelector('.comment-actions-form').insertAdjacentHTML('afterbegin', '<a class=\"comment-form-cancel\" href=\"javascript:;\">取消</a>')\r\n        item.querySelector('.comment-form-cancel').addEventListener('click', function(){\r\n            _.stat.editing = false;\r\n            _.load(post);\r\n            _.timeAgo();\r\n        }, false);\r\n\r\n        // 重新填充文本图片，连续回复、连续编辑会有 bug\r\n        if(!!_.stat.message){\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if(!!_.stat.mediaHtml){\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n            _.addListener('comment-image-item', 'click', _.handle.remove);\r\n        }\r\n\r\n    }\r\n\r\n    // 创建 Thread 表单\r\n    iDisqus.prototype.create = function(){\r\n        var _ = this;\r\n        if(_.opts.autoCreate){\r\n            _.dom.querySelector('.loading-container').dataset.tip = '正在创建 Thread……';\r\n            var postData = {\r\n                url: _.opts.link,\r\n                identifier: _.opts.identifier,\r\n                title: _.opts.title,\r\n                slug: _.opts.slug,\r\n                message: _.opts.desc\r\n            }\r\n            _.postThread(postData);\r\n            return;\r\n        }\r\n        _.dom.querySelector('#idisqus').classList.remove('loading');\r\n        _.dom.querySelector('#idisqus').innerHTML  = '<div class=\"comment-header\"><span class=\"comment-header-item\">创建 Thread<\\/span><\\/div>'+\r\n            '<div class=\"comment-thread-form\">'+\r\n            '<p>由于 Disqus 没有本页面的相关 Thread，故需先创建 Thread<\\/p>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">url:<\\/label><input class=\"comment-form-input\" id=\"thread-url\" name=\"url\" value=\"' + _.opts.link + '\" disabled \\/><\\/div>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">identifier:<\\/label><input class=\"comment-form-input\" id=\"thread-identifier\" name=\"identifier\" value=\"'+_.opts.identifier+'\" disabled \\/><\\/div>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">title:<\\/label><input class=\"comment-form-input\" id=\"thread-title\" name=\"title\" value=\"'+_.opts.title+'\" disabled \\/><\\/div>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">slug:<\\/label><input class=\"comment-form-input\" id=\"thread-slug\" name=\"slug\" value=\"' + _.opts.slug + '\" \\/><\\/div>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">message:<\\/label><textarea class=\"comment-form-textarea\" id=\"thread-message\" name=\"message\">'+_.opts.desc+'<\\/textarea><\\/div>'+\r\n            '<button id=\"thread-submit\" class=\"comment-form-submit\">提交<\\/button><\\/div>';\r\n        _.dom.querySelector('#thread-submit').addEventListener('click', _.handle.postThread, false);\r\n    }\r\n\r\n    // 创建 Thread 事件\r\n    iDisqus.prototype.postThread = function(){\r\n        var _ = this;\r\n        if( !!arguments[0].target ){\r\n            var postData = {\r\n                url: _.dom.querySelector('#thread-url').value,\r\n                identifier: _.dom.querySelector('#thread-identifier').value,\r\n                title: _.dom.querySelector('#thread-title').value,\r\n                slug: _.dom.querySelector('#thread-slug').value.replace(/[^A-Za-z0-9_-]+/g,''),\r\n                message: _.dom.querySelector('#thread-message').value\r\n            }\r\n        } else {\r\n            var postData = arguments[0];\r\n        }\r\n        postAjax( _.opts.api + '/createthread.php', postData, function(resp){\r\n            var data = JSON.parse(resp);\r\n            if( data.code === 0 ) {\r\n                alert('创建 Thread 成功，刷新后便可愉快地评论了！');\r\n                setTimeout(function(){location.reload();},2000);\r\n            } else if( data.code === 2 ) {\r\n                if (data.response.indexOf('A thread already exists with link') > -1) {\r\n                    alert(data.response.replace('A thread already exists with link,', '已存在此链接的相关 Thread，'));\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid URL') > -1) {\r\n                    alert('参数错误，无效的\\'URL\\'');\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid slug') > -1) {\r\n                    alert('参数错误，无效的\\'slug\\'');\r\n                    return;\r\n                }\r\n                alert(data.response);\r\n                return;\r\n            } else { \r\n                alert(data.response);\r\n                return;\r\n            }\r\n        }, function(){\r\n            alert('创建 Thread 出错，请稍后重试！');\r\n        })\r\n    }\r\n\r\n    // 销毁评论框\r\n    iDisqus.prototype.destroy = function(){\r\n        var _ = this;\r\n        _.removeListener('exit', 'click', _.handle.logout);\r\n        _.removeListener('comment-form-textarea', 'blur', _.handle.focus);\r\n        _.removeListener('comment-form-textarea', 'focus', _.handle.focus);\r\n        _.removeListener('comment-form-textarea', 'keyup', _.handle.mention);\r\n        _.removeListener('comment-form-name', 'blur', _.handle.verify);\r\n        _.removeListener('comment-form-email', 'blur', _.handle.verify);\r\n        _.removeListener('comment-form-submit', 'click', _.handle.post);\r\n        _.removeListener('comment-image-input', 'change', _.handle.upload);\r\n        _.removeListener('comment-item-reply', 'click', _.handle.show);\r\n        _.removeListener('comment-loadmore', 'click', _.handle.loadMore);\r\n        _.removeListener('emojione-item', 'click', _.handle.field);\r\n        _.dom.innerHTML = '';\r\n        delete _.box;\r\n        delete _.dom;\r\n        delete _.emojiList;\r\n        delete _.user;\r\n        delete _.handle;\r\n        delete _.opts;\r\n        delete _.stat;\r\n    }\r\n\r\n    /* CommonJS */\r\n    if (typeof require === 'function' && typeof module === 'object' && module && typeof exports === 'object' && exports)\r\n        module.exports = iDisqus;\r\n    /* AMD */\r\n    else if (typeof define === 'function' && define['amd'])\r\n        define(function () {\r\n            return iDisqus;\r\n        });\r\n    /* Global */\r\n    else\r\n        global['iDisqus'] = global['iDisqus'] || iDisqus;\r\n\r\n})(window || this);\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/(webpack)/buildin/module.js","webpack://[name]/./src/iDisqus.js","webpack://[name]/./index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","webpackPolyfill","deprecate","paths","children","__WEBPACK_AMD_DEFINE_RESULT__","global","document","localStorage","scripts","lasturl","length","src","isEdge","substring","lastIndexOf","navigator","userAgent","indexOf","isIE","ActiveXObject","getAjax","url","success","error","xhr","XMLHttpRequest","open","encodeURI","onreadystatechange","readyState","status","responseText","onerror","withCredentials","send","postAjax","data","params","keys","map","k","encodeURIComponent","join","setRequestHeader","ElementProto","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","selector","elements","this","ownerDocument","querySelectorAll","index","Boolean","closest","element","nodeType","parentNode","Element","User","dom","arguments","opts","init","autologin","_","getItem","email","avatar","type","logged_in","boxarr","getElementsByClassName","forEach","item","querySelector","classList","add","innerHTML","remove","dataset","setItem","api","resp","JSON","parse","code","submit","response","login","timer","popup","setInterval","closed","clearInterval","user","logout","removeItem","iDisqus","getElementById","slice","site","location","origin","optsUrl","replace","pathname","search","identifier","link","title","slug","desc","content","timeout","toggle","autoCreate","auto","emojiPath","emoji_path","emojiList","emoji_list","unicode","emoji_preview","emojiPreview","eac","stat","current","loaded","loading","editing","offsetTop","thread","next","message","mediaHtml","count","users","imageSize","disqusLoaded","disqus_config","page","callbacks","onReady","push","style","display","disabled","checked","addEventListener","handle","timeAgo","templates","prefix","suffix","seconds","minute","minutes","hour","hours","day","days","month","months","year","years","template","Math","abs","round","time","Date","getTime","$this","getAttribute","setTimeout","box","outerHTML","loadMore","post","postThread","show","upload","verify","jump","mention","keySelect","field","focus","input","disqus","getlist","tip","createElement","forum","timestamp","now","onload","head","body","appendChild","ontimeout","abort","addListener","els","evt","func","el","removeListener","removeEventListener","addAllListeners","counts","qty","commentArr","disqusUrl","href","itemLink","posts","disqusCount","console","log","popular","postsHtml","documentElement","scrollTop","total","cursor","badge","moderatorBadgeText","loadmore","load","parent","unshift","id","hasPrev","hasNext","scrollTo","test","hash","scrollBy","getBoundingClientRect","top","parentPostDom","username","parentPost","insert","isPost","mediaHTML","media","html","isMod","createdAt","isDeleted","insertAdjacentHTML","postEdit","e","postData","currentTarget","clearTimeout","edit","wrapper","contains","textarea","selStart","selectionStart","mentionIndex","mentionText","mentionDom","keyCode","showUsers","filter","re","RegExp","coord","getCaretCoord","list","left","setSelectionRange","carPos","selectionEnd","div","span","copyStyle","getComputedStyle","prop","position","textContent","substr","coords","parseFloat","lineHeight","offsetLeft","scrollLeft","removeChild","preventDefault","previousSibling","nextSibling","getLocation","history","replaceState","undefined","shortCode","cancel","className","commentBox","$avatar","$name","$email","isEmail","errorTips","gravatar","file","form","progress","alertmsg","files","size","width","FormData","append","$item","filename","xhrUpload","imageUrl","image","Image","ceil","imageItem","imageArr","Text","Dom","idisqus","errorDom","errorHtml","parentId","imgArr","mediaStr","currentId","elName","elEmail","elUrl","alertClear","preMessage","match","emojiShort","toJSON","click","mentions","reEdit","target","destroy"],"mappings":"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","file":"iDisqus.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"iDisqus\"] = factory();\n\telse\n\t\troot[\"iDisqus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","(function (global) {\r\n    'use strict';\r\n\r\n    var d = document,\r\n        l = localStorage,\r\n        scripts = d.scripts,\r\n        lasturl = scripts[scripts.length - 1].src,\r\n        filepath = lasturl.substring(0, lasturl.lastIndexOf('/')),\r\n        isEdge = navigator.userAgent.indexOf(\"Edge\") > -1,\r\n        isIE = !!window.ActiveXObject || \"ActiveXObject\" in window;\r\n\r\n    function getLocation(href) {\r\n        var link = d.createElement('a');\r\n        link.href = href;\r\n        return link;\r\n    }\r\n\r\n    function getAjax(url, success, error) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open ('GET', encodeURI(url));\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText);\r\n            }\r\n        }\r\n        xhr.onerror = error;\r\n        xhr.withCredentials = true;\r\n        xhr.send();\r\n        return xhr;\r\n    }\r\n    \r\n    function postAjax(url, data, success, error) {\r\n        var params = typeof data == 'string' ? data : Object.keys(data).map(\r\n            function(k){ return encodeURIComponent(k) + '=' + encodeURIComponent(data[k]) }\r\n        ).join('&');\r\n\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('POST', url);\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                success(xhr.responseText); \r\n            }\r\n        };\r\n        xhr.onerror = error; \r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n        xhr.send(params);\r\n        return xhr;\r\n    }\r\n    \r\n    // matches & closest polyfill https://github.com/jonathantneal/closest\r\n    (function (ElementProto) {\r\n        if (typeof ElementProto.matches !== 'function') {\r\n            ElementProto.matches = ElementProto.msMatchesSelector || ElementProto.mozMatchesSelector || ElementProto.webkitMatchesSelector || function matches(selector) {\r\n                var element = this;\r\n                var elements = (element.document || element.ownerDocument).querySelectorAll(selector);\r\n                var index = 0;\r\n\r\n                while (elements[index] && elements[index] !== element) {\r\n                    ++index;\r\n                }\r\n\r\n                return Boolean(elements[index]);\r\n            };\r\n        }\r\n\r\n        if (typeof ElementProto.closest !== 'function') {\r\n            ElementProto.closest = function closest(selector) {\r\n                var element = this;\r\n\r\n                while (element && element.nodeType === 1) {\r\n                    if (element.matches(selector)) {\r\n                        return element;\r\n                    }\r\n\r\n                    element = element.parentNode;\r\n                }\r\n\r\n                return null;\r\n            };\r\n        }\r\n    })(window.Element.prototype);\r\n\r\n    // 访客信息\r\n    var User = function () {\r\n        this.dom = arguments[0];\r\n        this.opts = arguments[1];\r\n        this.init();\r\n        this.autologin();\r\n    }\r\n\r\n    User.prototype = {\r\n        // 初始化访客信息\r\n        init: function(){\r\n            var _ = this;\r\n            // 读取访客信息\r\n            _.name = l.getItem('name');\r\n            _.email = l.getItem('email');\r\n            _.url = l.getItem('url');\r\n            _.avatar = l.getItem('avatar');\r\n            _.type = l.getItem('type');\r\n            _.logged_in = l.getItem('logged_in');\r\n\r\n            var boxarr = _.dom.getElementsByClassName('comment-box');\r\n            if( _.logged_in == 'true' ) {\r\n                [].forEach.call(boxarr,function(item){\r\n                    if(_.type == '1'){\r\n                        item.querySelector('.comment-form-wrapper').classList.add('logged-in');\r\n                        _.dom.querySelector('.comment-header').classList.add('logged-in');\r\n                        _.dom.querySelector('#user-name').innerHTML = _.name;\r\n                    }\r\n                    item.querySelector('.comment-form-name').value = _.name;\r\n                    item.querySelector('.comment-form-email').value = _.email;\r\n                    item.querySelector('.comment-form-url').value = _.url;\r\n                    item.querySelector('.comment-avatar-image').src = _.avatar;\r\n                });\r\n            } else {\r\n                [].forEach.call(boxarr,function(item){\r\n                    item.querySelector('.comment-form-wrapper').classList.remove('logged-in');\r\n                    _.dom.querySelector('.comment-header').classList.remove('logged-in');\r\n                    _.dom.querySelector('#user-name').innerHTML = '';\r\n                    item.querySelector('.comment-form-name').value = '';\r\n                    item.querySelector('.comment-form-email').value = '';\r\n                    item.querySelector('.comment-form-url').value = '';\r\n                    item.querySelector('.comment-avatar-image').src = _.dom.querySelector('.comment-avatar-image').dataset.avatar;\r\n                });\r\n                l.setItem('logged_in', 'false');\r\n            }\r\n        },\r\n\r\n        // 自动登录\r\n        autologin: function(){\r\n            var _ = this;\r\n            getAjax( _.opts.api +'/user.php', function(resp){\r\n                var data = JSON.parse(resp);\r\n                if( data.code == 0 ){\r\n                    _.submit(data.response);\r\n                } else {\r\n                    if( _.type == '1' ){\r\n                        l.setItem('logged_in', 'false');\r\n                        _.init();\r\n                    }\r\n                }\r\n            }, function(){\r\n            })\r\n        },\r\n\r\n        // 登录\r\n        login: function(){\r\n\r\n            var _ = this;\r\n            var popup = window.open(_.opts.api+'/login.php', 'Disqus Oauth', 'width=470,height=508');\r\n            var timer;\r\n            function isLogged(){\r\n                if (!popup || !popup.closed) return;\r\n                clearInterval(timer);\r\n                _.user.autologin();\r\n            }\r\n            timer = setInterval(isLogged, 100);\r\n\r\n        },\r\n\r\n        // 退出登录\r\n        logout: function(){\r\n            var _ = this;\r\n            postAjax( _.opts.api + '/logout.php', {}, function(resp){\r\n                l.setItem('logged_in', 'false');\r\n                l.removeItem('type');\r\n                l.removeItem('email');\r\n                l.removeItem('avatar');\r\n                l.removeItem('name');\r\n                l.removeItem('url');\r\n                _.user.init();\r\n            })\r\n        },\r\n\r\n        // 提交访客信息\r\n        submit: function(user){\r\n            l.setItem('email', user.email);\r\n            l.setItem('type', user.type);\r\n            l.setItem('name', user.name);\r\n            l.setItem('url', user.url);\r\n            l.setItem('avatar', user.avatar);\r\n            l.setItem('logged_in', 'true');\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    var iDisqus = function () {\r\n        var _ = this;\r\n\r\n        // 配置\r\n        _.opts = typeof(arguments[1]) == 'object' ? arguments[1] : arguments[0];\r\n        _.dom =  d.getElementById(typeof(arguments[0]) == 'string' ? arguments[0] : 'comments');\r\n        _.opts.api = _.opts.api.slice(-1) == '/' ? _.opts.api.slice(0,-1) : _.opts.api;\r\n        _.opts.site = _.opts.site || location.origin;\r\n        if(!!_.opts.url){\r\n            var optsUrl = _.opts.url.replace(_.opts.site, '');\r\n            _.opts.url = optsUrl.slice(0, 1) != '/' ? '/' + optsUrl : optsUrl;\r\n        } else if(isEdge || isIE) {\r\n            _.opts.url = encodeURI(location.pathname) + encodeURI(location.search);\r\n        } else {\r\n            _.opts.url = location.pathname + location.search;\r\n        }\r\n        _.opts.identifier = _.opts.identifier || _.opts.url;\r\n        _.opts.link = _.opts.site + _.opts.url; \r\n        _.opts.title = _.opts.title || d.title;\r\n        _.opts.slug = !!_.opts.slug ? _.opts.slug.replace(/[^A-Za-z0-9_-]+/g,'') : '';\r\n        _.opts.desc =  _.opts.desc || (!!d.querySelector('[name=\"description\"]') ? d.querySelector('[name=\"description\"]').content : '');\r\n        _.opts.mode = _.opts.mode || 1;\r\n        _.opts.timeout = _.opts.timeout || 3000;\r\n        _.opts.toggle = !!_.opts.toggle ? d.getElementById(_.opts.toggle) : null;\r\n        _.opts.autoCreate = !!_.opts.autoCreate || !!_.opts.auto;\r\n\r\n        // emoji 表情\r\n        _.opts.emojiPath = _.opts.emojiPath || _.opts.emoji_path || 'https://assets-cdn.github.com/images/icons/emoji/unicode/';\r\n        _.emojiList = _.opts.emojiList || _.opts.emoji_list || [{\r\n            code:'smile',\r\n            title:'笑脸',\r\n            unicode:'1f604'\r\n        },{\r\n            code:'mask',\r\n            title:'生病',\r\n            unicode:'1f637'\r\n        },{\r\n            code:'joy',\r\n            title:'破涕为笑',\r\n            unicode:'1f602'\r\n        },{\r\n            code:'stuck_out_tongue_closed_eyes',\r\n            title:'吐舌',\r\n            unicode:'1f61d'\r\n        },{\r\n            code:'flushed',\r\n            title:'脸红',\r\n            unicode:'1f633'\r\n        },{\r\n            code:'scream',\r\n            title:'恐惧',\r\n            unicode:'1f631'\r\n        },{\r\n            code:'pensive',\r\n            title:'失望',\r\n            unicode:'1f614'\r\n        },{\r\n            code:'unamused',\r\n            title:'无语',\r\n            unicode:'1f612'\r\n        },{\r\n            code:'grin',\r\n            title:'露齿笑',\r\n            unicode:'1f601'\r\n        },{\r\n            code:'heart_eyes',\r\n            title:'色',\r\n            unicode:'1f60d'\r\n        },{\r\n            code:'sweat',\r\n            title:'汗',\r\n            unicode:'1f613'\r\n        },{\r\n            code:'smirk',\r\n            title:'得意',\r\n            unicode:'1f60f'\r\n        },{\r\n            code:'relieved',\r\n            title:'满意',\r\n            unicode:'1f60c'\r\n        },{\r\n            code:'rolling_eyes',\r\n            title:'翻白眼',\r\n            unicode:'1f644'\r\n        },{\r\n            code:'ok_hand',\r\n            title:'OK',\r\n            unicode:'1f44c'\r\n        },{\r\n            code:'v',\r\n            title:'胜利',\r\n            unicode:'270c'\r\n        }];\r\n        \r\n        if(!!_.opts.emoji_preview || !!_.opts.emojiPreview ){\r\n            getAjax(_.opts.api +'/eac.json', function(resp){\r\n                _.eac = JSON.parse(resp);\r\n            }, function(){\r\n            })\r\n        }\r\n\r\n        // 默认状态\r\n        _.stat = {\r\n            current: 'idisqus', // 当前显示评论框\r\n            loaded: false,      // 评论框已加载\r\n            loading: false,     // 评论加载中\r\n            editing: false,     // 评论编辑中\r\n            offsetTop: 0,       // 高度位置\r\n            thread: null,       // 本页 thread id\r\n            next: null,         // 下条评论\r\n            message: null,      // 新评论\r\n            mediaHtml: null,    // 新上传图片\r\n            root: [],           // 根评论\r\n            count: 0,           // 评论数\r\n            users: [],          // Disqus 会员\r\n            imageSize: [],      // 已上传图片大小\r\n            disqusLoaded: false // Disqus 已加载\r\n        };\r\n\r\n        // Disqus 评论框设置\r\n        window.disqus_config = function () {\r\n            this.page.identifier = _.opts.identifier;\r\n            this.page.title = _.opts.title;\r\n            this.page.url = _.opts.link;\r\n            this.callbacks.onReady.push(function() {\r\n                _.stat.current = 'disqus';\r\n                _.stat.disqusLoaded = true;\r\n                _.dom.querySelector('#idisqus').style.display = 'none';\r\n                _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n                if( _.opts.mode == 3 && !!_.opts.toggle) {\r\n                    _.opts.toggle.disabled = '';\r\n                    _.opts.toggle.checked = true;\r\n                    _.opts.toggle.addEventListener('change', _.handle.toggle, false);\r\n                }\r\n            });\r\n        }\r\n\r\n        // 自动初始化\r\n        if( !!_.opts.init ){\r\n            _.init();\r\n        }\r\n    }\r\n\r\n    // TimeAgo https://coderwall.com/p/uub3pw/javascript-timeago-func-e-g-8-hours-ago\r\n    iDisqus.prototype.timeAgo = function() {\r\n\r\n        var _ = this;\r\n        var templates = {\r\n            prefix: \"\",\r\n            suffix: \"前\",\r\n            seconds: \"几秒\",\r\n            minute: \"1分钟\",\r\n            minutes: \"%d分钟\",\r\n            hour: \"1小时\",\r\n            hours: \"%d小时\",\r\n            day: \"1天\",\r\n            days: \"%d天\",\r\n            month: \"1个月\",\r\n            months: \"%d个月\",\r\n            year: \"1年\",\r\n            years: \"%d年\"\r\n        };\r\n        var template = function (t, n) {\r\n            return templates[t] && templates[t].replace(/%d/i, Math.abs(Math.round(n)));\r\n        };\r\n\r\n        var timer = function (time) {\r\n            if (!time) return;\r\n            time = time.replace(/\\.\\d+/, \"\"); // remove milliseconds\r\n            time = time.replace(/-/, \"/\").replace(/-/, \"/\");\r\n            time = time.replace(/T/, \" \").replace(/Z/, \" UTC\");\r\n            time = time.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\r\n            time = new Date(time * 1000 || time);\r\n\r\n            var now = new Date();\r\n            var seconds = ((now.getTime() - time) * .001) >> 0;\r\n            var minutes = seconds / 60;\r\n            var hours = minutes / 60;\r\n            var days = hours / 24;\r\n            var years = days / 365;\r\n\r\n            return templates.prefix + ( seconds < 45 && template('seconds', seconds) || seconds < 90 && template('minute', 1) || minutes < 45 && template('minutes', minutes) || minutes < 90 && template('hour', 1) || hours < 24 && template('hours', hours) || hours < 42 && template('day', 1) || days < 30 && template('days', days) || days < 45 && template('month', 1) || days < 365 && template('months', days / 30) || years < 1.5 && template('year', 1) || template('years', years)) + templates.suffix;\r\n        };\r\n\r\n        var elements = _.dom.querySelectorAll('.comment-item-time');\r\n        for (var i in elements) {\r\n            var $this = elements[i];\r\n            if (typeof $this === 'object') {\r\n                $this.title = new Date($this.getAttribute('datetime'));\r\n                $this.innerHTML = timer($this.getAttribute('datetime'));\r\n            }\r\n        }\r\n\r\n        // update time every minute\r\n        setTimeout(_.timeAgo.bind(_), 60000);\r\n\r\n    }\r\n\r\n    // 初始化评论框\r\n    iDisqus.prototype.init = function(){\r\n        var _ = this;\r\n        if(!_.dom){\r\n            return\r\n        }\r\n        // 表情\r\n        var emojiList = '';\r\n        _.emojiList.forEach(function(item){\r\n            emojiList += '<li class=\"emojione-item\" title=\"'+ item.title+'\" data-code=\":'+item.code+':\"><img class=\"emojione-item-image\" src=\"'+_.opts.emojiPath + item.unicode+'.png\" /></li>';\r\n        })\r\n        _.dom.innerHTML = '<div class=\"comments loading\" id=\"idisqus\">\\n'+\r\n            '    <div class=\"loading-container\" data-tip=\"正在加载评论…\"><svg class=\"loading-bg\" width=\"72\" height=\"72\" viewBox=\"0 0 720 720\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path class=\"ring\" fill=\"none\" stroke=\"#9d9ea1\" d=\"M 0 -260 A 260 260 0 1 1 -80 -260\" transform=\"translate(400,400)\" stroke-width=\"50\" /><polygon transform=\"translate(305,20)\" points=\"50,0 0,100 18,145 50,82 92,145 100,100\" style=\"fill:#9d9ea1\"/></svg></div>\\n'+\r\n            '    <div class=\"comment-header\">\\n' +\r\n            '        <span class=\"comment-header-item header-border\" id=\"comment-count\">评论</span>\\n' +\r\n            '        <a class=\"comment-header-item\" id=\"comment-link\" target=\"_blank\" href=\"https://disqus.com/home/discussion/fanhaobai/php_codesniffer_s_blog/?l=zh\">在线社区</a>\\n' +\r\n            '        <a class=\"comment-header-item user-menu\" href=\"#\">登录</a>\\n' +\r\n            '        <span class=\"comment-header-item\" id=\"user-name\"></span>\\n' +\r\n            '        <a class=\"comment-header-item\" id=\"comment-ibox\" target=\"_blank\" href=\"https://disqus.com/home/inbox/\"><i class=\"icon-comment\"></i><span class=\"comment-header-item\" id=\"ibox-count\">1</span></a>\\n' +\r\n            '    </div>\\n'+\r\n            '    <div class=\"comment-box\">\\n'+\r\n            '        <div class=\"comment-avatar avatar\"><img class=\"comment-avatar-image\" src=\"//a.disquscdn.com/images/noavatar92.png\" data-avatar=\"//a.disquscdn.com/images/noavatar92.png\"></div>\\n'+\r\n            '        <div class=\"comment-form\">\\n'+\r\n            '            <div class=\"comment-form-wrapper\">\\n'+\r\n            '                <textarea class=\"comment-form-textarea\" placeholder=\"加入讨论…\"></textarea>\\n'+\r\n            '                <div class=\"comment-form-alert\"></div>\\n'+\r\n            '                <div class=\"comment-image\">\\n'+\r\n            '                    <ul class=\"comment-image-list\"></ul>\\n'+\r\n            '                    <div class=\"comment-image-progress\">\\n'+\r\n            '                        <div class=\"comment-image-loaded\"></div>\\n'+\r\n            '                    </div>\\n'+\r\n            '                </div>\\n'+\r\n            '                <div class=\"comment-actions\">\\n'+\r\n            '                    <div class=\"comment-actions-group\">\\n'+\r\n            '                        <input id=\"emoji-input\" class=\"comment-actions-input\" type=\"checkbox\"> \\n'+\r\n            '                        <label class=\"comment-actions-label emojione\" for=\"emoji-input\">\\n'+\r\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\r\n            '                                <g>\\n'+\r\n            '                                <title>选择表情</title>\\n'+\r\n            '                                <path d=\"M512 1024c-282.713043 0-512-229.286957-512-512s229.286957-512 512-512c282.713043 0 512 229.286957 512 512S792.486957 1024 512 1024zM512 44.521739c-258.226087 0-467.478261 209.252174-467.478261 467.478261 0 258.226087 209.252174 467.478261 467.478261 467.478261s467.478261-209.252174 467.478261-467.478261C979.478261 253.773913 768 44.521739 512 44.521739z\"></path>\\n'+\r\n            '                                <path d=\"M801.391304 554.295652c0 160.278261-129.113043 289.391304-289.391304 289.391304s-289.391304-129.113043-289.391304-289.391304L801.391304 554.295652z\"></path>\\n'+\r\n            '                                <path d=\"M674.504348 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\\n'+\r\n            '                                <path d=\"M347.269565 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\\n'+\r\n            '                                </g>\\n'+\r\n            '                            </svg>\\n'+\r\n            '                            <ul class=\"emojione-list\">'+emojiList+'</ul>\\n'+\r\n            '                        </label>\\n'+\r\n            '                        <input id=\"upload-input\" class=\"comment-actions-input comment-image-input\" type=\"file\" accept=\"image/*\" name=\"file\"> \\n'+\r\n            '                        <label class=\"comment-actions-label\" for=\"upload-input\">\\n'+\r\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\r\n            '                                <g>\\n'+\r\n            '                                <title>上传图片</title>\\n'+\r\n            '                                <path d=\"M15.515152 15.515152 15.515152 15.515152 15.515152 15.515152Z\"></path>\\n'+\r\n            '                                <path d=\"M15.515152 139.636364l0 806.787879 992.969697 0 0-806.787879-992.969697 0zM946.424242 884.363636l-868.848485 0 0-682.666667 868.848485 0 0 682.666667zM698.181818 356.848485c0-51.417212 41.673697-93.090909 93.090909-93.090909s93.090909 41.673697 93.090909 93.090909c0 51.417212-41.673697 93.090909-93.090909 93.090909s-93.090909-41.673697-93.090909-93.090909zM884.363636 822.30303l-744.727273 0 186.181818-496.484848 248.242424 310.30303 124.121212-93.090909z\"></path>\\n'+\r\n            '                                </g>\\n'+\r\n            '                            </svg>\\n'+\r\n            '                        </label>\\n'+\r\n            '                    </div>\\n'+\r\n            '                    <div class=\"comment-actions-form\">\\n'+\r\n            '                        <label class=\"comment-actions-label exit\" title=\"退出登录\">\\n'+\r\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"48\" height=\"48\">\\n'+\r\n            '                                <path d=\"M348.870666 210.685443l378.570081 0c32.8205 0 58.683541 26.561959 58.683541 58.683541 0 162.043606 0 324.804551 0 486.848157 0 32.81129-26.561959 58.674331-58.683541 58.674331L348.870666 814.891472c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276c0-10.477632 8.372691-18.841114 18.850323-18.841114l343.645664 0c10.477632 0 18.850323-8.372691 18.850323-18.850323L711.366653 304.983109c0-10.477632-8.372691-18.841114-18.850323-18.841114L348.870666 286.141996c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276C329.98248 219.095997 338.393034 210.685443 348.870666 210.685443z\"></path>\\n'+\r\n            '                                <path d=\"M128.152728 526.436804l112.450095 112.450095c6.985088 6.985088 19.567661 6.985088 26.552749 0l26.561959-26.561959c6.985088-6.985088 6.985088-19.567661 0-26.552749l-34.925441-34.925441L494.168889 550.84675c10.477632 0 18.850323-8.372691 18.850323-18.850323l0-37.719066c0-10.477632-8.372691-18.850323-18.850323-18.850323L258.754229 475.427036l34.925441-34.925441c6.985088-6.985088 6.985088-19.567661 0-26.552749l-26.561959-26.524097c-6.985088-6.985088-19.567661-6.985088-26.552749 0L128.152728 499.875868C120.431883 506.859933 120.431883 519.451716 128.152728 526.436804z\"></path>\\n'+\r\n            '                            </svg>\\n'+\r\n            '                        </label>\\n'+\r\n            '                        <button class=\"comment-form-submit\" title=\"发表\">\\n'+\r\n            '                            <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\r\n            '                                <path d=\"M565.747623 792.837176l260.819261 112.921839 126.910435-845.424882L66.087673 581.973678l232.843092 109.933785 562.612725-511.653099-451.697589 563.616588-5.996574 239.832274L565.747623 792.837176z\" fill=\"#ffffff\"></path>\\n'+\r\n            '                            </svg>\\n'+\r\n            '                        </button>\\n'+\r\n            '                    </div>\\n'+\r\n            '                </div>\\n'+\r\n            '            </div>\\n'+\r\n            '            <div class=\"comment-form-user\">'+ ( _.opts.mode != 1 ? '<div class=\"comment-form-auth\"><button class=\"comment-form-login\" title=\"使用 Disqus 帐号登录\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 200 200\"><path fill=\"#2E9FFF\" d=\"M102.535 167.5c-16.518 0-31.621-6.036-43.298-16.021L30.5 155.405l11.102-27.401A67.658 67.658 0 0 1 35.564 100c0-37.277 29.984-67.5 66.971-67.5 36.984 0 66.965 30.223 66.965 67.5 0 37.284-29.98 67.5-66.965 67.5zm36.567-67.693v-.188c0-19.478-13.736-33.367-37.42-33.367h-25.58v67.5h25.201c23.868.001 37.799-14.468 37.799-33.945zm-37.138 17.361h-7.482V82.841h7.482c10.989 0 18.283 6.265 18.283 17.07v.188c0 10.896-7.294 17.069-18.283 17.069z\"/></svg></button></div><span> 或 </span>' : '' ) + '<form class=\"comment-form-guest\"><input class=\"comment-form-input comment-form-name\" type=\"text\" name=\"name\" placeholder=\"名字（必填）\" autocomplete=\"name\"><input class=\"comment-form-input comment-form-email\" type=\"email\" name=\"email\" placeholder=\"邮箱（必填）\" autocomplete=\"email\"><input class=\"comment-form-input comment-form-url\" type=\"url\" name=\"url\" placeholder=\"网址（可选）\" autocomplete=\"url\"></form></div>\\n'+\r\n            '        </div>\\n'+\r\n            '    </div>\\n'+\r\n            '    <ul id=\"comments\" class=\"comment-list\"></ul>\\n'+\r\n            '    <a href=\"javascript:;\" class=\"comment-loadmore\">加载更多</a>\\n'+\r\n            '</div>\\n'+\r\n            '<div class=\"comments\" id=\"disqus_thread\"></div>';\r\n\r\n        _.user = new User(_.dom,_.opts);\r\n        _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论…/,'');\r\n        _.handle = {\r\n            logout: _.user.logout.bind(_),\r\n            login: _.user.login.bind(_),\r\n            loadMore: _.loadMore.bind(_),\r\n            post: _.post.bind(_),\r\n            postThread: _.postThread.bind(_),\r\n            remove: _.remove.bind(_),\r\n            show: _.show.bind(_),\r\n            toggle: _.toggle.bind(_),\r\n            upload: _.upload.bind(_),\r\n            verify: _.verify.bind(_),\r\n            jump: _.jump.bind(_),\r\n            mention: _.mention.bind(_),\r\n            keySelect: _.keySelect.bind(_),\r\n            field: _.field,\r\n            focus: _.focus,\r\n            input: _.input\r\n        };\r\n\r\n        switch(_.opts.mode){\r\n            case 1:\r\n                _.disqus();\r\n                break;\r\n            case 2: \r\n                _.getlist();\r\n                break;\r\n            case 3: \r\n                _.getlist();\r\n                _.disqus();\r\n                break;\r\n            default:\r\n                _.disqus();\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 切换评论框\r\n    iDisqus.prototype.toggle = function(){\r\n        var _ = this;\r\n        if( _.stat.current == 'disqus' ){\r\n            _.stat.current = 'idisqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'block';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        } else {\r\n            _.disqus();\r\n        }\r\n    }\r\n\r\n    // 加载 Disqus 评论\r\n    iDisqus.prototype.disqus = function(){\r\n        var _ = this;\r\n        var _tip = _.dom.querySelector('.loading-container').dataset.tip;\r\n        if(_.opts.site != location.origin){\r\n            //console.log('本地环境不加载 Disqus 评论框！');\r\n            if( _.opts.mode == 1 ){\r\n                _.getlist();\r\n            }\r\n            return;\r\n        }\r\n        if(!_.stat.disqusLoaded ){\r\n            _tip = '尝试连接 Disqus…';\r\n\r\n            var s = d.createElement('script');\r\n            s.src = '//'+_.opts.forum+'.disqus.com/embed.js';\r\n            s.dataset.timestamp = Date.now();\r\n            s.onload = function(){\r\n                _.stat.disqusLoaded = true;\r\n                _tip = '连接成功，加载 Disqus 评论框…'\r\n            } \r\n            s.onerror = function(){\r\n                if( _.opts.mode == 1){\r\n                    _tip = '连接失败，加载简易评论框…';\r\n                    _.getlist();\r\n                }\r\n            }\r\n\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('GET', '//disqus.com/next/config.json?' + Date.now(), true);\r\n            xhr.timeout = _.opts.timeout;\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4 && xhr.status == 200) {\r\n                    (d.head || d.body).appendChild(s);\r\n                }\r\n            }\r\n            xhr.ontimeout = function () {\r\n                xhr.abort();\r\n                if( _.opts.mode == 1){\r\n                    _tip = '连接超时，加载简易评论框…';\r\n                    _.getlist();\r\n                }\r\n            }\r\n            xhr.onerror = function() {\r\n                if( _.opts.mode == 1){\r\n                    _tip = '连接失败，加载简易评论框…';\r\n                    _.getlist();\r\n                }\r\n            }\r\n            xhr.send();\r\n        } else {\r\n            _.stat.current = 'disqus';\r\n            _.dom.querySelector('#idisqus').style.display = 'none';\r\n            _.dom.querySelector('#disqus_thread').style.display = 'block';\r\n        }\r\n    }\r\n\r\n    // 添加事件监听\r\n    iDisqus.prototype.addListener = function (els, evt, func){\r\n        var _ = this;\r\n        var el = _.dom.getElementsByClassName(els);\r\n        [].forEach.call(el, function(item){\r\n            item.addEventListener(evt, func, false);\r\n        });\r\n    }\r\n\r\n    // 移除事件监听\r\n    iDisqus.prototype.removeListener = function (els, evt, func){\r\n        var _ = this;\r\n        var el = _.dom.getElementsByClassName(els);\r\n        [].forEach.call(el, function(item){\r\n            item.removeEventListener(evt, func, false);\r\n        });\r\n    }\r\n\r\n    // 添加所有事件监听\r\n    iDisqus.prototype.addAllListeners = function (){\r\n        var _ = this;\r\n        _.addListener('exit', 'click', _.handle.logout);\r\n        _.addListener('comment-form-textarea', 'blur',  _.handle.focus);\r\n        _.addListener('comment-form-textarea', 'focus',  _.handle.focus);\r\n        _.addListener('comment-form-textarea', 'input',  _.handle.input);\r\n        _.addListener('comment-form-textarea', 'keyup',  _.handle.mention);\r\n        _.addListener('comment-form-name', 'blur',  _.handle.verify);\r\n        _.addListener('comment-form-email', 'blur',  _.handle.verify);\r\n        _.addListener('comment-form-submit', 'click',  _.handle.post);\r\n        _.addListener('comment-form-login', 'click',  _.handle.login);\r\n        _.addListener('user-menu', 'click',  _.handle.login);\r\n        _.addListener('comment-image-input', 'change',  _.handle.upload);\r\n        _.addListener('emojione-item', 'click', _.handle.field);\r\n    }\r\n\r\n    // 评论计数\r\n    iDisqus.prototype.count = function (){\r\n        var _ = this;\r\n        var counts = d.querySelectorAll('[data-disqus-url]');\r\n        var qty = counts.length;\r\n        if(qty > 0){\r\n            var commentArr = [];\r\n            for( var i = 0; i < qty; i++){\r\n                commentArr[i] = counts[i].dataset.disqusUrl.replace(_.opts.site, '');\r\n            }\r\n            getAjax(\r\n                _.opts.api + '/count.php?links=' + commentArr.join(','), \r\n                function(resp) {\r\n                    var data  = JSON.parse(resp);\r\n                    var posts = data.response;\r\n                    posts.forEach(function(item){\r\n                        var link = document.createElement('a');\r\n                        link.href = item.link;\r\n                        var itemLink = link.href.replace(link.origin, '');\r\n                        var el = d.querySelector('[data-disqus-url$=\"'+itemLink+'\"]')\r\n                        if(!!el ){\r\n                            el.innerHTML = item.posts;\r\n                            el.dataset.disqusCount = item.posts;\r\n                        }\r\n                    });\r\n                }, function(){\r\n                    console.log('获取数据失败！')\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    // 热门评论\r\n    iDisqus.prototype.popular = function(){\r\n        var _ = this;\r\n        if(!!_.opts.popular){\r\n            getAjax(\r\n                _.opts.api + '/popular.php', \r\n                function(resp) {\r\n                    var data = JSON.parse(resp);\r\n                    if(data.code == 0){\r\n                        var posts = data.response;\r\n                        var postsHtml = '';\r\n                        posts.forEach(function(item){\r\n                            postsHtml += '<li><a href=\"' + item.link.replace(_.opts.site, '') + '\" title=\"' + item.title + '\">' + item.title + '</a></li>';\r\n                        });\r\n                        _.opts.popular.innerHTML = postsHtml;\r\n                    }\r\n                },function(){\r\n                    console.log('获取数据失败！')\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    // 获取评论列表\r\n    iDisqus.prototype.getlist = function(){\r\n        var _ = this;\r\n        _.stat.loading = true;\r\n        _.dom.querySelector('#idisqus').style.display = 'block';\r\n        _.dom.querySelector('#disqus_thread').style.display = 'none';\r\n        getAjax(\r\n            _.opts.api + '/getcomments.php?ident=' + _.opts.identifier + '&link=' + _.opts.url + (!!_.stat.next ? '&cursor=' + _.stat.next : ''),\r\n            function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n                    _.stat.thread = data.thread;\r\n                    _.stat.total = data.cursor.total;\r\n                    _.opts.avatar = data.forum.avatar;\r\n                    _.dom.querySelector('.comment-avatar-image').dataset.avatar = data.forum.avatar;\r\n                    if( _.user.logged_in == 'false' ){\r\n                        _.dom.querySelector('.comment-avatar-image').src = data.forum.avatar;\r\n                    }\r\n                    _.opts.badge =  data.forum.moderatorBadgeText;\r\n                    _.dom.querySelector('#idisqus').classList.remove('loading');\r\n                    _.dom.querySelector('#comment-link').href = data.link;\r\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.total + ' 条评论';\r\n                    var loadmore = _.dom.querySelector('.comment-loadmore');\r\n                    var posts = !!data.response ? data.response : [];\r\n                    _.stat.root = [];\r\n                    posts.forEach(function(item){\r\n                        _.load(item);\r\n                        if(!item.parent){\r\n                            _.stat.root.unshift(item.id);\r\n                        }\r\n                    });\r\n\r\n                    if ( data.cursor.hasPrev ){\r\n                        _.stat.root.forEach(function(item){\r\n                            _.dom.querySelector('.comment-list').appendChild(_.dom.querySelector('#comment-' + item));\r\n                        })\r\n                    } else {\r\n                        loadmore.addEventListener('click', _.handle.loadMore, false);\r\n                        _.addAllListeners();\r\n                    }\r\n                    if ( data.cursor.hasNext ){\r\n                        _.stat.next = data.cursor.next;\r\n                        loadmore.classList.remove('loading');\r\n                    } else {\r\n                        _.stat.next = null;\r\n                        loadmore.classList.add('hide');\r\n                    }\r\n                    if (posts.length == 0) {\r\n                        return;\r\n                    }\r\n\r\n                    window.scrollTo(0, _.stat.offsetTop);\r\n\r\n                    _.timeAgo();\r\n\r\n                    if (/^#disqus|^#comment-/.test(location.hash) && !data.cursor.hasPrev && !_.stat.disqusLoaded && !_.stat.loaded) {\r\n                        var el = _.dom.querySelector('#idisqus ' + location.hash)\r\n                        if( !!el ){\r\n                            window.scrollBy(0, el.getBoundingClientRect().top);\r\n                        }\r\n                    }\r\n                    _.stat.loading = false;\r\n                    _.stat.loaded = true;\r\n                } else if ( data.code === 2 ){\r\n                    _.create();\r\n                }\r\n            },function(){\r\n                console.log('获取数据失败，请检查服务器设置。')\r\n            }\r\n        );\r\n    }\r\n\r\n    // 读取评论\r\n    iDisqus.prototype.load = function(post){\r\n\r\n        var _ = this;\r\n\r\n        var parentPostDom = _.dom.querySelector('.comment-item[data-id=\"'+post.parent+'\"]');\r\n\r\n        var user = {\r\n            username: post.username,\r\n            name: post.name,\r\n            avatar: post.avatar\r\n        }\r\n        if(!!post.username && _.stat.users.map(function(user) { return user.username; }).indexOf(post.username) == -1){\r\n            _.stat.users.push(user);\r\n        }\r\n        \r\n        var parentPost = !!post.parent ? {\r\n            name: '<a class=\"comment-item-pname\" href=\"#'+parentPostDom.id+'\"><svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\"><path d=\"M1.664 902.144s97.92-557.888 596.352-557.888V129.728L1024 515.84l-425.984 360.448V628.8c-270.464 0-455.232 23.872-596.352 273.28\"></path></svg>' + parentPostDom.dataset.name + '</a>',\r\n            dom: parentPostDom.querySelector('.comment-item-children'),\r\n            insert: 'afterbegin'\r\n        } : {\r\n            name: '',\r\n            dom: _.dom.querySelector('.comment-list'),\r\n            insert: post.id == 'preview' || !!post.isPost ? 'afterbegin' : 'beforeend'\r\n        };\r\n\r\n        var mediaHTML = '';\r\n        if( post.media.length == 1 ){\r\n            mediaHTML = '<div class=\"comment-item-images\"><a class=\"comment-item-image\" target=\"_blank\" href=\"' + post.media[0] + '\" style=\"background-image: url('+post.media[0]+');width: 167px;height: 167px\"></a></div>';\r\n        } else if( post.media.length > 1 ){\r\n            post.media.forEach(function(item){\r\n                mediaHTML += '<a class=\"comment-item-image\" target=\"_blank\" href=\"' + item + '\" style=\"background-image: url('+item+')\"></a>';\r\n            })\r\n            mediaHTML = '<div class=\"comment-item-images\">' + mediaHTML + '</div>';\r\n        }\r\n\r\n        var html = '<li class=\"comment-item\" data-id=\"' + post.id + '\" data-name=\"'+ post.name + '\" id=\"comment-' + post.id + '\">' +\r\n            '<div class=\"comment-item-body\">'+\r\n            '<a class=\"comment-item-avatar\" href=\"#comment-'+post.id+'\"><img src=\"' + post.avatar + '\"></a>'+\r\n            '<div class=\"comment-item-main\">'+\r\n            '<div class=\"comment-item-header\"><a class=\"comment-item-name\" title=\"' + post.name + '\" rel=\"nofollow\" target=\"_blank\" href=\"' + ( post.url ? post.url : 'javascript:;' ) + '\">' + post.name + '</a>'+ (post.isMod ?'<span class=\"comment-item-badge\">'+_.opts.badge+'</span>' :'')+parentPost.name+'<span class=\"comment-item-bullet\"> • </span><time class=\"comment-item-time\" datetime=\"' + post.createdAt + '\"></time></div>'+\r\n            '<div class=\"comment-item-content\">' + post.message + mediaHTML + '</div>'+\r\n            '<div class=\"comment-item-footer\">' + (!!post.isPost ? '<span class=\"comment-item-manage\"><a class=\"comment-item-edit\" href=\"javascript:;\">编辑</a><span class=\"comment-item-bullet\"> • </span><a class=\"comment-item-delete\" href=\"javascript:;\">删除</a><span class=\"comment-item-bullet\"> • </span></span>' : '') + '<a class=\"comment-item-reply\" href=\"javascript:;\">回复</a> </div>'+\r\n            '</div></div>'+\r\n            '<ul class=\"comment-item-children\"></ul>'+\r\n            '</li>';\r\n\r\n        // 已删除评论\r\n        if(!!post.isDeleted){\r\n            html = '<li class=\"comment-item\" data-id=\"' + post.id + '\" id=\"comment-' + post.id + '\" data-name=\"已删除\">' +\r\n                '<div class=\"comment-item-body\">'+\r\n                '<a class=\"comment-item-avatar\" href=\"#comment-'+post.id+'\"><img src=\"' + post.avatar + '\"></a>'+\r\n                '<div class=\"comment-item-main\" data-message=\"此评论已被删除。\"></div></div>'+\r\n                '<ul class=\"comment-item-children\"></ul>'+\r\n                '</li>';\r\n        }\r\n\r\n\r\n        // 更新 or 创建\r\n        if(!!_.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]')){\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]').outerHTML = html;\r\n        } else {\r\n            parentPost.dom.insertAdjacentHTML(parentPost.insert, html);\r\n        }\r\n\r\n        if(!post.isDeleted){\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-reply').addEventListener('click', _.handle.show, false);\r\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-avatar').addEventListener('click', _.handle.jump, false);\r\n            if( !!post.parent ) {\r\n                _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-pname').addEventListener('click', _.handle.jump, false);\r\n            }\r\n        }\r\n\r\n        // 发布留言，可编辑删除\r\n        if(!!post.isPost && !_.stat.editing){\r\n            var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]');\r\n\r\n            var postEdit = setTimeout(function(){\r\n                // 十分钟后\r\n                if(!!$this.querySelector('.comment-item-manage')){\r\n                    $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                }\r\n            }, 600000);\r\n\r\n            // 删除\r\n            $this.querySelector('.comment-item-delete').addEventListener('click',function(e){\r\n                var postData = {\r\n                    id: post.id,\r\n                    identifier: _.opts.identifier\r\n                }\r\n                var delDom = e.currentTarget;\r\n                delDom.innerHTML = '删除中';\r\n                postAjax( _.opts.api + '/removecomment.php', postData, function(resp){\r\n                    var data = JSON.parse(resp);\r\n                    if (data.code === 0) {\r\n                        if(data.response.isDeleted == true){\r\n                            $this.outerHTML = '';\r\n                        } else {\r\n                            console.log(data.response.message);\r\n                            $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                        }\r\n                    } else if (data.code === 2) {\r\n                        console.log(data.response);\r\n                        $this.querySelector('.comment-item-manage').outerHTML = '';\r\n                    }\r\n                }, function(){\r\n                    console.log('删除出错，请稍后重试');\r\n                })\r\n                clearTimeout(postEdit);\r\n            }, false)\r\n\r\n            // 编辑\r\n            $this.querySelector('.comment-item-edit').addEventListener('click',function(){\r\n                _.stat.editing = post;\r\n                _.edit(post);\r\n            }, false)\r\n        }\r\n    }\r\n\r\n    // 读取更多\r\n    iDisqus.prototype.loadMore = function(e){\r\n        var _ = this;\r\n        _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\r\n        if( !_.stat.loading ){\r\n            e.currentTarget.classList.add('loading');\r\n            _.getlist();\r\n        }\r\n    }\r\n\r\n    // 评论框焦点\r\n    iDisqus.prototype.focus = function(e){\r\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\r\n        wrapper.classList.add('editing');\r\n        if (wrapper.classList.contains('focus')){\r\n            wrapper.classList.remove('focus');\r\n        } else{\r\n            wrapper.classList.add('focus');\r\n        }\r\n    }\r\n\r\n    // 输入事件\r\n    iDisqus.prototype.input = function(e){\r\n        var form = e.currentTarget.closest('.comment-form');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n    }\r\n\r\n    // 提醒用户 @ mention \r\n    iDisqus.prototype.mention = function(e){\r\n        var _ = this;\r\n        var textarea = e.currentTarget;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        if(mentionText.search(/^@\\w+$|^@$/) == 0){\r\n            if( e.keyCode == 38 || e.keyCode == 40){\r\n                return;\r\n            }\r\n            var showUsers = _.stat.users.filter(function(user){\r\n                var re = new RegExp(mentionText.slice(1), 'i');\r\n                return user.username.search(re) > -1;\r\n            });\r\n            var coord = _.getCaretCoord(textarea);\r\n            var list='', html = '';\r\n\r\n            if( showUsers.length > 0){\r\n                showUsers.forEach(function(item, i){\r\n                    list += '<li class=\"mention-user-item'+(i == 0 ? ' active' : '')+'\" data-username=\"'+item.username+'\"><img class=\"mention-user-avatar\" src=\"'+item.avatar+'\"><div class=\"mention-user-username\">'+item.username+'</div><div class=\"mention-user-name\">'+item.name+'</div></li>';\r\n                })\r\n                if(!!mentionDom){\r\n                    mentionDom.innerHTML = '<ul class=\"mention-user-list\">'+list+'</ul>';\r\n                    mentionDom.style.left = coord.left + 'px';\r\n                    mentionDom.style.top = coord.top + 'px';\r\n                } else {\r\n                    html = '<div class=\"mention-user\" style=\"left:'+coord.left+'px;top:'+coord.top+'px\"><ul class=\"mention-user-list\">'+list+'</ul></div>';\r\n                    _.dom.querySelector('#idisqus').insertAdjacentHTML('beforeend', html);\r\n                }\r\n\r\n                // 鼠标悬浮\r\n                _.addListener('mention-user-item', 'mouseover', function(){\r\n                    _.dom.querySelector('.mention-user-item.active').classList.remove('active');\r\n                    this.classList.add('active');\r\n                })\r\n\r\n                // 鼠标点击\r\n                _.addListener('mention-user-item', 'click', function(){\r\n                    var username = '@' + this.dataset.username + ' ';\r\n                    textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                    _.dom.querySelector('.mention-user').outerHTML = '';\r\n                    textarea.focus();\r\n                    textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n                    textarea.removeEventListener('keydown', _.handle.keySelect, false);\r\n                })\r\n\r\n                // 键盘事件\r\n                textarea.addEventListener('keydown', _.handle.keySelect, false);\r\n            } else{\r\n                if(!!mentionDom){\r\n                    mentionDom.outerHTML = '';\r\n                    textarea.removeEventListener('keydown', _.handle.keySelect, false);\r\n                }\r\n            }\r\n        } else {\r\n            if(!!mentionDom){\r\n                mentionDom.outerHTML = '';\r\n                textarea.removeEventListener('keydown', _.handle.keySelect, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 获取光标坐标 https://medium.com/@_jh3y/how-to-where-s-the-caret-getting-the-xy-position-of-the-caret-a24ba372990a\r\n    iDisqus.prototype.getCaretCoord = function(textarea){\r\n        var _ = this;\r\n        var carPos = textarea.selectionEnd,\r\n            div = d.createElement('div'),\r\n            span = d.createElement('span'),\r\n            copyStyle = getComputedStyle(textarea);\r\n        [].forEach.call(copyStyle, function(prop){\r\n            div.style[prop] = copyStyle[prop];\r\n        });\r\n        div.style.position = 'absolute';\r\n        _.dom.appendChild(div);\r\n        div.textContent = textarea.value.substr(0, carPos);\r\n        span.textContent = textarea.value.substr(carPos) || '.';\r\n        div.appendChild(span);\r\n        var coords = {\r\n            'top': textarea.offsetTop - textarea.scrollTop + span.offsetTop + parseFloat(copyStyle.lineHeight),\r\n            'left': textarea.offsetLeft - textarea.scrollLeft + span.offsetLeft\r\n        };\r\n        _.dom.removeChild(div);\r\n        return coords;\r\n    }\r\n\r\n    // 键盘选择用户\r\n    iDisqus.prototype.keySelect = function(e){\r\n        var _ = this;\r\n        var textarea = e.currentTarget;\r\n        var selStart = textarea.selectionStart;\r\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\r\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\r\n        var mentionDom = _.dom.querySelector('.mention-user');\r\n        var current = _.dom.querySelector('.mention-user-item.active')\r\n        switch(e.keyCode){\r\n            case 13:\r\n                //回车\r\n                var username = '@' + current.dataset.username + ' ';\r\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\r\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\r\n                _.dom.querySelector('.mention-user').outerHTML = '';\r\n                textarea.removeEventListener('keydown', _.handle.keySelect, false);\r\n                e.preventDefault();\r\n                break;\r\n            case 38:\r\n                //上\r\n                if(!!current.previousSibling){\r\n                    current.previousSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            case 40:\r\n                //下\r\n                if(!!current.nextSibling){\r\n                    current.nextSibling.classList.add('active');\r\n                    current.classList.remove('active');\r\n                }\r\n                e.preventDefault();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 跳到评论\r\n    iDisqus.prototype.jump = function(e){\r\n        var _ = this;\r\n        var $this = e.currentTarget;\r\n        var hash = getLocation($this.href).hash;\r\n        var el = _.dom.querySelector('#idisqus ' + hash);\r\n        history.replaceState(undefined, undefined, hash);\r\n        window.scrollBy(0, el.getBoundingClientRect().top);\r\n        e.preventDefault();\r\n    }\r\n\r\n    // 点选表情\r\n    iDisqus.prototype.field = function(e){\r\n        var item = e.currentTarget;\r\n        var form = item.closest('.comment-form');\r\n        var textarea = form.querySelector('.comment-form-textarea');\r\n        var selStart = textarea.selectionStart;\r\n        var shortCode = selStart == 0 ? item.dataset.code + ' ' : ' ' + item.dataset.code + ' '\r\n        textarea.value = textarea.value.slice(0, selStart) + shortCode + textarea.value.slice(selStart) \r\n        textarea.focus();\r\n        textarea.setSelectionRange(selStart + shortCode.length, selStart + shortCode.length);\r\n    }\r\n\r\n    // 显示回复框 or 取消回复框\r\n    iDisqus.prototype.show = function(e){\r\n        var _ = this;\r\n\r\n        var $this = e.currentTarget;\r\n        var item = $this.closest('.comment-item');\r\n\r\n        // 无论取消还是回复，移除已显示回复框\r\n        var box = _.dom.querySelector('.comment-item .comment-box:not([data-current-id])');\r\n        if( box ){\r\n            var $show = box.closest('.comment-item');\r\n            var cancel = $show.querySelector('.comment-item-cancel')\r\n            cancel.outerHTML = cancel.outerHTML.replace('cancel','reply');\r\n            box.outerHTML = '';\r\n        }\r\n\r\n        // 回复时，显示评论框\r\n        if( $this.className == 'comment-item-reply' ){\r\n            $this.outerHTML = $this.outerHTML.replace('reply','cancel');\r\n            var commentBox = _.box.replace(/emoji-input/g,'emoji-input-'+item.dataset.id).replace(/upload-input/g,'upload-input-'+item.dataset.id);\r\n            item.querySelector('.comment-item-children').insertAdjacentHTML('beforebegin', commentBox);\r\n            _.user.init();\r\n\r\n            _.addAllListeners();\r\n            item.querySelector('.comment-form-textarea').focus();\r\n        }\r\n\r\n        // 监听事件\r\n        _.addListener('comment-item-reply', 'click', _.handle.show);\r\n        _.addListener('comment-item-cancel', 'click', _.handle.show);\r\n\r\n    }\r\n\r\n    // 验证表单\r\n    iDisqus.prototype.verify = function(e){\r\n        var _ = this;\r\n        var $this = e.currentTarget;\r\n        var box  = $this.closest('.comment-box');\r\n        var $avatar = box.querySelector('.comment-avatar-image');\r\n        var $name = box.querySelector('.comment-form-name');\r\n        var $email = box.querySelector('.comment-form-email');\r\n        var alertmsg = box.querySelector('.comment-form-alert');\r\n        getAjax(\r\n            _.opts.api + '/getgravatar.php?email=' + $email.value + '&name=' + $name.value,\r\n            function(resp) {\r\n                var data  = JSON.parse(resp);\r\n                if ( !data.isEmail && $this == $email) {\r\n                    _.errorTips('您所填写的邮箱地址有误。', $email);\r\n                }\r\n                if ($name.value != '') {\r\n                    $avatar.src = data.gravatar;\r\n                }\r\n            }, function(){\r\n            }\r\n        );\r\n    }\r\n\r\n    // 上传图片\r\n    iDisqus.prototype.upload = function(e){\r\n        var _ = this;\r\n        var file = e.currentTarget;\r\n        var form = file.closest('.comment-form');\r\n        var progress = form.querySelector('.comment-image-progress');\r\n        var loaded = form.querySelector('.comment-image-loaded');\r\n        var wrapper = form.querySelector('.comment-form-wrapper');\r\n        var alertmsg = form.querySelector('.comment-form-alert');\r\n        alertmsg.innerHTML = '';\r\n        if(file.files.length === 0){\r\n            return;\r\n        }\r\n\r\n        // 以文件大小识别是否为同张图片\r\n        var size = file.files[0].size;\r\n\r\n        if( size > 5000000 ){\r\n            alertmsg.innerHTML = '请选择 5M 以下图片。';\r\n            setTimeout(function(){\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        if( _.stat.imageSize.indexOf(size) == -1 ){\r\n            progress.style.width = '80px';\r\n        } else {\r\n            alertmsg.innerHTML = '请勿选择已存在的图片。';\r\n            setTimeout(function(){\r\n                alertmsg.innerHTML = '';\r\n            }, 3000);\r\n            return;\r\n        }\r\n\r\n        // 展开图片上传界面\r\n        wrapper.classList.add('expanded');\r\n\r\n        // 图片上传请求\r\n        var data = new FormData();\r\n        data.append('file', file.files[0] );\r\n        var filename = file.files[0].name;\r\n\r\n        var $item;\r\n\r\n        var xhrUpload = new XMLHttpRequest();\r\n        xhrUpload.withCredentials = true;\r\n        xhrUpload.onreadystatechange = function(){\r\n            if(xhrUpload.readyState == 4 && xhrUpload.status == 200){\r\n                var data = JSON.parse(xhrUpload.responseText);\r\n                if( data.code == 0 ){\r\n                    _.stat.imageSize.push(size);\r\n                    var imageUrl = data.response[filename].url;\r\n                    var image = new Image();\r\n                    image.src = imageUrl;\r\n                    image.onload = function(){\r\n                        $item.innerHTML = '<img class=\"comment-image-object\" src=\"'+imageUrl+'\">';\r\n                        $item.dataset.imageUrl = imageUrl;\r\n                        $item.classList.remove('loading');\r\n                        $item.addEventListener('click', _.handle.remove, false);\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '图片上传出错。';\r\n                    $item.innerHTML = '';\r\n                    if( !!form.getElementsByClassName('comment-image-item').length){\r\n                        wrapper.classList.remove('expanded');\r\n                    }\r\n                    setTimeout(function(){\r\n                        alertmsg.innerHTML = '';\r\n                    }, 3000);\r\n                }\r\n            }\r\n        };\r\n        xhrUpload.upload.addEventListener('progress', function(e){\r\n            loaded.style.width = Math.ceil((e.loaded/e.total) * 100)+ '%';\r\n        }, false);\r\n        xhrUpload.upload.addEventListener('load', function(e){\r\n            loaded.style.width = 0;\r\n            progress.style.width = 0;\r\n            var imageItem = '<li class=\"comment-image-item loading\" data-image-size=\"' + size + '\">\\n'+\r\n                '    <svg version=\"1.1\" class=\"comment-image-object\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n'+\r\n                '        width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\" style=\"enable-background: new 0 0 50 50;\" xml:space=\"preserve\">\\n'+\r\n                '        <rect x=\"0\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\r\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '        </rect>\\n'+\r\n                '        <rect x=\"8\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\r\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '        </rect>\\n'+\r\n                '        <rect x=\"16\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\r\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\r\n                '        </rect>\\n'+\r\n                '    </svg>\\n'+\r\n                '</li>\\n';\r\n            form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageItem);\r\n            $item = form.querySelector('[data-image-size=\"'+size+'\"]');\r\n        }, false);\r\n        xhrUpload.open('POST', _.opts.api + '/upload.php', true);\r\n        xhrUpload.send(data);\r\n    }\r\n\r\n    // 移除图片\r\n    iDisqus.prototype.remove = function(e){\r\n        var _ = this;\r\n        var $item = e.currentTarget.closest('.comment-image-item');\r\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\r\n        $item.outerHTML = '';\r\n        _.stat.imageSize = [];\r\n        var imageArr = wrapper.getElementsByClassName('comment-image-item');\r\n        [].forEach.call(imageArr, function(item, i){\r\n            _.stat.imageSize[i] = item.dataset.imageSize;\r\n        });\r\n        if(_.stat.imageSize.length == 0){\r\n            wrapper.classList.remove('expanded');\r\n        }\r\n        wrapper.querySelector('.comment-image-input').value = '';\r\n    }\r\n\r\n    // 错误提示\r\n    iDisqus.prototype.errorTips = function(Text, Dom){\r\n        var _ = this;\r\n        if( _.user.logged_in == 'true' ){\r\n            _.handle.logout();\r\n        }\r\n        var idisqus = _.dom.querySelector('#idisqus');\r\n        var errorDom = _.dom.querySelector('.comment-form-error');\r\n        if(!!errorDom){\r\n            errorDom.outerHTML = '';\r\n        }\r\n        var Top = Dom.offsetTop;\r\n        var Left = Dom.offsetLeft;\r\n        var errorHtml = '<div class=\"comment-form-error\" style=\"top:'+Top+'px;left:'+Left+'px;\">'+Text+'</div>';\r\n        idisqus.insertAdjacentHTML('beforeend', errorHtml);\r\n        setTimeout(function(){\r\n            var errorDom = _.dom.querySelector('.comment-form-error');\r\n            if(!!errorDom){\r\n                errorDom.outerHTML = '';\r\n            }\r\n        }, 3000);\r\n    }\r\n\r\n    // 发表/回复评论\r\n    iDisqus.prototype.post = function(e){\r\n        var _ = this;\r\n        var item =  e.currentTarget.closest('.comment-box[data-current-id]') || e.currentTarget.closest('.comment-item') || e.currentTarget.closest('.comment-box');\r\n        var message = item.querySelector('.comment-form-textarea').value;\r\n        var parentId = !!item.dataset.id ? item.dataset.id : '';\r\n        var imgArr = item.getElementsByClassName('comment-image-item');\r\n        var media = [];\r\n        var mediaStr = '';\r\n        [].forEach.call(imgArr, function(image,i){\r\n            media[i] = image.dataset.imageUrl;\r\n            mediaStr += ' ' + image.dataset.imageUrl;\r\n        });\r\n\r\n        // 不是编辑框需预览\r\n        if( !item.dataset.currentId ){\r\n            var elName = item.querySelector('.comment-form-name');\r\n            var elEmail = item.querySelector('.comment-form-email');\r\n            var elUrl = item.querySelector('.comment-form-url');\r\n            var user = {\r\n                name: elName.value,\r\n                email: elEmail.value,\r\n                url: elUrl.value.replace(/\\s/g,''),\r\n                avatar: item.querySelector('.comment-avatar-image').src,\r\n                type: 0\r\n            }\r\n            var alertmsg = item.querySelector('.comment-form-alert');\r\n            var alertClear = function() {\r\n                setTimeout(function(){\r\n                    alertmsg.innerHTML = '';\r\n                }, 3000);\r\n            }\r\n\r\n            if(_.user.type != '1'){\r\n                if(/^\\s*$/i.test(user.name)){\r\n                    _.errorTips('名字不能为空。', elName);\r\n                    return;\r\n                }\r\n                if(/^\\s*$/i.test(user.email)){\r\n                    _.errorTips('邮箱不能为空。', elEmail);\r\n                    return;\r\n                }\r\n                if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(user.email)){\r\n                    _.errorTips('请正确填写邮箱。', elEmail);\r\n                    return;\r\n                }\r\n                if(!/^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(([A-Za-z0-9-~]+)\\.)+([A-Za-z0-9-~\\/])+$|^\\s*$/i.test(user.url)){\r\n                    _.errorTips('请正确填写网址。', elUrl);\r\n                    return;\r\n                }\r\n                _.user.submit(user);\r\n\r\n                if( !_.user.name && !_.user.email ){\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if(!_.stat.message && !_.stat.mediaHtml){\r\n                _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论…/,'');\r\n            }\r\n\r\n            if( media.length == 0 && /^\\s*$/i.test(message)){\r\n                alertmsg.innerHTML = '评论不能为空或空格。';\r\n                item.querySelector('.comment-form-textarea').focus();\r\n                return;\r\n            };\r\n\r\n            var preMessage = message;\r\n\r\n            if( !!_.opts.emoji_preview ){\r\n                preMessage = preMessage.replace(/:([-+\\w]+):/g, function (match){\r\n                    var emojiShort = match.replace(/:/g,'');\r\n                    var emojiImage = !!_.eac[emojiShort] ? '<img class=\"emojione\" width=\"24\" height=\"24\" alt=\"'+emojiShort+'\" title=\":'+emojiShort+':\" src=\"'+_.opts.emojiPath +_.eac[emojiShort]+'.png\">' : match;\r\n                    return emojiImage;\r\n                });\r\n            } else {\r\n                _.emojiList.forEach(function(item){\r\n                    preMessage = preMessage.replace(':'+item.code+':', '<img class=\"emojione\" width=\"24\" height=\"24\" src=\"' + _.opts.emojiPath + item.unicode + '.png\" />');\r\n                });\r\n            }\r\n\r\n            var post = {\r\n                'url': !!_.user.url ? _.user.url : '',\r\n                'isMod': false,\r\n                'username': null,\r\n                'name': _.user.name,\r\n                'avatar': _.user.avatar,\r\n                'id': 'preview',\r\n                'parent': parentId,\r\n                'createdAt': (new Date()).toJSON(),\r\n                'message': '<p>' + preMessage + '</p>',\r\n                'media': media\r\n            };\r\n\r\n            _.load(post);\r\n\r\n            _.timeAgo();\r\n\r\n            // 清空或移除评论框\r\n            _.stat.message = message;\r\n            _.stat.mediaHtml = item.querySelector('.comment-image-list').innerHTML;\r\n\r\n            if( parentId ){\r\n                item.querySelector('.comment-item-cancel').click();\r\n            } else {\r\n                item.querySelector('.comment-form-textarea').value = '';\r\n                item.querySelector('.comment-image-list').innerHTML = '';\r\n                item.querySelector('.comment-form-wrapper').classList.remove('expanded','editing');\r\n            }\r\n        }\r\n\r\n        // @\r\n        var mentions = message.match(/@\\w+/g);\r\n        if( !!mentions ){\r\n            mentions = mentions.filter(function(mention) {\r\n                return _.stat.users.map(function(user) { return user.username; }).indexOf(mention.slice(1)) > -1;\r\n            });\r\n            if( mentions.length > 0 ){\r\n                var re = new RegExp('('+mentions.join('|')+')','g');\r\n                message = message.replace(re,'$1:disqus');\r\n            }\r\n        }\r\n\r\n        // 文本 + 图片\r\n        message += mediaStr;\r\n\r\n        // POST 操作\r\n        // 编辑框则更新评论\r\n        if( !!item.dataset.currentId ){\r\n            var postData = {\r\n                id: item.dataset.currentId,\r\n                message: message,\r\n            }\r\n            postAjax( _.opts.api + '/updatecomment.php', postData, function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.stat.message = null;\r\n                    _.stat.mediaHtml = null;\r\n                    var post = data.response;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                } else {\r\n                    // 取消编辑\r\n                    _.load(_.stat.editing)\r\n                    _.timeAgo();\r\n                    _.stat.editing = false;\r\n                }\r\n            }, function(){\r\n                // 取消编辑\r\n                _.load(_.stat.editing)\r\n                _.timeAgo();\r\n                _.stat.editing = false;\r\n            })\r\n        } else {\r\n            var postData = {\r\n                thread:  _.stat.thread,\r\n                parent: parentId,\r\n                message: message,\r\n                name: _.user.name,\r\n                email: _.user.email,\r\n                url:  _.user.url,\r\n                identifier: _.opts.identifier\r\n            }\r\n            postAjax( _.opts.api + '/postcomment.php', postData, function(resp){\r\n                var data = JSON.parse(resp);\r\n                if (data.code === 0) {\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.stat.total += 1;\r\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.total + ' 条评论';\r\n                    var post = data.response;\r\n                    post.isPost = true;\r\n                    _.load(post);\r\n                    _.timeAgo();\r\n                } else if (data.code === 2) {\r\n                    alertmsg.innerHTML = data.response;\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n\r\n                    if( data.response.indexOf('author') > -1){\r\n                        _.handle.logout();\r\n                    }\r\n                } else {\r\n                    alertmsg.innerHTML = '提交失败，请稍后重试，错误代码：' + data.code;\r\n                    alertClear();\r\n\r\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                    _.reEdit(item);\r\n                }\r\n\r\n            }, function(){\r\n                alertmsg.innerHTML = '提交出错，请稍后重试。';\r\n                alertClear();\r\n\r\n                _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\r\n                _.reEdit(item);\r\n            })\r\n        }\r\n    }\r\n\r\n    // 重新编辑\r\n    iDisqus.prototype.reEdit = function(item){\r\n        var _ = this;\r\n\r\n        if( !!item.dataset.id ){\r\n            item.querySelector('.comment-item-reply').click();\r\n        } else {\r\n            item.querySelector('.comment-form-wrapper').classList.add('editing');\r\n        }\r\n\r\n        // 重新填充文本图片\r\n        if(!!_.stat.message){\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if(!!_.stat.mediaHtml){\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n            _.addListener('comment-image-item', 'click', _.handle.remove);\r\n        }\r\n    }\r\n\r\n    // 编辑\r\n    iDisqus.prototype.edit = function(post){\r\n        var _ = this;\r\n        var commentBox = _.box.replace('comment-box','comment-box comment-box-'+post.id).replace(/emoji-input/g,'emoji-input-'+post.id).replace(/upload-input/g,'upload-input-'+ post.id);\r\n        var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-body');\r\n        $this.outerHTML = commentBox;\r\n        _.user.init();\r\n        var item = _.dom.querySelector('.comment-box-' + post.id);\r\n        item.dataset.currentId = post.id;\r\n        _.addAllListeners();\r\n        item.querySelector('.comment-form-textarea').focus();\r\n\r\n        // 取消编辑\r\n        item.querySelector('.comment-actions-form').insertAdjacentHTML('afterbegin', '<a class=\"comment-form-cancel\" href=\"javascript:;\">取消</a>')\r\n        item.querySelector('.comment-form-cancel').addEventListener('click', function(){\r\n            _.stat.editing = false;\r\n            _.load(post);\r\n            _.timeAgo();\r\n        }, false);\r\n\r\n        // 重新填充文本图片，连续回复、连续编辑会有 bug\r\n        if(!!_.stat.message){\r\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\r\n        }\r\n        if(!!_.stat.mediaHtml){\r\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\r\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\r\n            _.addListener('comment-image-item', 'click', _.handle.remove);\r\n        }\r\n\r\n    }\r\n\r\n    // 创建 Thread 表单\r\n    iDisqus.prototype.create = function(){\r\n        var _ = this;\r\n        if(_.opts.autoCreate){\r\n            _.dom.querySelector('.loading-container').dataset.tip = '正在创建 Thread…';\r\n            var postData = {\r\n                url: _.opts.link,\r\n                identifier: _.opts.identifier,\r\n                title: _.opts.title,\r\n                slug: _.opts.slug,\r\n                message: _.opts.desc\r\n            }\r\n            _.postThread(postData);\r\n            return;\r\n        }\r\n        _.dom.querySelector('#idisqus').classList.remove('loading');\r\n        _.dom.querySelector('#idisqus').innerHTML  = '<div class=\"comment-header\"><span class=\"comment-header-item\">创建 Thread<\\/span><\\/div>'+\r\n            '<div class=\"comment-thread-form\">'+\r\n            '<p>由于 Disqus 没有本页面的相关 Thread，故需先创建 Thread<\\/p>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">url:<\\/label><input class=\"comment-form-input\" id=\"thread-url\" name=\"url\" value=\"' + _.opts.link + '\" disabled \\/><\\/div>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">identifier:<\\/label><input class=\"comment-form-input\" id=\"thread-identifier\" name=\"identifier\" value=\"'+_.opts.identifier+'\" disabled \\/><\\/div>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">title:<\\/label><input class=\"comment-form-input\" id=\"thread-title\" name=\"title\" value=\"'+_.opts.title+'\" disabled \\/><\\/div>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">slug:<\\/label><input class=\"comment-form-input\" id=\"thread-slug\" name=\"slug\" value=\"' + _.opts.slug + '\" \\/><\\/div>'+\r\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">message:<\\/label><textarea class=\"comment-form-textarea\" id=\"thread-message\" name=\"message\">'+_.opts.desc+'<\\/textarea><\\/div>'+\r\n            '<button id=\"thread-submit\" class=\"comment-form-submit\">提交<\\/button><\\/div>';\r\n        _.dom.querySelector('#thread-submit').addEventListener('click', _.handle.postThread, false);\r\n    }\r\n\r\n    // 创建 Thread 事件\r\n    iDisqus.prototype.postThread = function(){\r\n        var _ = this;\r\n        if( !!arguments[0].target ){\r\n            var postData = {\r\n                url: _.dom.querySelector('#thread-url').value,\r\n                identifier: _.dom.querySelector('#thread-identifier').value,\r\n                title: _.dom.querySelector('#thread-title').value,\r\n                slug: _.dom.querySelector('#thread-slug').value.replace(/[^A-Za-z0-9_-]+/g,''),\r\n                message: _.dom.querySelector('#thread-message').value\r\n            }\r\n        } else {\r\n            var postData = arguments[0];\r\n        }\r\n        postAjax( _.opts.api + '/createthread.php', postData, function(resp){\r\n            var data = JSON.parse(resp);\r\n            if( data.code === 0 ) {\r\n                setTimeout(function(){_.getlist();},100);\r\n            } else if( data.code === 2 ) {\r\n                if (data.response.indexOf('A thread already exists with link') > -1) {\r\n                    console.log(data.response.replace('A thread already exists with link,', '已存在此链接的相关 Thread，'));\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid URL') > -1) {\r\n                    console.log('参数错误，无效的\\'URL\\'');\r\n                    return;\r\n                }\r\n                if (data.response.indexOf('Invalid slug') > -1) {\r\n                    console.log('参数错误，无效的\\'slug\\'');\r\n                    return;\r\n                }\r\n                console.log(data.response);\r\n                return;\r\n            } else { \r\n                console.log(data.response);\r\n                return;\r\n            }\r\n        }, function(){\r\n            console.log('创建 Thread 出错，请稍后重试！');\r\n        })\r\n    }\r\n\r\n    // 销毁评论框\r\n    iDisqus.prototype.destroy = function(){\r\n        var _ = this;\r\n        _.removeListener('exit', 'click', _.handle.logout);\r\n        _.removeListener('comment-form-textarea', 'blur', _.handle.focus);\r\n        _.removeListener('comment-form-textarea', 'focus', _.handle.focus);\r\n        _.removeListener('comment-form-textarea', 'keyup', _.handle.mention);\r\n        _.removeListener('comment-form-name', 'blur', _.handle.verify);\r\n        _.removeListener('comment-form-email', 'blur', _.handle.verify);\r\n        _.removeListener('comment-form-submit', 'click', _.handle.post);\r\n        _.removeListener('comment-image-input', 'change', _.handle.upload);\r\n        _.removeListener('comment-item-reply', 'click', _.handle.show);\r\n        _.removeListener('comment-loadmore', 'click', _.handle.loadMore);\r\n        _.removeListener('emojione-item', 'click', _.handle.field);\r\n        _.dom.innerHTML = '';\r\n        delete _.box;\r\n        delete _.dom;\r\n        delete _.emojiList;\r\n        delete _.user;\r\n        delete _.handle;\r\n        delete _.opts;\r\n        delete _.stat;\r\n    }\r\n\r\n    /* CommonJS */\r\n    if (typeof require === 'function' && typeof module === 'object' && module && typeof exports === 'object' && exports)\r\n        module.exports = iDisqus;\r\n    /* AMD */\r\n    else if (typeof define === 'function' && define['amd'])\r\n        define(function () {\r\n            return iDisqus;\r\n        });\r\n    /* Global */\r\n    else\r\n        global['iDisqus'] = global['iDisqus'] || iDisqus;\r\n\r\n})(window || this);\r\n","require('./src/iDisqus.scss');\r\nmodule.exports = require('./src/iDisqus.js');\r\n"],"sourceRoot":""}
>>>>>>> fan/master
